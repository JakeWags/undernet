{"version":3,"file":"monolith.bundle.js","sources":["../framework/js/src/utils.js","../framework/js/src/components/modal.js","../framework/js/src/components/accordion.js","../framework/js/src/monolith.js"],"sourcesContent":["\"use strict\"\n\nconst keyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n}\n\nconst selectors = {\n  FOCUSABLE_SELECTOR: \":not(.is-visually-hidden)\",\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n}\n\nconst events = {\n  KEYDOWN: \"keydown\",\n}\n\n/**\n * Utility methods for DOM traversal and focus trapping.\n * @module Utils\n */\nexport default class Utils {\n  constructor() {\n    // bind events to Utils\n    this.handleFocusTrap = this.handleFocusTrap.bind(this)\n  }\n\n  /**\n   * Because IE does not recognize NodeList.forEach(), we use a cross-browser solution for returning an array of DOM nodes.\n   * @param {String} element - A DOM node's class, attribute, etc., to search the document.\n   * @return {Array}\n   */\n  findElements(element) {\n    const nodeList = document.querySelectorAll(element)\n    return Array.apply(null, nodeList)\n  }\n\n  /**\n   * Creates a string of element selector patterns using common elements.\n   * @param {String} container - The enclosing container's class, attribute, etc.\n   * @return {String}\n   */\n  getFocusableElements(container) {\n    let focusables = []\n    selectors.FOCUSABLE_TAGS.map(element =>\n      focusables.push(`${container} ${element}${selectors.FOCUSABLE_SELECTOR}`),\n    )\n    return this.findElements(focusables.join(\", \"))\n  }\n\n  /**\n   * Listens to the first and last elements matched from this.getFocusableElements()\n   * @param {String} container - The container's class, attribute, etc.\n   * @return {null}\n   */\n  captureFocus(container) {\n    this.focusContainer = container\n    const children = this.getFocusableElements(this.focusContainer)\n    this.focusableFirstChild = children[0]\n    this.focusableLastChild = children[children.length - 1]\n\n    document.addEventListener(events.KEYDOWN, this.handleFocusTrap)\n  }\n\n  /**\n   * Handles focus on first or last child in a container.\n   * @param {Object} e - Event (keypress)\n   * @return {null}\n   */\n  handleFocusTrap(event) {\n    const active = document.activeElement\n    const containerElement = document.querySelector(this.focusContainer)\n    const containerActive = active === containerElement\n    const firstActive = active === this.focusableFirstChild\n    const lastActive = active === this.focusableLastChild\n    const tabKey = event.which === keyCodes.TAB\n    const shiftKey = event.which === keyCodes.SHIFT || event.shiftKey\n    const hasShift = shiftKey && tabKey\n    const noShift = !shiftKey && tabKey\n\n    // Just in case the first or last child have changed -\n    // recapture focus and continue trapping.\n    this.releaseFocus()\n    this.captureFocus(this.focusContainer)\n\n    if (hasShift && (firstActive || containerActive)) {\n      event.preventDefault()\n      this.focusableLastChild.focus()\n    } else if (noShift && lastActive) {\n      event.preventDefault()\n      this.focusableFirstChild.focus()\n    }\n  }\n\n  releaseFocus() {\n    document.removeEventListener(events.KEYDOWN, this.handleFocusTrap)\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst keyCodes = {\n  ESCAPE: 27,\n}\n\nconst selectors = {\n  MODAL_CONTAINER: \"data-modal\",\n  MODAL_NAME: \"data-modal-name\",\n  MODAL_VISIBLE: \"data-modal-visible\",\n  MODAL_CLOSE: \"data-modal-close\",\n  MODAL_BUTTON: \"data-modal-button\",\n  NO_SCROLL: \"no-scroll\",\n}\n\nconst events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n  TOUCHSTART: \"touchstart\",\n}\n\nconst messages = {\n  MISSING_MODAL:\n    \"Your button is missing its corresponding modal. Check to make sure your modal is in the DOM, and that is has a [data-modal-name=*] attribute matching the button ID.\",\n}\n\n/**\n * Modal component class.\n * @module Modal\n * @requires Utils\n */\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n    this.closeButtonAttr = `[${selectors.MODAL_CLOSE}]`\n    this.modalContainerAttr = `[${selectors.MODAL_CONTAINER}]`\n    this.modals = this.findElements(`[${selectors.MODAL_CONTAINER}]`)\n    this.modalButtons = this.findElements(`[${selectors.MODAL_BUTTON}]`)\n    this.closeButtons = this.findElements(this.closeButtonAttr)\n    this.bodyTag = document.body\n    this.htmlTag = document.querySelector(\"html\")\n\n    // bind events to class\n    this.getModal = this.getModal.bind(this)\n    this.handleModalClose = this.handleModalClose.bind(this)\n    this.handleEscapeKeyPress = this.handleEscapeKeyPress.bind(this)\n    this.handleOverlayClick = this.handleOverlayClick.bind(this)\n  }\n\n  /**\n   * Add accessible attributes to modal containers\n   * Begin listening to elements with [data-modal-button]\n   * @return {null}\n   */\n  start() {\n    if (this.modals.length) {\n      this.modals.forEach(modal => {\n        modal.setAttribute(\"aria-modal\", \"true\")\n        modal.setAttribute(\"role\", \"dialog\")\n      })\n    }\n\n    if (this.modalButtons.length) {\n      this.modalButtons.forEach(button => {\n        button.addEventListener(events.CLICK, this.getModal)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to modal buttons\n   * @return {null}\n   */\n  stop() {\n    this.modalButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this.getModal)\n    })\n  }\n\n  /**\n   * Locate a button's corresponding modal container.\n   * @param {Object} event - The event object\n   * @return {null}\n   */\n  getModal(event) {\n    event.preventDefault()\n    this.renderModal(event)\n  }\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   * @return {null}\n   */\n  renderModal(event) {\n    // setup core lightbox properties\n    this.modalButton = event.target\n    this.modalOverlayAttr = `[${selectors.MODAL_NAME}='${this.modalButton.id}']`\n    this.modalOverlay = document.querySelector(this.modalOverlayAttr)\n\n    if (!this.modalOverlay) {\n      throw messages.MISSING_MODAL\n      return\n    }\n\n    this.activeModalSelector = `${this.modalOverlayAttr} ${this.modalContainerAttr}`\n    this.activeModal = document.querySelector(this.activeModalSelector)\n    this.modalCloseButtons = this.findElements(`${this.modalOverlayAttr} ${this.closeButtonAttr}`)\n\n    this.handleScrollStop()\n    this.captureFocus(this.activeModalSelector)\n    this.modalOverlay.setAttribute(\"aria-hidden\", \"false\")\n    this.activeModal.setAttribute(\"tabindex\", \"-1\")\n    this.modalOverlay.setAttribute(selectors.MODAL_VISIBLE, \"\")\n    this.activeModal.focus()\n\n    // offset slight scroll caused by this.activeModal.focus()\n    this.modalOverlay.scrollTop = 0\n\n    // begin listening to events\n    document.addEventListener(events.KEYDOWN, this.handleEscapeKeyPress)\n    document.addEventListener(events.CLICK, this.handleOverlayClick)\n    document.addEventListener(events.TOUCHSTART, this.handleOverlayClick)\n    this.modalCloseButtons.forEach(button => {\n      button.addEventListener(events.CLICK, this.handleModalClose)\n    })\n  }\n\n  /**\n   * Turn off event listeners and reset focus to last selected DOM node (button)\n   * @param {Object} event - Event (keydown or click)\n   * @return {null}\n   */\n  handleModalClose(event) {\n    event.preventDefault()\n    this.modalOverlay.removeAttribute(selectors.MODAL_VISIBLE)\n    this.handleReturnFocus()\n    this.handleScrollRestore()\n    this.releaseFocus()\n    this.modalOverlay.setAttribute(\"aria-hidden\", \"true\")\n    this.activeModal.removeAttribute(\"tabindex\")\n\n    // stop listening to events\n    document.removeEventListener(events.KEYDOWN, this.handleEscapeKeyPress)\n    document.removeEventListener(events.CLICK, this.handleOverlayClick)\n    document.removeEventListener(events.TOUCHSTART, this.handleOverlayClick)\n    this.modalCloseButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this.handleModalClose)\n    })\n  }\n\n  /**\n   * Handles click event on the modal background to close it.\n   * @param {Object} event - Event (keydown)\n   * @return {null}\n   */\n  handleOverlayClick(event) {\n    if (event.target !== this.modalOverlay) return\n    this.handleModalClose(event)\n  }\n\n  /**\n   * Handles escape key event to close the current modal\n   * @param {Object} event - Event (keydown)\n   * @return {null}\n   */\n  handleEscapeKeyPress(event) {\n    const escapeKey = event.which === keyCodes.ESCAPE\n    if (escapeKey) {\n      this.handleModalClose(event)\n    }\n  }\n\n  /**\n   * Returns focus to the last focused element before the modal was called.\n   * @param {Object} button - The current modal's corresponding button.\n   * @return {null}\n   */\n  handleReturnFocus() {\n    this.modalButton.setAttribute(\"tabindex\", \"-1\")\n    this.modalButton.focus()\n    this.modalButton.removeAttribute(\"tabindex\")\n  }\n\n  /**\n   * Restores scroll behavior to <html> and <body>\n   * @return {null}\n   */\n  handleScrollRestore() {\n    this.bodyTag.classList.remove(selectors.NO_SCROLL)\n    this.htmlTag.classList.remove(selectors.NO_SCROLL)\n  }\n\n  /**\n   * Prevents scroll behavior on <html> and <body>\n   * @return {null}\n   */\n  handleScrollStop() {\n    this.bodyTag.classList.add(selectors.NO_SCROLL)\n    this.htmlTag.classList.add(selectors.NO_SCROLL)\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst keyCodes = {\n  SPACE: 32,\n}\n\nconst selectors = {\n  ACCORDION_CONTAINER: \"data-accordion\",\n  ACCORDION_EXPANDED: \"data-accordion-expanded\",\n  ACCORDION_BUTTON: \"data-accordion-button\",\n  ACCORDION_CONTENT: \"data-accordion-content\",\n  ACCORDION_MULTIPLE: \"data-accordion-toggle-multiple\",\n}\n\nconst events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst messages = {\n  MISSING_ACCORDION_CONTENT:\n    \"You have an accordion button that is missing its content block or its [data-accordion-content] attribute.\",\n  MISSING_ACCORDION_BUTTONS:\n    \"You have an accordion component with no [data-accordion-button] children.\",\n}\n\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n    this.accordionContainers = this.findElements(`[${selectors.ACCORDION_CONTAINER}]`)\n    this.accordionButtons = this.findElements(`[${selectors.ACCORDION_BUTTON}]`)\n    this.accordionContents = this.findElements(`[${selectors.ACCORDION_CONTENT}]`)\n\n    // bind events to calss\n    this.getAccordion = this.getAccordion.bind(this)\n    this.handleSpaceKeyPress = this.handleSpaceKeyPress.bind(this)\n  }\n\n  start() {\n    if (this.accordionButtons.length) {\n      this.accordionButtons.forEach(button => {\n        button.setAttribute(\"role\", \"heading\")\n\n        const buttonExpandState =\n          button.parentNode.getAttribute(\"data-accordion-expanded\") === \"true\" ? \"true\" : \"false\"\n        button.setAttribute(\"aria-expanded\", buttonExpandState)\n\n        button.addEventListener(events.CLICK, this.getAccordion)\n        button.addEventListener(events.KEYDOWN, this.handleSpaceKeyPress)\n      })\n    }\n\n    if (this.accordionContents.length) {\n      this.accordionContents.forEach(content => {\n        content.setAttribute(\"role\", \"region\")\n        const contentHiddenState = content.parentNode.getAttribute(\"data-accordion-expanded\")\n        const toggleContentHiddenState = contentHiddenState === \"true\" ? \"false\" : \"true\"\n        content.setAttribute(\"aria-hidden\", toggleContentHiddenState)\n      })\n    }\n  }\n\n  stop() {\n    this.accordionButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this.getAccordion)\n      button.removeEventListener(events.KEYDOWN, this.handleSpaceKeyPress)\n    })\n  }\n\n  getAccordion(event) {\n    event.preventDefault()\n    this.renderAccordionContent(event)\n  }\n\n  renderAccordionContent(event) {\n    const button = event.target\n    const accordionRow = button.parentNode\n\n    this.container = accordionRow.parentNode\n    const accordionContent = button.nextElementSibling\n    const accordionContentHasAttr = accordionContent.hasAttribute(selectors.ACCORDION_CONTENT)\n\n    if (!accordionContentHasAttr) {\n      throw messages.MISSING_ACCORDION_CONTENT\n      return\n    }\n\n    const accordionButtonState = accordionRow.getAttribute(selectors.ACCORDION_EXPANDED)\n    const accordionContentState = accordionContent.getAttribute(selectors.ACCORDION_CONTENT)\n    const accordionContentAriaHiddenState = accordionContent.getAttribute(\"aria-hidden\")\n\n    const toggleExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    const toggleContentState = accordionContentState === \"visible\" ? \"hidden\" : \"visible\"\n    const toggleHiddenState = accordionContentAriaHiddenState === \"false\" ? \"true\" : \"false\"\n\n    this.toggleIfMultipleAllowed()\n\n    accordionRow.setAttribute(selectors.ACCORDION_EXPANDED, toggleExpandState)\n    accordionContent.setAttribute(selectors.ACCORDION_CONTENT, toggleContentState)\n    button.setAttribute(\"aria-expanded\", toggleExpandState)\n    accordionContent.setAttribute(\"aria-hidden\", toggleHiddenState)\n  }\n\n  handleSpaceKeyPress(event) {\n    if (event.which === keyCodes.SPACE) this.getAccordion(event)\n  }\n\n  toggleIfMultipleAllowed() {\n    if (this.container.hasAttribute(selectors.ACCORDION_MULTIPLE)) return\n\n    const containerId = this.container.getAttribute(selectors.ACCORDION_CONTAINER)\n    const containerAttr = `[${selectors.ACCORDION_CONTAINER}='${containerId}']`\n    const accordionContentsAttr = `${containerAttr} [${selectors.ACCORDION_CONTENT}]`\n    const allAccordionRows = this.findElements(`${containerAttr} [${selectors.ACCORDION_EXPANDED}]`)\n    const allAccordionContent = this.findElements(accordionContentsAttr)\n\n    this.toggleChildAttributes(allAccordionRows, selectors.ACCORDION_EXPANDED, \"true\", \"false\")\n    this.toggleChildAttributes(\n      allAccordionContent,\n      selectors.ACCORDION_CONTENT,\n      \"visible\",\n      \"hidden\",\n    )\n  }\n\n  toggleChildAttributes(elements, selector, currentAttr, newAttr) {\n    elements.forEach(element => {\n      if (element.hasAttribute(selector, currentAttr)) {\n        element.setAttribute(selector, newAttr)\n      }\n    })\n  }\n}\n","\"use strict\"\n\nimport Modal from \"./components/modal\"\nimport Accordion from \"./components/accordion\"\n\nconst Monolith = {\n  modals: () => new Modal(),\n  accordions: () => new Accordion(),\n}\n\nwindow.Monolith = Monolith || {}\n\nMonolith.start = () => {\n  Monolith.modals().start()\n  Monolith.accordions().start()\n}\n\nMonolith.stop = () => {\n  Monolith.modals().stop()\n  Monolith.accordions().stop()\n}\n\nexport default Monolith\n"],"names":["keyCodes","SHIFT","TAB","selectors","FOCUSABLE_SELECTOR","FOCUSABLE_TAGS","events","KEYDOWN","Utils","handleFocusTrap","bind","element","nodeList","document","querySelectorAll","Array","apply","container","focusables","map","push","findElements","join","focusContainer","children","getFocusableElements","focusableFirstChild","focusableLastChild","length","addEventListener","event","active","activeElement","containerElement","querySelector","containerActive","firstActive","lastActive","tabKey","which","shiftKey","hasShift","noShift","releaseFocus","captureFocus","preventDefault","focus","removeEventListener","ESCAPE","MODAL_CONTAINER","MODAL_NAME","MODAL_VISIBLE","MODAL_CLOSE","MODAL_BUTTON","NO_SCROLL","CLICK","RESIZE","TOUCHSTART","messages","MISSING_MODAL","Modal","closeButtonAttr","modalContainerAttr","modals","modalButtons","closeButtons","bodyTag","body","htmlTag","getModal","handleModalClose","handleEscapeKeyPress","handleOverlayClick","forEach","modal","setAttribute","button","renderModal","modalButton","target","modalOverlayAttr","id","modalOverlay","activeModalSelector","activeModal","modalCloseButtons","handleScrollStop","scrollTop","removeAttribute","handleReturnFocus","handleScrollRestore","escapeKey","classList","remove","add","SPACE","ACCORDION_CONTAINER","ACCORDION_EXPANDED","ACCORDION_BUTTON","ACCORDION_CONTENT","ACCORDION_MULTIPLE","MISSING_ACCORDION_CONTENT","MISSING_ACCORDION_BUTTONS","Accordion","accordionContainers","accordionButtons","accordionContents","getAccordion","handleSpaceKeyPress","buttonExpandState","parentNode","getAttribute","content","contentHiddenState","toggleContentHiddenState","renderAccordionContent","accordionRow","accordionContent","nextElementSibling","accordionContentHasAttr","hasAttribute","accordionButtonState","accordionContentState","accordionContentAriaHiddenState","toggleExpandState","toggleContentState","toggleHiddenState","toggleIfMultipleAllowed","containerId","containerAttr","accordionContentsAttr","allAccordionRows","allAccordionContent","toggleChildAttributes","elements","selector","currentAttr","newAttr","Monolith","accordions","window","start","stop"],"mappings":"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"}