/*!
  * @license MIT (https://github.com/geotrev/undernet/blob/master/LICENSE)
  * Undernet v4.3.0 (https://undernet.io)
  * Copyright 2017-2019 George Treviranus
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).undernet={})}(this,function(t){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?c(t):e}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d=16,u=9,h=38,_=40,v={FOCUSABLE_TAGS:["a","button","input","object","select","textarea","[tabindex]"],KEYBOARD_CLASS:"using-keyboard",NOT_VISUALLY_HIDDEN_CLASS:":not(.is-visually-hidden)"},f="keydown",p="click",w=function(t,e,n){return!1===n?t.removeAttribute(e):"string"==typeof n||null===n?t.setAttribute(e,n):t.getAttribute(e)},y=function(t,e){return t.hasAttribute(e)},A=function(t){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:document).querySelector(t)},g=function(t){return e((1<arguments.length&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t))},b=function(t,e,n){return"string"==typeof n||null===n?t.style[e]=n:t.style[e]},E=function(t){for(var e,n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(e=t.classList).add.apply(e,i)},C=function(t){for(var e,n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(e=t.classList).remove.apply(e,i)},m=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.length?n.filter(function(t){return e.classList.contains(t)}).length:e.classList.contains(n[0])},k=function(e){var t=v.FOCUSABLE_TAGS.map(function(t){return"".concat(e," ").concat(t).concat(v.NOT_VISUALLY_HIDDEN_CLASS)}).join(", ");return g(t)},D=/(iphone|ipod|ipad)/i.test(navigator.userAgent),L=function(){function t(){n(this,t),this._listenForKeyboard=this._listenForKeyboard.bind(this),this._listenForClick=this._listenForClick.bind(this),this._handleFocusTrapWithTab=this._handleFocusTrapWithTab.bind(this),this._handleFocusTrapWithArrows=this._handleFocusTrapWithArrows.bind(this),this._focusContainerSelector="",this._focusableChildren=[],this._focusableFirstChild={},this._focusableLastChild={},this._listeningForKeydown=!1,this._trapFocusWithArrows=!1}return o(t,[{key:"captureFocus",value:function(t,e){this._focusContainerSelector=t,this._focusableChildren=k(this._focusContainerSelector),this._focusableFirstChild=this._focusableChildren[0],this._focusableLastChild=this._focusableChildren[this._focusableChildren.length-1],e?e.useArrows&&(this._trapFocusWithArrows=e.useArrows||this._trapFocusWithArrows,document.addEventListener(f,this._handleFocusTrapWithArrows)):document.addEventListener(f,this._handleFocusTrapWithTab)}},{key:"releaseFocus",value:function(){this._trapFocusWithArrows?(document.removeEventListener(f,this._handleFocusTrapWithArrows),this._trapFocusWithArrows=!1):document.removeEventListener(f,this._handleFocusTrapWithTab)}},{key:"enableFocusOutline",value:function(){document.addEventListener(f,this._listenForKeyboard)}},{key:"disableFocusOutline",value:function(){this._listeningForKeydown?document.removeEventListener(f,this._listenForKeyboard):document.removeEventListener(p,this._listenForClick)}},{key:"_listenForKeyboard",value:function(){document.body.classList.add(v.KEYBOARD_CLASS),document.removeEventListener(f,this._listenForKeyboard),document.addEventListener(p,this._listenForClick),this._listeningForKeydown=!1}},{key:"_listenForClick",value:function(){document.body.classList.remove(v.KEYBOARD_CLASS),document.removeEventListener(p,this._listenForClick),document.addEventListener(f,this._listenForKeyboard),this._listeningForKeydown=!0}},{key:"_handleFocusTrapWithTab",value:function(t){var e=A(this._focusContainerSelector),n=document.activeElement===e,i=document.activeElement===this._focusableFirstChild,o=document.activeElement===this._focusableLastChild,a=t.which===u,r=t.which===d||t.shiftKey,s=!r&&a;r&&a&&(i||n)?(t.preventDefault(),this._focusableLastChild.focus()):s&&o&&(t.preventDefault(),this._focusableFirstChild.focus())}},{key:"_handleFocusTrapWithArrows",value:function(t){var e=document.activeElement===this._focusableFirstChild,n=document.activeElement===this._focusableLastChild,i=t.which===h,o=t.which===_;(i||o)&&(t.preventDefault(),e&&i?this._focusableLastChild.focus():n&&o?this._focusableFirstChild.focus():o?this._focusNextChild():i&&this._focusLastChild())}},{key:"_focusNextChild",value:function(){for(var t=0;t<this._focusableChildren.length;t++)if(this._focusableChildren[t]===document.activeElement){this._focusableChildren[t+1].focus();break}}},{key:"_focusLastChild",value:function(){for(var t=0;t<this._focusableChildren.length;t++)if(this._focusableChildren[t]===document.activeElement){this._focusableChildren[t-1].focus();break}}}]),t}(),T="data-accordion",O="data-accordion-row",S="data-visible",B="data-target",R="data-toggle-multiple",M="data-parent",F="aria-expanded",I="aria-controls",P="aria-hidden",x="aria-labelledby",K="tabindex",W="click",N=function(t){return"Could not find accordion row with [data-visible] attribute associated with [data-target='".concat(t,"'].")},H=function(t){return"Could not find [data-accordion-row] associated with [data-target='".concat(t,"'].")},j=function(t){return"Could not find an id on your header associated with ".concat(t,".")},V=function(t){return"Could not find [data-accordion] attribute associated with [data-target='".concat(t,"'].")},U=function(t){return"Could not find accordion content block with id '".concat(t,"'; should match trigger with [data-target='").concat(t,"'].")},X=function(t){function e(){var t;return n(this,e),(t=l(this,r(e).call(this)))._render=t._render.bind(c(t)),t._accordionButtons=[],t._accordionContentsAttr="",t._accordionContents=[],t._activeContainer={},t._activeButton={},t._activeAccordionRowId="",t._activeRowAttr="",t._activeRow="",t._activeContainerId="",t._activeContainerAttr="",t._activeContent={},t._activeButtonExpandState="",t._activeContentHiddenState="",t._headers=["h1","h2","h3","h4","h5","h6"],t}return a(e,L),o(e,[{key:"start",value:function(){var e=this,t=this._getAccordionButtonSelector("[".concat(T,"]"));this._accordionButtons=g(t),this._accordionButtons.length&&this._accordionButtons.forEach(function(t){e._setup(t),t.addEventListener(W,e._render)})}},{key:"stop",value:function(){var e=this;this._accordionButtons.forEach(function(t){t.removeEventListener(W,e._render)})}},{key:"_setup",value:function(t){var e=w(t,B),n=w(t,M),i=A("#".concat(e));if(!n)throw new Error(V(e));if(!i)throw new Error(U(e));var o=this._getAccordionRowAttr(e),a=A(o);if(!a)throw new Error(H(e));var r=this._headers.join(", "),s=A(r,a);if(!s.id)throw new Error(j(o));var c=k("#".concat(i.id));w(t,I,e),w(i,x,s.id);var l=w(a,S);if(!l)throw new Error(N(e));"true"===l?(b(i,"maxHeight","".concat(i.scrollHeight,"px")),w(t,F,"true"),w(i,P,"false"),c.forEach(function(t){w(t,K,"0")})):(w(t,F,"false"),w(i,P,"true"),c.forEach(function(t){w(t,K,"-1")}))}},{key:"_render",value:function(t){t.preventDefault(),this._activeButton=t.target,this._setIds(),this._setActiveRow(),this._setActiveContainer(),this._setActiveContent(),this._setVisibleState(),y(this._activeContainer,R)||this._closeAllIfToggleable(),this._toggleSelectedAccordion(),this._activeRow=null,this._activeButton=null,this._activeContent=null,this._activeContainer=null}},{key:"_setActiveContent",value:function(){this._activeContent=A("#".concat(this._activeAccordionRowId))}},{key:"_setVisibleState",value:function(){var t=w(this._activeRow,S);this._nextButtonExpandState="true"===t?"false":"true",this._nextContentHiddenState="false"===this._nextButtonExpandState?"true":"false"}},{key:"_setIds",value:function(){this._activeContainerId=w(this._activeButton,M),this._activeAccordionRowId=w(this._activeButton,B)}},{key:"_setActiveContainer",value:function(){this._activeContainerAttr="[".concat(T,"='").concat(this._activeContainerId,"']"),this._activeContainer=A(this._activeContainerAttr)}},{key:"_setActiveRow",value:function(){this._activeRowAttr=this._getAccordionRowAttr(this._activeAccordionRowId),this._activeRow=A(this._activeRowAttr)}},{key:"_getAccordionButtonSelector",value:function(e){return this._headers.map(function(t){return"".concat(e," > [").concat(O,"] > ").concat(t," [").concat(B,"]")}).join(", ")}},{key:"_getAccordionRowAttr",value:function(t){return"[".concat(O,"='").concat(t,"']")}},{key:"_closeAllIfToggleable",value:function(){var e=this,t="".concat(this._activeContainerAttr," > [").concat(O,"] > [").concat(P,"]"),n=g(t),i=this._getAccordionButtonSelector(this._activeContainerAttr),o=g(i),a=g("".concat(this._activeContainerAttr," > [").concat(O,"]"));n.filter(function(t){return t!==e._activeContent}).forEach(function(t){return b(t,"maxHeight",null)}),k(t).forEach(function(t){t.setAttribute(K,"-1")}),this._toggleAttributeInCollection(a,S,"false"),this._toggleAttributeInCollection(o,F,"false"),this._toggleAttributeInCollection(n,P,"true")}},{key:"_toggleSelectedAccordion",value:function(){var n=this;w(this._activeRow,S,this._nextButtonExpandState),w(this._activeButton,F,this._nextButtonExpandState),w(this._activeContent,P,this._nextContentHiddenState),k("#".concat(this._activeAccordionRowId)).forEach(function(t){var e="true"===n._nextButtonExpandState?"0":"-1";w(t,K,e)}),b(this._activeContent,"maxHeight")?b(this._activeContent,"maxHeight",null):b(this._activeContent,"maxHeight","".concat(this._activeContent.scrollHeight,"px"))}},{key:"_toggleAttributeInCollection",value:function(t,e,n){t.forEach(function(t){return w(t,e,n)})}}]),e}(),Y=9,G=16,q=27,z=38,J=40,Q={DATA_DROPDOWN:"data-dropdown",DATA_TARGET:"data-target",DATA_PARENT:"data-parent",DATA_VISIBLE:"data-visible",TABINDEX:"tabindex",ARIA_HASPOPUP:"aria-haspopup",ARIA_CONTROLS:"aria-controls",ARIA_LABELLEDBY:"aria-labelledby",ARIA_EXPANDED:"aria-expanded",ROLE:"role"},Z="keydown",$="click",tt="Could not setup dropdown. Make sure it has a valid [data-dropdown] attribute with a unique id as its value.",et=function(t){return"Could not find menu associated with ".concat(t,".")},nt=function(t){return"Could not find any list items associated with ".concat(t,".")},it=function(t){return"Could not find any button or anchor elements associated with ".concat(t,".")},ot="Could not find dropdown button's [data-parent] attribute.",at=function(t){function e(){var t;return n(this,e),(t=l(this,r(e).call(this)))._render=t._render.bind(c(t)),t._handleFirstTabClose=t._handleFirstTabClose.bind(c(t)),t._handleLastTabClose=t._handleLastTabClose.bind(c(t)),t._renderWithKeys=t._renderWithKeys.bind(c(t)),t._handleClose=t._handleClose.bind(c(t)),t._handleEscapeKeyPress=t._handleEscapeKeyPress.bind(c(t)),t._handleOffMenuClick=t._handleOffMenuClick.bind(c(t)),t._activeDropdown={},t._activeDropdownButton=null,t._activeDropdownMenu={},t._activeDropdownLinks=[],t._allowFocusReturn=!0,t._activeDropdownId="",t._activeDropdownAttr="",t._activeDropdownMenuId="",t._firstDropdownLink={},t._lastDropdownLink={},t._dropdownButtons=[],t._dropdowns=[],t._dropdownContainerAttr="[".concat(Q.DATA_DROPDOWN,"]"),t._dropdownTargetAttr="[".concat(Q.DATA_TARGET,"]"),t}return a(e,L),o(e,[{key:"start",value:function(){var e=this;this._dropdowns=g("".concat(this._dropdownContainerAttr)),this._dropdownButtons=g("".concat(this._dropdownContainerAttr," > ").concat(this._dropdownTargetAttr)),this._dropdowns.length&&this._dropdowns.forEach(function(t){return e._setup(t)}),this._dropdownButtons.forEach(function(t){t.addEventListener($,e._render),t.addEventListener(Z,e._renderWithKeys)})}},{key:"stop",value:function(){var e=this;this._dropdownButtons.forEach(function(t){t.removeEventListener($,e._render),t.removeEventListener(Z,e._renderWithKeys)})}},{key:"_setup",value:function(t){var e=t.getAttribute(Q.DATA_DROPDOWN);if(!e)throw new Error(tt);var n="[".concat(Q.DATA_DROPDOWN,'="').concat(e,'"]'),i=A("".concat(n," > ").concat(this._dropdownTargetAttr));if(!w(i,Q.DATA_PARENT))throw new Error(ot);var o=A("".concat(n," > ul"));if(!o)throw new Error(et(n));w(o,Q.ARIA_LABELLEDBY,i.id),w(i,Q.ARIA_CONTROLS,o.id),w(i,Q.ARIA_HASPOPUP,"true"),w(i,Q.ARIA_EXPANDED,"false");var a="".concat(n," > ul > li"),r=g(a);if(!r.length)throw new Error(nt(n));r.forEach(function(t){return w(t,Q.ROLE,"none")});var s=this._getDropdownLinks(n);if(!s.length)throw new Error(it(n));s.forEach(function(t){w(t,Q.ROLE,"menuitem"),w(t,Q.TABINDEX,"-1")})}},{key:"_render",value:function(t,e){t.preventDefault(),t.stopPropagation(),this._handleOpenDropdown(t),this._activeDropdownButton=t.target,this._setActiveDropdownId(),this._setActiveDropdown(),this._setActiveDropdownMenu(),this._setVisibleState(),this._listenToClose(),this._startEvents(),e&&e===z?this._lastDropdownLink.focus():this._firstDropdownLink.focus(),D&&b(document.body,"cursor","pointer")}},{key:"_handleClose",value:function(t){t.preventDefault(),D&&b(document.body,"cursor","auto"),this.releaseFocus(),this._handleHideState(),this._listenToRender(),this._stopEvents(),this._allowFocusReturn&&this._handleReturnFocus(),this._activeDropdownButton=null,this._activeDropdownId=null,this._activeDropdown=null}},{key:"_listenToRender",value:function(){this._activeDropdownButton.removeEventListener($,this._handleClose),this._activeDropdownButton.addEventListener($,this._render)}},{key:"_handleHideState",value:function(){var e=this;w(this._activeDropdownButton,Q.ARIA_EXPANDED,"false"),w(this._activeDropdown,Q.DATA_VISIBLE,"false"),this._activeDropdownLinks.forEach(function(t){w(t,Q.TABINDEX,"-1"),t.removeEventListener($,e._handleClose)})}},{key:"_stopEvents",value:function(){document.removeEventListener(Z,this._handleEscapeKeyPress),document.removeEventListener($,this._handleOffMenuClick)}},{key:"_setActiveDropdownId",value:function(){this._activeDropdownId=w(this._activeDropdownButton,Q.DATA_PARENT)}},{key:"_startEvents",value:function(){var e=this;document.addEventListener(Z,this._handleEscapeKeyPress),document.addEventListener($,this._handleOffMenuClick),this._activeDropdownLinks=this._getDropdownLinks(this._activeDropdownAttr),this._firstDropdownLink=this._activeDropdownLinks[0],this._lastDropdownLink=this._activeDropdownLinks[this._activeDropdownLinks.length-1],this._firstDropdownLink.addEventListener(Z,this._handleFirstTabClose),this._lastDropdownLink.addEventListener(Z,this._handleLastTabClose),this._activeDropdownLinks.forEach(function(t){w(t,Q.TABINDEX,"0"),t.addEventListener($,e._handleClose)}),this.captureFocus("".concat(this._activeDropdownAttr," > ul"),{useArrows:!0})}},{key:"_listenToClose",value:function(){this._activeDropdownButton.removeEventListener($,this._render),this._activeDropdownButton.addEventListener($,this._handleClose)}},{key:"_setVisibleState",value:function(){w(this._activeDropdownButton,Q.ARIA_EXPANDED,"true"),w(this._activeDropdown,Q.DATA_VISIBLE,"true")}},{key:"_setActiveDropdownMenu",value:function(){this._activeDropdownMenuId=w(this._activeDropdownButton,Q.DATA_TARGET),this._activeDropdownMenu=A("#".concat(this._activeDropdownMenuId))}},{key:"_setActiveDropdown",value:function(){this._activeDropdownAttr="[".concat(Q.DATA_DROPDOWN,'="').concat(this._activeDropdownId,'"]'),this._activeDropdown=A(this._activeDropdownAttr)}},{key:"_handleOpenDropdown",value:function(t){this._activeDropdownButton&&(this._allowFocusReturn=!1,this._handleClose(t),this._allowFocusReturn=!0)}},{key:"_handleFirstTabClose",value:function(t){var e=t.which===G||t.shiftKey,n=t.which===Y;e&&n&&this._handleClose(t)}},{key:"_handleLastTabClose",value:function(t){var e=t.which===G||t.shiftKey;t.which===Y&&!e&&this._handleClose(t)}},{key:"_renderWithKeys",value:function(t){t.which!==z&&t.which!==J||this._render(t,t.which)}},{key:"_handleEscapeKeyPress",value:function(t){t.which===q&&this._handleClose(t)}},{key:"_handleOffMenuClick",value:function(t){t.target!==this._activeDropdownButton&&t.target!==this._activeDropdownMenu&&this._handleClose(t)}},{key:"_handleReturnFocus",value:function(){w(this._activeDropdownButton,Q.TAB_INDEX,"-1"),this._activeDropdownButton.focus(),w(this._activeDropdownButton,Q.TAB_INDEX,!1)}},{key:"_getDropdownLinks",value:function(t){return g("".concat(t," > ul > li > a, ").concat(t," > ul > li > button"))}}]),e}(),rt=27,st="data-modal",ct="data-target",lt="data-visible",dt="data-close",ut="data-parent",ht="aria-hidden",_t="aria-modal",vt="role",ft="tabindex",pt="no-scroll",wt="keydown",yt="click",At=function(t){return"Could not find modal trigger with id ".concat(t,".")},gt="Could not detect an id on your [data-modal] element. Please add a value matching the modal trigger's [data-parent] attribute.",bt=function(t){return"Could not find a [data-parent='".concat(t,"'] attribute within your [data-modal='").concat(t,"'] element.")},Et=function(t){function e(){var t;return n(this,e),(t=l(this,r(e).call(this)))._render=t._render.bind(c(t)),t._handleClose=t._handleClose.bind(c(t)),t._handleOverlayClick=t._handleOverlayClick.bind(c(t)),t._handleEscapeKeyPress=t._handleEscapeKeyPress.bind(c(t)),t._modals=[],t._modalButtons=[],t._activeModalButton={},t._activeModalOverlay={},t._activeModal={},t._activeModalId="",t._activeModalSelector="",t._activeModalCloseButtons=[],t._originalPagePaddingRight="",t._scrollbarOffset=0,t._modalContainerAttr="[".concat(st,"]"),t}return a(e,L),o(e,[{key:"start",value:function(){var e=this;this._modals=g(this._modalContainerAttr),k(this._modalContainerAttr).forEach(function(t){w(t,ft,"-1")}),this._modals.length&&this._modals.forEach(function(t){e._setup(t)})}},{key:"stop",value:function(){var i=this;this._modals.forEach(function(t){var e=w(t,st),n=A("[".concat(ct,"='").concat(e,"']"));if(!n)throw new Error(At(e));n.removeEventListener(yt,i._render)})}},{key:"_setup",value:function(t){var e=w(t,st);if(!e)throw new Error(gt);var n=A("[".concat(ut,"='").concat(e,"']"),t);if(!n)throw new Error(bt(e));var i=A("[".concat(st,"='").concat(e,"']"));w(i,ht,"true"),w(i,lt,"false"),w(n,_t,"true"),w(n,vt,"dialog");var o=A("[".concat(ct,"='").concat(e,"']"));if(!o)throw new Error(At(e));o.addEventListener(yt,this._render)}},{key:"_render",value:function(t){t.preventDefault(),this._activeModalButton=t.target,this._setActiveModalId(),this._setActiveModalOverlay(),this._setActiveModal(),this._enableFocusOnChildren(),this._handleScrollbarOffset(),this._handleScrollStop(),this.captureFocus(this._activeModalSelector),this._setAttributes(),this._setCloseButtons(),this._handleModalFocus(),this._activeModalOverlay.scrollTop=0,this._startEvents()}},{key:"_handleClose",value:function(t){t.preventDefault(),this._stopEvents(),this._handleReturnFocus(),this._removeAttributes(),this.releaseFocus(),this._handleScrollRestore(),this._removeScrollbarOffset(),this._disableFocusOnChildren(),D&&b(this._activeModalOverlay,"cursor","auto"),this._activeModalId=null,this._activeModalButton=null,this._activeModal=null}},{key:"_setCloseButtons",value:function(){this._activeModalCloseButtons=g("".concat(this._activeModalSelector," [").concat(dt,"]"))}},{key:"_setActiveModalId",value:function(){this._activeModalId=w(this._activeModalButton,ct)}},{key:"_setActiveModalOverlay",value:function(){this._activeModalOverlay=A("[".concat(st,"='").concat(this._activeModalId,"']"))}},{key:"_removeAttributes",value:function(){w(this._activeModalOverlay,lt,"false"),w(this._activeModalOverlay,ht,"true"),w(this._activeModal,ft,!1)}},{key:"_disableFocusOnChildren",value:function(){k(this._activeModalSelector).forEach(function(t){w(t,ft,"-1")})}},{key:"_stopEvents",value:function(){var e=this;document.removeEventListener(wt,this._handleEscapeKeyPress),document.removeEventListener(yt,this._handleOverlayClick),this._activeModalCloseButtons.forEach(function(t){t.removeEventListener(yt,e._handleClose)})}},{key:"_setActiveModal",value:function(){this._activeModalSelector="[".concat(ut,"='").concat(this._activeModalId,"']"),this._activeModal=A(this._activeModalSelector,this._activeModalOverlay)}},{key:"_setAttributes",value:function(){w(this._activeModalOverlay,ht,"false"),w(this._activeModalOverlay,lt,"true"),D&&b(this._activeModalOverlay,"cursor","pointer")}},{key:"_startEvents",value:function(){var e=this;document.addEventListener(wt,this._handleEscapeKeyPress),document.addEventListener(yt,this._handleOverlayClick),this._activeModalCloseButtons.forEach(function(t){t.addEventListener(yt,e._handleClose)})}},{key:"_handleModalFocus",value:function(){w(this._activeModal,ft,"-1"),this._activeModal.focus()}},{key:"_enableFocusOnChildren",value:function(){k(this._activeModalSelector).forEach(function(t){t.setAttribute(ft,"0")})}},{key:"_getScrollbarOffset",value:function(){return window.innerWidth-document.body.getBoundingClientRect().right}},{key:"_handleScrollbarOffset",value:function(){this._scrollbarIsVisible()&&(this._scrollbarOffset=this._getScrollbarOffset(),this._originalPagePaddingRight=b(document.body,"paddingRight"),b(document.body,"paddingRight","".concat(this._scrollbarOffset,"px")))}},{key:"_scrollbarIsVisible",value:function(){if("number"==typeof window.innerWidth)return window.innerWidth>document.body.getBoundingClientRect().right}},{key:"_removeScrollbarOffset",value:function(){var t=this,e=this._originalPagePaddingRight;b(this._activeModalOverlay,"paddingLeft","".concat(this._scrollbarOffset,"px")),setTimeout(function(){return b(t._activeModalOverlay,"paddingLeft","")},500),b(document.body,"paddingRight",e?"".concat(e,"px"):"")}},{key:"_handleOverlayClick",value:function(t){t.target===this._activeModalOverlay&&this._handleClose(t)}},{key:"_handleEscapeKeyPress",value:function(t){t.which===rt&&this._handleClose(t)}},{key:"_handleReturnFocus",value:function(){w(this._activeModalButton,ft,"-1"),this._activeModalButton.focus(),w(this._activeModalButton,ft,!1)}},{key:"_handleScrollRestore",value:function(){C(document.body,pt),C(document.documentElement,pt)}},{key:"_handleScrollStop",value:function(){E(document.body,pt),E(document.documentElement,pt)}}]),e}(),Ct=27,mt="data-tooltip",kt="data-visible",Dt="data-target",Lt="role",Tt="aria-describedby",Ot="is-drop-left",St="is-drop-right",Bt="mouseover",Rt="mouseout",Mt="focus",Ft="blur",It="keydown",Pt="Could not find your tooltip's id.",xt=function(t){return"Could not find a tooltip trigger with id of ".concat(t,".")},Kt=function(t){return"Could not find a tooltip with id of ".concat(t,".")},Wt=function(){function t(){n(this,t),this._render=this._render.bind(this),this._handleClose=this._handleClose.bind(this),this._handleEscapeKeyPress=this._handleEscapeKeyPress.bind(this),this._activeTrigger=null,this._activeTooltip=null,this._allTooltips=[]}return o(t,[{key:"start",value:function(){var e=this;this._allTooltips=g("[".concat(mt,"]")),this._allTooltips.forEach(function(t){e._setup(t)})}},{key:"stop",value:function(){var i=this;this._allTooltips.forEach(function(t){var e=w(t,mt),n=A(i._getTrigger(e),t);(i._activeTooltip||i._activeTrigger)&&i._handleClose(),n.removeEventListener(Bt,i._render),n.removeEventListener(Mt,i._render)})}},{key:"_setup",value:function(t){var e=w(t,mt);if(!e)throw new Error(Pt);var n=A(this._getTrigger(e),t),i=A("#".concat(e),t);if(!n)throw new Error(xt(e));if(!i)throw new Error(Kt(e));w(n,Tt,e),w(i,Lt,"tooltip"),n.addEventListener(Bt,this._render),n.addEventListener(Mt,this._render)}},{key:"_render",value:function(t){this._activeTrigger=t.target;var e=this._activeTrigger.getAttribute(Dt);this._activeTooltip=document.getElementById(e),this._isLeftOrRight()?this._alignTooltip("height"):this._alignTooltip("width"),this._setVisibleState(),this._startCloseEvents()}},{key:"_handleClose",value:function(){this._setHideState(),this._startOpenEvents(),this._activeTrigger=null,this._activeTooltip=null}},{key:"_setVisibleState",value:function(){w(this._activeTooltip,kt,"true")}},{key:"_setHideState",value:function(){w(this._activeTooltip,kt,"false")}},{key:"_startCloseEvents",value:function(){this._activeTrigger.removeEventListener(Bt,this._render),this._activeTrigger.removeEventListener(Mt,this._render),this._activeTrigger.addEventListener(Rt,this._handleClose),this._activeTrigger.addEventListener(Ft,this._handleClose),document.addEventListener(It,this._handleEscapeKeyPress),D&&b(document.body,"cursor","pointer")}},{key:"_handleEscapeKeyPress",value:function(t){t.which===Ct&&this._handleClose()}},{key:"_startOpenEvents",value:function(){this._activeTrigger.removeEventListener(Rt,this._handleClose),this._activeTrigger.removeEventListener(Ft,this._handleClose),this._activeTrigger.addEventListener(Bt,this._render),this._activeTrigger.addEventListener(Mt,this._render),document.removeEventListener(It,this._handleEscapeKeyPress),D&&b(document.body,"cursor","auto")}},{key:"_alignTooltip",value:function(t){var e=this._getSize(this._activeTrigger,t),n=this._getSize(this._activeTooltip,t),i=n<e?(e-n)/2:(n-e)/-2;b(this._activeTooltip,"height"===t?"top":"left","".concat(i,"px"))}},{key:"_getTrigger",value:function(t){return"[".concat(Dt,'="').concat(t,'"]')}},{key:"_getSize",value:function(t,e){return Math.floor(t.getBoundingClientRect()[e])}},{key:"_isLeftOrRight",value:function(){return m(this._activeTooltip,Ot,St)}}]),t}(),Nt=new X,Ht=new at,jt=new Et,Vt=new Wt,Ut=new L,Undernet={Modals:jt,Accordions:Nt,Dropdowns:Ht,Tooltips:Vt,Utils:Ut,start:function(){Undernet.Modals.start(),Undernet.Accordions.start(),Undernet.Dropdowns.start(),Undernet.Tooltips.start(),Undernet.Utils.enableFocusOutline()},stop:function(){Undernet.Modals.stop(),Undernet.Accordions.stop(),Undernet.Dropdowns.stop(),Undernet.Utils.disableFocusOutline()}};window.Undernet=Undernet,t.Accordions=Nt,t.Dropdowns=Ht,t.Modals=jt,t.Tooltips=Vt,t.Undernet=Undernet,t.Utils=Ut,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=undernet.bundle.min.js.map
