{"version":3,"file":"undernet.bundle.js","sources":["../js/src/utils.js","../js/src/components/modal.js","../js/src/components/accordion.js","../js/src/components/dropdown.js","../js/src/index.js","../js/src/index.bundle.js"],"sourcesContent":["\"use strict\"\n\nconst KeyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst Selectors = {\n  NOT_VISUALLY_HIDDEN: \":not(.is-visually-hidden)\",\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n  KEYBOARD_CLASS: \"using-keyboard\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\n/**\n * Utility methods for DOM traversal and focus trapping.\n * @module Utils\n */\nexport default class Utils {\n  #focusContainerSelector = \"\"\n  #focusableChildren = []\n  #focusableFirstChild = {}\n  #focusableLastChild = {}\n  #listeningForKeydown = false\n  #trapFocusWithArrows = false\n\n  // public\n\n  /**\n   * Listens to the first and last elements matched from this.getFocusableElements()\n   * @param {String} container - The container's class, attribute, etc.\n   * @param {Object} options - Optional has hof options.\n   */\n  captureFocus(container, options) {\n    this.#focusContainerSelector = container\n    this.#focusableChildren = this.getFocusableElements(this.#focusContainerSelector)\n    this.#focusableFirstChild = this.#focusableChildren[0]\n    this.#focusableLastChild = this.#focusableChildren[this.#focusableChildren.length - 1]\n\n    if (options) {\n      if (options.useArrows) {\n        this.#trapFocusWithArrows = options.useArrows || this.#trapFocusWithArrows\n        document.addEventListener(Events.KEYDOWN, this.#handleFocusTrapWithArrows)\n      }\n    } else {\n      document.addEventListener(Events.KEYDOWN, this.#handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Stop trapping focus set in this.captureFocus()\n   */\n  releaseFocus() {\n    if (this.#trapFocusWithArrows) {\n      document.removeEventListener(Events.KEYDOWN, this.#handleFocusTrapWithArrows)\n      this.#trapFocusWithArrows = false\n    } else {\n      document.removeEventListener(Events.KEYDOWN, this.#handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Begin listening to #listenForKeyboard()\n   */\n  enableFocusOutline() {\n    document.addEventListener(Events.KEYDOWN, this.#listenForKeyboard)\n  }\n\n  /**\n   * Completely disable focus outline utility.\n   */\n  disableFocusOutline() {\n    if (this.#listeningForKeydown) {\n      document.removeEventListener(Events.KEYDOWN, this.#listenForKeyboard)\n    } else {\n      document.removeEventListener(Events.CLICK, this.#listenForClick)\n    }\n  }\n\n  /**\n   * Because IE does not recognize NodeList.forEach(),\n   * we use a cross-browser solution for returning an array of DOM nodes every time.\n   * @param {String} element - A DOM node's class, attribute, etc., to search the document.\n   * @return {Array}\n   */\n  getElements(element) {\n    const nodeList = document.querySelectorAll(element)\n    return Array.apply(null, nodeList)\n  }\n\n  /**\n   * Creates a string of element selector patterns using common elements.\n   * @param {String} container - The enclosing container's class, attribute, etc.\n   * @return {String}\n   */\n  getFocusableElements(container) {\n    const focusables = Selectors.FOCUSABLE_TAGS.map(element => {\n      return `${container} ${element}${Selectors.NOT_VISUALLY_HIDDEN}`\n    })\n\n    return this.getElements(focusables.join(\", \"))\n  }\n\n  // private\n\n  /**\n   * When a key is pressed, detect if it's tab or shift keys and enable\n   * focus outlines on currently focused element(s). Then, remove keydown listener\n   * and add click listener on #listenForClick().\n   * @param {Object} event - Event (keypress).\n   */\n  #listenForKeyboard = event => {\n    const tabKey = event.which === KeyCodes.TAB\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const arrowUp = event.which === KeyCodes.ARROW_UP\n    const arrowDown = event.which === KeyCodes.ARROW_DOWN\n\n    if (tabKey || shiftKey || arrowUp || arrowDown) {\n      document.body.classList.add(Selectors.KEYBOARD_CLASS)\n      document.removeEventListener(Events.KEYDOWN, this.#listenForKeyboard)\n      document.addEventListener(Events.CLICK, this.#listenForClick)\n      this.#listeningForKeydown = false\n    }\n  }\n\n  /**\n   * On click, remove Selectors.KEYBOARD_CLASS and re-add keydown listener.\n   * @param {Object} event - Event (keypress).\n   */\n  #listenForClick = event => {\n    document.body.classList.remove(Selectors.KEYBOARD_CLASS)\n    document.removeEventListener(Events.CLICK, this.#listenForClick)\n    document.addEventListener(Events.KEYDOWN, this.#listenForKeyboard)\n    this.#listeningForKeydown = true\n  }\n\n  /**\n   * Handles focus on first or last child in a container, using tab and tab+shift keys.\n   * @param {Object} event - Event (keypress)\n   */\n  #handleFocusTrapWithTab = event => {\n    const containerElement = document.querySelector(this.#focusContainerSelector)\n    const containerActive = document.activeElement === containerElement\n    const firstActive = document.activeElement === this.#focusableFirstChild\n    const lastActive = document.activeElement === this.#focusableLastChild\n    const tabKey = event.which === KeyCodes.TAB\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const hasShift = shiftKey && tabKey\n    const noShift = !shiftKey && tabKey\n\n    if (shiftKey && tabKey && (firstActive || containerActive)) {\n      event.preventDefault()\n      this.#focusableLastChild.focus()\n    } else if (!shiftKey && tabKey && lastActive) {\n      event.preventDefault()\n      this.#focusableFirstChild.focus()\n    }\n  }\n\n  /**\n   * Handles focus on the first, last, next, or previous child in a container, using up and down arrow keys.\n   * @param {Object} event - Event (keypress)\n   */\n  #handleFocusTrapWithArrows = event => {\n    const firstActive = document.activeElement === this.#focusableFirstChild\n    const lastActive = document.activeElement === this.#focusableLastChild\n    const arrowUp = event.which === KeyCodes.ARROW_UP\n    const arrowDown = event.which === KeyCodes.ARROW_DOWN\n\n    if (arrowUp || arrowDown) {\n      event.preventDefault()\n\n      if (firstActive && arrowUp) {\n        this.#focusableLastChild.focus()\n      } else if (lastActive && arrowDown) {\n        this.#focusableFirstChild.focus()\n      } else if (arrowDown) {\n        this.#focusNextChild()\n      } else if (arrowUp) {\n        this.#focusLastChild()\n      }\n    }\n  }\n\n  /**\n   * Focus the next child in this.#focusableChildren.\n   */\n  #focusNextChild() {\n    for (let i = 0; i < this.#focusableChildren.length; i++) {\n      if (this.#focusableChildren[i] === document.activeElement) {\n        this.#focusableChildren[i + 1].focus()\n        break\n      }\n    }\n  }\n\n  /**\n   * Focus the previous child in this.#focusableChildren.\n   */\n  #focusLastChild() {\n    for (let i = 0; i < this.#focusableChildren.length; i++) {\n      if (this.#focusableChildren[i] === document.activeElement) {\n        this.#focusableChildren[i - 1].focus()\n        break\n      }\n    }\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst KeyCodes = {\n  ESCAPE: 27,\n}\n\nconst Selectors = {\n  // unique\n  MODAL_CONTAINER: \"data-modal\",\n  MODAL_ID: \"data-modal-id\",\n  MODAL_BUTTON: \"data-modal-button\",\n  NO_SCROLL: \"no-scroll\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n}\n\nconst Messages = {\n  NO_TARGET_ERROR: `Could not find [data-target] attribute associated with a [data-modal-button] element.`,\n  NO_PARENT_ERROR: `Could not find [data-parent] attribute associated with a [data-modal] element.`,\n  NO_ID_ERROR: id =>\n    `Could not find [data-modal-id='${id}'] associated with a [data-modal] element.`,\n}\n\n/**\n * Modal component class.\n * @module Modal\n * @requires Utils\n */\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n  }\n\n  // all modals\n  #modals = []\n  #modalButtons = []\n\n  // active modal\n  #activeModalButton = {}\n  #activeModalOverlay = {}\n  #activeModal = {}\n  #activeModalId = \"\"\n  #activeModalOverlayAttr = \"\"\n  #activeModalSelector = \"\"\n  #activeModalCloseButtons = []\n\n  // attribute helpers\n  #modalContainerAttr = `[${Selectors.MODAL_CONTAINER}]`\n\n  // public\n\n  /**\n   * Add accessible attributes to modal containers\n   * Begin listening to elements with [data-modal-button]\n   */\n  start() {\n    this.#modals = this.getElements(this.#modalContainerAttr)\n    this.#modalButtons = this.getElements(`[${Selectors.MODAL_BUTTON}]`)\n\n    this.getFocusableElements(this.#modalContainerAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    if (this.#modals.length) {\n      this.#modals.forEach(modal => {\n        this.#setupModal(modal)\n      })\n    }\n\n    if (this.#modalButtons.length) {\n      this.#modalButtons.forEach(button => {\n        button.addEventListener(Events.CLICK, this.#render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to modal buttons\n   */\n  stop() {\n    this.#modalButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this.#render)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   */\n  #render = event => {\n    event.preventDefault()\n    this.#activeModalButton = event.target\n\n    if (!this.#activeModalButton.getAttribute(Selectors.DATA_TARGET)) {\n      return console.error(Messages.NO_TARGET_ERROR)\n    }\n\n    this.#activeModalId = this.#activeModalButton.getAttribute(Selectors.DATA_TARGET)\n    this.#activeModalOverlayAttr = `[${Selectors.MODAL_ID}=\"${this.#activeModalId}\"]`\n\n    if (!document.querySelector(this.#activeModalOverlayAttr)) {\n      return console.error(Messages.NO_ID_ERROR(this.#activeModalId))\n    }\n\n    this.#activeModalOverlay = document.querySelector(this.#activeModalOverlayAttr)\n\n    this.#activeModalSelector = `${this.#activeModalOverlayAttr} ${this.#modalContainerAttr}`\n    this.#activeModal = document.querySelector(this.#activeModalSelector)\n    this.#activeModalCloseButtons = this.getElements(\n      `${this.#activeModalOverlayAttr} [${Selectors.MODAL_CONTAINER}] [${Selectors.DATA_CLOSE}]`,\n    )\n\n    this.getFocusableElements(this.#activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"0\")\n    })\n\n    this.#handleScrollStop()\n    this.captureFocus(this.#activeModalSelector)\n    this.#activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n    this.#activeModal.setAttribute(Selectors.TABINDEX, \"-1\")\n    this.#activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n    this.#activeModal.focus()\n\n    // offset slight scroll caused by this.#activeModal.focus()\n    this.#activeModalOverlay.scrollTop = 0\n\n    // begin listening to events\n    document.addEventListener(Events.KEYDOWN, this.#handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this.#handleOverlayClick)\n    this.#activeModalCloseButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this.#handleClose)\n    })\n  }\n\n  #setupModal(modal) {\n    let modalId\n    if (!modal.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR)\n    } else {\n      modalId = modal.getAttribute(Selectors.DATA_PARENT)\n    }\n\n    let modalWrapper\n    if (!document.querySelector(`[${Selectors.MODAL_ID}='${modalId}']`)) {\n      return console.error(Messages.NO_ID_ERROR(modalId))\n    } else {\n      modalWrapper = document.querySelector(`[${Selectors.MODAL_ID}='${modalId}']`)\n    }\n\n    modalWrapper.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    modalWrapper.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    modal.setAttribute(Selectors.ARIA_MODAL, \"true\")\n    modal.setAttribute(Selectors.ROLE, \"dialog\")\n  }\n\n  /**\n   * Turn off event listeners and reset focus to last selected DOM node (button)\n   * @param {Object} event - Event (keydown or click)\n   */\n  #handleClose = event => {\n    event.preventDefault()\n    this.#activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    this.#handleReturnFocus()\n    this.#handleScrollRestore()\n    this.releaseFocus()\n    this.#activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    this.#activeModal.removeAttribute(Selectors.TABINDEX)\n\n    this.getFocusableElements(this.#activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    // stop listening to events\n    document.removeEventListener(Events.KEYDOWN, this.#handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this.#handleOverlayClick)\n    this.#activeModalCloseButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this.#handleClose)\n    })\n  }\n\n  /**\n   * Handles click event on the modal background to close it.\n   * @param {Object} event - Event (keydown)\n   */\n  #handleOverlayClick = event => {\n    if (event.target === this.#activeModalOverlay) {\n      this.#handleClose(event)\n    }\n  }\n\n  /**\n   * Handles escape key event to close the current modal\n   * @param {Object} event - Event (keydown)\n   */\n  #handleEscapeKeyPress = event => {\n    if (event.which === KeyCodes.ESCAPE) {\n      this.#handleClose(event)\n    }\n  }\n\n  /**\n   * Returns focus to the last focused element before the modal was called.\n   * @param {Object} button - The current modal's corresponding button.\n   */\n  #handleReturnFocus() {\n    this.#activeModalButton.setAttribute(Selectors.TABINDEX, \"-1\")\n    this.#activeModalButton.focus()\n    this.#activeModalButton.removeAttribute(Selectors.TABINDEX)\n  }\n\n  /**\n   * Restores scroll behavior to <html> and <body>\n   */\n  #handleScrollRestore() {\n    document.body.classList.remove(Selectors.NO_SCROLL)\n    document.querySelector(\"html\").classList.remove(Selectors.NO_SCROLL)\n  }\n\n  /**\n   * Prevents scroll behavior on <html> and <body>\n   */\n  #handleScrollStop() {\n    document.body.classList.add(Selectors.NO_SCROLL)\n    document.querySelector(\"html\").classList.add(Selectors.NO_SCROLL)\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst Selectors = {\n  // unique\n  ACCORDION_CONTAINER: \"data-accordion\",\n  ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst Messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find parent with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with ${id}.`,\n  NO_HEADER_ID_ERROR: id => `Could not find header tag associated with [data-target='${id}'].`,\n  NO_PARENT_ERROR: id => `Could not find [data-parent] associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find accordion content block with [id] ${id} associated with [data-target='${id}'].`,\n}\n\n/**\n * Accordion component class.\n * @module Accordion\n * @requires Utils\n */\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n  }\n\n  // all accordions\n  #accordionButtons = []\n  #accordionContentsAttr = \"\"\n  #accordionContents = []\n\n  // active accordion\n  #activeContainer = {}\n  #activeButton = {}\n  #activeAccordionRowId = \"\"\n  #activeRowAttr = \"\"\n  #activeRow = \"\"\n  #activeContainerId = \"\"\n  #activeContainerAttr = \"\"\n  #activeContent = {}\n  #activeButtonExpandState = \"\"\n  #activeContentHiddenState = \"\"\n\n  // public\n\n  /**\n   * Sets up accordion components and listens to buttons for events.\n   * Begin listening to [data-accordion-button] elements\n   */\n  start() {\n    this.#accordionButtons = this.getElements(\n      `[${Selectors.ACCORDION_CONTAINER}] [${Selectors.DATA_TARGET}]`,\n    )\n\n    if (this.#accordionButtons.length) {\n      this.#accordionButtons.forEach(button => {\n        this.#setupAccordion(button)\n        button.addEventListener(Events.CLICK, this.#render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to accordion button events.\n   */\n  stop() {\n    this.#accordionButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this.#render)\n    })\n  }\n\n  // private\n\n  /**\n   * Add initial attributes to accordion elements.\n   * @param {Element} button - A button element that triggers an accordion.\n   */\n  #setupAccordion(button) {\n    const buttonId = button.getAttribute(Selectors.DATA_TARGET)\n\n    if (!document.getElementById(buttonId)) {\n      return console.error(Messages.NO_CONTENT_ERROR(buttonId))\n    }\n\n    const buttonContent = document.getElementById(buttonId)\n    const accordionRowAttr = this.#getAccordionRowAttr(buttonId)\n\n    if (!document.querySelector(accordionRowAttr)) {\n      return console.error(Messages.NO_ROW_ERROR(buttonId))\n    }\n\n    const accordionRow = document.querySelector(accordionRowAttr)\n    const buttonHeaderAttr = this.#getPossibleAccordionHeaderAttrs(accordionRowAttr)\n    const buttonHeader = this.getElements(buttonHeaderAttr)[0]\n\n    if (!buttonHeader || !buttonHeader.id) {\n      console.error(Messages.NO_HEADER_ID_ERROR(buttonId))\n    }\n\n    const buttonContentChildren = this.getFocusableElements(`#${buttonContent.id}`)\n\n    button.setAttribute(Selectors.ARIA_CONTROLS, buttonId)\n    buttonContent.setAttribute(Selectors.ARIA_LABELLEDBY, buttonHeader.id)\n\n    if (!accordionRow.getAttribute(Selectors.DATA_VISIBLE)) {\n      return console.error(Messages.NO_VISIBLE_ERROR(buttonId))\n    }\n\n    const contentShouldExpand = accordionRow.getAttribute(Selectors.DATA_VISIBLE)\n    if (contentShouldExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"0\")\n      })\n    } else {\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  /**\n   * Build a selector string to be passed into querySelectorAll() / _getElements()\n   * @param {String} attr - A unique attribute.\n   * @return {String} - String of possible header selectors\n   */\n  #getPossibleAccordionHeaderAttrs(attr) {\n    return `${attr} h1, ${attr} h2, ${attr} h3, ${attr} h4, ${attr} h5, ${attr} h6`\n  }\n\n  /**\n   * Return a unique accordion row attribute selector.\n   * @param {String} id - An id value associated with a given Selectors.DATA_TARGET\n   * @return {String} - A unique accordion row selector.\n   */\n  #getAccordionRowAttr(id) {\n    return `[${Selectors.ACCORDION_ROW}='${id}']`\n  }\n\n  /**\n   * Open accordion content associated with an accordion button.\n   * @param {Object} event - The event object.\n   */\n  #render = event => {\n    event.preventDefault()\n\n    this.#activeButton = event.target\n    this.#activeAccordionRowId = this.#activeButton.getAttribute(Selectors.DATA_TARGET)\n\n    this.#activeRowAttr = this.#getAccordionRowAttr(this.#activeAccordionRowId)\n    this.#activeRow = document.querySelector(this.#activeRowAttr)\n\n    if (!this.#activeButton.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR(this.#activeAccordionRowId))\n    }\n\n    this.#activeContainerId = this.#activeButton.getAttribute(Selectors.DATA_PARENT)\n    this.#activeContainerAttr = `[${Selectors.ACCORDION_CONTAINER}='${this.#activeContainerId}']`\n\n    if (!document.querySelector(this.#activeContainerAttr)) {\n      return console.error(Messages.NO_ACCORDION_ERROR(this.#activeContainerId))\n    }\n\n    this.#activeContainer = document.querySelector(this.#activeContainerAttr)\n    this.#activeContent = document.getElementById(this.#activeAccordionRowId)\n\n    const accordionButtonState = this.#activeRow.getAttribute(Selectors.DATA_VISIBLE)\n\n    this.#activeButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this.#activeContentHiddenState = this.#activeButtonExpandState === \"false\" ? \"true\" : \"false\"\n\n    this.#closeAllIfToggleable()\n    this.#toggleSelectedAccordion()\n  }\n\n  /**\n   * If toggling multiple rows at once isn't enabled, close all rows except the selected one.\n   * This ensures the selected one can be closed if it's already open.\n   */\n  #closeAllIfToggleable() {\n    if (this.#activeContainer.hasAttribute(Selectors.DATA_TOGGLE_MULTIPLE)) return\n\n    const allContentAttr = `${this.#activeContainerAttr} [${Selectors.ARIA_HIDDEN}]`\n    const allRows = this.getElements(`${this.#activeContainerAttr} [${Selectors.DATA_VISIBLE}]`)\n    const allContent = this.getElements(allContentAttr)\n    const allButtons = this.getElements(`${this.#activeContainerAttr} [${Selectors.DATA_TARGET}]`)\n\n    allContent.forEach(content => {\n      if (!(content === this.#activeContent)) content.style.maxHeight = null\n    })\n\n    this.getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    this.#toggleAttributeInCollection(allRows, Selectors.DATA_VISIBLE, \"true\", \"false\")\n    this.#toggleAttributeInCollection(allButtons, Selectors.ARIA_EXPANDED, \"true\", \"false\")\n    this.#toggleAttributeInCollection(allContent, Selectors.ARIA_HIDDEN, \"false\", \"true\")\n  }\n\n  /**\n   * Toggle the currently selected accordion button's content.\n   */\n  #toggleSelectedAccordion() {\n    this.#activeRow.setAttribute(Selectors.DATA_VISIBLE, this.#activeButtonExpandState)\n    this.#activeButton.setAttribute(Selectors.ARIA_EXPANDED, this.#activeButtonExpandState)\n    this.#activeContent.setAttribute(Selectors.ARIA_HIDDEN, this.#activeContentHiddenState)\n\n    const activeContentBlock = `#${this.#activeAccordionRowId}`\n    this.getFocusableElements(activeContentBlock).forEach(element => {\n      const value = this.#activeButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(Selectors.TABINDEX, value)\n    })\n\n    if (this.#activeContent.style.maxHeight) {\n      this.#activeContent.style.maxHeight = null\n    } else {\n      this.#activeContent.style.maxHeight = `${this.#activeContent.scrollHeight}px`\n    }\n  }\n\n  /**\n   * Toggles a single attribute of a series of elements.\n   * @param {Array} elements - An array of elements to be operated on.\n   * @param {String} attributeName - An attribute to be changed.\n   * @param {String} currentValue - The current value of attributeName\n   * @param {String} newValue - The new value of attributeName\n   */\n  #toggleAttributeInCollection(elements, attributeName, currentValue, newValue) {\n    elements.forEach(element => {\n      if (element.hasAttribute(attributeName, currentValue)) {\n        element.setAttribute(attributeName, newValue)\n      }\n    })\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst KeyCodes = {\n  TAB: 9,\n  SHIFT: 16,\n  ESCAPE: 27,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst Selectors = {\n  // unique\n  DATA_DROPDOWN: \"data-dropdown\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  // accessibility\n  TABINDEX: \"tabindex\",\n  ARIA_HASPOPUP: \"aria-haspopup\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ROLE: \"role\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\nconst Messages = {\n  NO_PARENT_ERROR: `Could not find dropdown button's [data-parent] attribute.`,\n  NO_DROPDOWN_ERROR: attr => `Could not find dropdown container associated with ${attr}.`,\n  NO_MENU_ERROR: attr => `Could not find menu associated with ${attr}.`,\n}\n\n/**\n * Dropdown component class.\n * @module Dropdown\n * @requires Utils\n */\nexport default class Dropdown extends Utils {\n  constructor() {\n    super()\n  }\n\n  // active dropdown\n  #activeDropdownButton = null\n  #activeDropdown = null\n  #activeDropdownMenu = null\n  #activeDropdownLinks = []\n  #allowFocusReturn = true\n  #activeDropdownId = \"\"\n  #activeDropdownAttr = \"\"\n  #activeDropdownMenuId = \"\"\n\n  // all dropdowns\n  #dropdownButtons = []\n  #dropdowns = []\n\n  // dropdown element selectors\n  #dropdownTargetAttr = `[${Selectors.DATA_TARGET}]`\n\n  // public\n\n  /**\n   * Find and set up dropdown buttons and menus.\n   * Begin listening to dropdowns for events.\n   */\n  start() {\n    this.#dropdowns = this.getElements(`[${Selectors.DATA_DROPDOWN}]`)\n    this.#dropdownButtons = this.getElements(\n      `[${Selectors.DATA_DROPDOWN}] > ${this.#dropdownTargetAttr}`,\n    )\n\n    if (this.#dropdowns.length) {\n      this.#dropdowns.forEach(dropdown => this.#setupDropdown(dropdown))\n    }\n\n    this.#dropdownButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this.#render)\n      button.addEventListener(Events.KEYDOWN, this.#renderWithKeys)\n    })\n  }\n\n  /**\n   * Stop listening for dropdown events.\n   */\n  stop() {\n    this.#dropdownButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this.#render)\n      button.removeEventListener(Events.KEYDOWN, this.#renderWithKeys)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   * @param {Number} key - The key code that called #render()\n   */\n  #render = (event, key) => {\n    if (!key) event.preventDefault()\n    event.stopPropagation()\n\n    if (this.#activeDropdownButton) {\n      this.#allowFocusReturn = false\n      this.#handleClose(event)\n      this.#allowFocusReturn = true\n    }\n\n    // dropdown button / trigger\n    this.#activeDropdownButton = event.target\n\n    if (!this.#activeDropdownButton.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR)\n    }\n\n    this.#activeDropdownId = this.#activeDropdownButton.getAttribute(Selectors.DATA_PARENT)\n\n    // dropdown container\n    this.#activeDropdownAttr = `[${Selectors.DATA_DROPDOWN}=\"${this.#activeDropdownId}\"]`\n\n    if (!document.querySelector(this.#activeDropdownAttr)) {\n      return console.error(Messages.NO_DROPDOWN_ERROR(this.#activeDropdownAttr))\n    }\n\n    this.#activeDropdown = document.querySelector(this.#activeDropdownAttr)\n\n    // dropdown menu\n    this.#activeDropdownMenuId = this.#activeDropdownButton.getAttribute(Selectors.DATA_TARGET)\n    this.#activeDropdownMenu = document.getElementById(this.#activeDropdownMenuId)\n\n    // dropdown button\n    this.#activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n    this.#activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n\n    // reset button event listener to close the menu, instead of open it\n    this.#activeDropdownButton.removeEventListener(Events.CLICK, this.#render)\n    this.#activeDropdownButton.addEventListener(Events.CLICK, this.#handleClose)\n\n    document.addEventListener(Events.KEYDOWN, this.#handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this.#handleOffMenuClick)\n\n    this.#activeDropdownLinks = this.#getDropdownLinks(this.#activeDropdownAttr)\n\n    this.firstDropdownLink = this.#activeDropdownLinks[0]\n    this.lastDropdownLink = this.#activeDropdownLinks[this.#activeDropdownLinks.length - 1]\n\n    this.firstDropdownLink.addEventListener(Events.KEYDOWN, this.#handleFirstTabClose)\n    this.lastDropdownLink.addEventListener(Events.KEYDOWN, this.#handleLastTabClose)\n\n    if (key && key === KeyCodes.ARROW_UP) {\n      this.lastDropdownLink.focus()\n    } else {\n      this.firstDropdownLink.focus()\n    }\n\n    this.#activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"0\")\n      link.addEventListener(Events.CLICK, this.#handleClose)\n    })\n\n    this.captureFocus(`${this.#activeDropdownAttr} > ul`, { useArrows: true })\n  }\n\n  /**\n   * Closes the dropdown if user uses shift and tab keys on the first dropdown element.\n   * @param {Object} event - The event object\n   */\n  #handleFirstTabClose = event => {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (shiftKey && tabKey) {\n      this.#handleClose(event)\n    }\n  }\n\n  /**\n   * Closes the dropdown if user uses tab key on the last dropdown element.\n   * @param {Object} event - The event object\n   */\n  #handleLastTabClose = event => {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (tabKey && !shiftKey) {\n      this.#handleClose(event)\n    }\n  }\n\n  /**\n   * Renders dropdown if the user uses arrow up or down.\n   * @param {Object} event - The event object\n   */\n  #renderWithKeys = event => {\n    if (event.which === KeyCodes.ARROW_UP || event.which === KeyCodes.ARROW_DOWN) {\n      this.#render(event, event.which)\n    }\n  }\n\n  /**\n   * Closes currently open dropdown.\n   * @param {Object} event - The event object\n   */\n  #handleClose = event => {\n    event.preventDefault()\n\n    this.releaseFocus()\n\n    this.#activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    this.#activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n\n    this.#activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n      link.removeEventListener(Events.CLICK, this.#handleClose)\n    })\n\n    this.#activeDropdownButton.removeEventListener(Events.CLICK, this.#handleClose)\n    this.#activeDropdownButton.addEventListener(Events.CLICK, this.#render)\n\n    document.removeEventListener(Events.KEYDOWN, this.#handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this.#handleOffMenuClick)\n\n    if (this.#allowFocusReturn) {\n      this.#handleReturnFocus()\n    }\n  }\n\n  /**\n   * Use escape key to close dropdown.\n   * @param {Object} event - The event object\n   */\n  #handleEscapeKeyPress = event => {\n    if (event.which === KeyCodes.ESCAPE) {\n      this.#handleClose(event)\n    }\n  }\n\n  /**\n   * Closes dropdown\n   * @param {Object} event - The event object\n   */\n  #handleOffMenuClick = event => {\n    if (event.target !== this.#activeDropdownButton && event.target !== this.#activeDropdownMenu) {\n      this.#handleClose(event)\n    }\n  }\n\n  /**\n   * Puts focus on a the active dropdown button.\n   */\n  #handleReturnFocus() {\n    this.#activeDropdownButton.setAttribute(Selectors.TAB_INDEX, \"-1\")\n    this.#activeDropdownButton.focus()\n    this.#activeDropdownButton.removeAttribute(Selectors.TAB_INDEX)\n  }\n\n  /**\n   * Retrieve possible menu links or buttons as an array\n   * @param {String} attr - The unique attribute for a dropdown.\n   * @return {String} - Selector for possible menu item links.\n   */\n  #getDropdownLinks(attr) {\n    return this.getElements(`${attr} > ul > li > a, ${attr} > ul > li > button`)\n  }\n\n  /**\n   * Add starting attributes to a dropdown.\n   * @param {Element} dropdown - A dropdown element.\n   */\n  #setupDropdown(dropdown) {\n    const dropdownId = dropdown.getAttribute(Selectors.DATA_DROPDOWN)\n    const dropdownIdAttr = `[${Selectors.DATA_DROPDOWN}=\"${dropdownId}\"]`\n    const dropdownMenuItemsAttr = `${dropdownIdAttr} > ul > li`\n\n    if (!document.querySelector(`${dropdownIdAttr} > ul`)) {\n      return console.error(Messages.NO_MENU_ERROR(dropdownIdAttr))\n    }\n\n    const dropdownMenu = document.querySelector(`${dropdownIdAttr} > ul`)\n    const dropdownButton = document.querySelector(`${dropdownIdAttr} > ${this.#dropdownTargetAttr}`)\n\n    dropdownButton.setAttribute(Selectors.ARIA_CONTROLS, dropdownMenu.id)\n    dropdownButton.setAttribute(Selectors.ARIA_HASPOPUP, \"true\")\n    dropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    dropdownMenu.setAttribute(Selectors.ARIA_LABELLEDBY, dropdownButton.id)\n\n    const dropdownMenuItems = this.getElements(dropdownMenuItemsAttr)\n    dropdownMenuItems.forEach(item => item.setAttribute(Selectors.ROLE, \"none\"))\n\n    this.#getDropdownLinks(dropdownIdAttr).forEach(link => {\n      link.setAttribute(Selectors.ROLE, \"menuitem\")\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n  }\n}\n","\"use strict\"\n\nimport _Modals from \"./components/modal\"\nimport _Accordion from \"./components/accordion\"\nimport _Dropdown from \"./components/dropdown\"\nimport _Utils from \"./utils\"\n\nexport const Modals = new _Modals()\nexport const Accordions = new _Accordion()\nexport const Dropdowns = new _Dropdown()\nexport const Utils = new _Utils()\n\nconst Undernet = {\n  // Components\n  Modals,\n  Accordions,\n  Dropdowns,\n\n  // Utils\n  Utils,\n}\n\nUndernet.start = () => {\n  // Components\n  Undernet.Modals.start()\n  Undernet.Accordions.start()\n  Undernet.Dropdowns.start()\n\n  // Utils\n  Undernet.Utils.enableFocusOutline()\n}\n\nUndernet.stop = () => {\n  // Components\n  Undernet.Modals.stop()\n  Undernet.Accordions.stop()\n  Undernet.Dropdowns.stop()\n\n  // Utils\n  Undernet.Utils.disableFocusOutline()\n}\n\nexport default Undernet\n","export { default } from \"./index\"\n\nexport { Modals, Accordions, Dropdowns, Utils } from \"./index\"\n\nwindow.Undernet = Undernet\n"],"names":["KeyCodes","SHIFT","TAB","ARROW_UP","ARROW_DOWN","Selectors","NOT_VISUALLY_HIDDEN","FOCUSABLE_TAGS","KEYBOARD_CLASS","Events","KEYDOWN","CLICK","Utils","event","tabKey","which","shiftKey","arrowUp","arrowDown","document","body","classList","add","removeEventListener","addEventListener","remove","containerElement","querySelector","containerActive","activeElement","firstActive","lastActive","preventDefault","focus","container","options","getFocusableElements","length","useArrows","element","nodeList","querySelectorAll","Array","apply","focusables","map","getElements","join","i","ESCAPE","MODAL_CONTAINER","MODAL_ID","MODAL_BUTTON","NO_SCROLL","DATA_VISIBLE","DATA_CLOSE","DATA_TARGET","DATA_PARENT","ARIA_HIDDEN","ARIA_MODAL","ROLE","TABINDEX","RESIZE","Messages","NO_TARGET_ERROR","NO_PARENT_ERROR","NO_ID_ERROR","id","Modal","target","getAttribute","console","error","forEach","setAttribute","captureFocus","scrollTop","button","releaseFocus","removeAttribute","modal","modalId","modalWrapper","ACCORDION_CONTAINER","ACCORDION_ROW","DATA_TOGGLE_MULTIPLE","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_LABELLEDBY","NO_VISIBLE_ERROR","NO_ROW_ERROR","NO_HEADER_ID_ERROR","NO_CONTENT_ERROR","Accordion","NO_ACCORDION_ERROR","getElementById","accordionButtonState","buttonId","buttonContent","accordionRowAttr","accordionRow","buttonHeaderAttr","buttonHeader","buttonContentChildren","contentShouldExpand","style","maxHeight","scrollHeight","attr","hasAttribute","allContentAttr","allRows","allContent","allButtons","content","activeContentBlock","value","elements","attributeName","currentValue","newValue","DATA_DROPDOWN","ARIA_HASPOPUP","NO_DROPDOWN_ERROR","NO_MENU_ERROR","Dropdown","key","stopPropagation","firstDropdownLink","lastDropdownLink","link","dropdown","TAB_INDEX","dropdownId","dropdownIdAttr","dropdownMenuItemsAttr","dropdownMenu","dropdownButton","dropdownMenuItems","item","Modals","_Modals","Accordions","_Accordion","Dropdowns","_Dropdown","_Utils","Undernet","start","enableFocusOutline","stop","disableFocusOutline","window"],"mappings":"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"}