{"version":3,"file":"undernet.bundle.js","sources":["../js/src/utils.js","../js/src/components/modal.js","../js/src/components/accordion.js","../js/src/undernet.js"],"sourcesContent":["\"use strict\"\n\nconst keyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n}\n\nconst selectors = {\n  FOCUSABLE_SELECTOR: \":not(.is-visually-hidden)\",\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n}\n\nconst events = {\n  KEYDOWN: \"keydown\",\n}\n\n/**\n * Utility methods for DOM traversal and focus trapping.\n * @module Utils\n */\nexport default class Utils {\n  constructor() {\n    // bind events to Utils\n    this.handleFocusTrap = this.handleFocusTrap.bind(this)\n  }\n\n  /**\n   * Because IE does not recognize NodeList.forEach(), we use a cross-browser solution for returning an array of DOM nodes.\n   * @param {String} element - A DOM node's class, attribute, etc., to search the document.\n   * @return {Array}\n   */\n  getElements(element) {\n    const nodeList = document.querySelectorAll(element)\n    return Array.apply(null, nodeList)\n  }\n\n  /**\n   * Creates a string of element selector patterns using common elements.\n   * @param {String} container - The enclosing container's class, attribute, etc.\n   * @return {String}\n   */\n  getFocusableElements(container) {\n    let focusables = []\n    selectors.FOCUSABLE_TAGS.map(element =>\n      focusables.push(`${container} ${element}${selectors.FOCUSABLE_SELECTOR}`),\n    )\n    return this.getElements(focusables.join(\", \"))\n  }\n\n  /**\n   * Listens to the first and last elements matched from this.getFocusableElements()\n   * @param {String} container - The container's class, attribute, etc.\n   */\n  captureFocus(container) {\n    this.focusContainer = container\n    const children = this.getFocusableElements(this.focusContainer)\n    this.focusableFirstChild = children[0]\n    this.focusableLastChild = children[children.length - 1]\n\n    document.addEventListener(events.KEYDOWN, this.handleFocusTrap)\n  }\n\n  /**\n   * Handles focus on first or last child in a container.\n   * @param {Object} event - Event (keypress)\n   */\n  handleFocusTrap(event) {\n    const active = document.activeElement\n    const containerElement = document.querySelector(this.focusContainer)\n    const containerActive = active === containerElement\n    const firstActive = active === this.focusableFirstChild\n    const lastActive = active === this.focusableLastChild\n    const tabKey = event.which === keyCodes.TAB\n    const shiftKey = event.which === keyCodes.SHIFT || event.shiftKey\n    const hasShift = shiftKey && tabKey\n    const noShift = !shiftKey && tabKey\n\n    // Just in case the first or last child have changed -\n    // recapture focus and continue trapping.\n    this.releaseFocus()\n    this.captureFocus(this.focusContainer)\n\n    if (hasShift && (firstActive || containerActive)) {\n      event.preventDefault()\n      this.focusableLastChild.focus()\n    } else if (noShift && lastActive) {\n      event.preventDefault()\n      this.focusableFirstChild.focus()\n    }\n  }\n\n  /**\n   * Stop trapping focus set in this.captureFocus()\n   */\n  releaseFocus() {\n    document.removeEventListener(events.KEYDOWN, this.handleFocusTrap)\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst keyCodes = {\n  ESCAPE: 27,\n}\n\nconst selectors = {\n  // unique\n  MODAL_CONTAINER: \"data-modal\",\n  MODAL_ID: \"data-modal-id\",\n  MODAL_BUTTON: \"data-modal-button\",\n  NO_SCROLL: \"no-scroll\",\n  // common\n  VISIBLE: \"data-visible\",\n  CLOSE: \"data-close\",\n  TARGET: \"data-target\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TAB_INDEX: \"tabindex\",\n}\n\nconst events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n}\n\nconst messages = {\n  MISSING_MODAL:\n    \"Your button is missing its corresponding modal. Check to make sure your modal is in the DOM, and that it has a [data-modal-id=*] attribute matchin its [data-modal-button] and [data-target] attributes. It's possible the modal script ran before the button appeared on the page!\",\n}\n\n/**\n * Modal component class.\n * @module Modal\n * @requires Utils\n */\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n    this.modalContainerAttr = `[${selectors.MODAL_CONTAINER}]`\n    this.closeButtonAttr = `[${selectors.MODAL_CONTAINER}] [${selectors.CLOSE}]`\n    this.modals = null\n    this.modalButtons = null\n    this.closeButtons = null\n    this.bodyTag = document.body\n    this.htmlTag = document.querySelector(\"html\")\n\n    // bind events to class\n    this.getModal = this.getModal.bind(this)\n    this.handleModalClose = this.handleModalClose.bind(this)\n    this.handleEscapeKeyPress = this.handleEscapeKeyPress.bind(this)\n    this.handleOverlayClick = this.handleOverlayClick.bind(this)\n  }\n\n  /**\n   * Add accessible attributes to modal containers\n   * Begin listening to elements with [data-modal-button]\n   */\n  start() {\n    this.modals = this.getElements(this.modalContainerAttr)\n    this.modalButtons = this.getElements(`[${selectors.MODAL_BUTTON}]`)\n    this.closeButtons = this.getElements(this.closeButtonAttr)\n\n    this.getFocusableElements(this.modalContainerAttr).forEach(element => {\n      element.setAttribute(selectors.TAB_INDEX, \"-1\")\n    })\n\n    if (this.modals.length) {\n      this.modals.forEach(modal => {\n        modal.setAttribute(selectors.ARIA_MODAL, \"true\")\n        modal.parentNode.setAttribute(selectors.ARIA_HIDDEN, \"true\")\n        modal.parentNode.setAttribute(selectors.VISIBLE, \"false\")\n        modal.setAttribute(selectors.ROLE, \"dialog\")\n      })\n    }\n\n    if (this.modalButtons.length) {\n      this.modalButtons.forEach(button => {\n        button.addEventListener(events.CLICK, this.getModal)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to modal buttons\n   */\n  stop() {\n    this.modalButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this.getModal)\n    })\n  }\n\n  /**\n   * Locate a button's corresponding modal container.\n   * @param {Object} event - The event object\n   */\n  getModal(event) {\n    event.preventDefault()\n    this.renderModal(event)\n  }\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   */\n  renderModal(event) {\n    this.modalButton = event.target\n    this.activeModalId = this.modalButton.getAttribute(selectors.TARGET)\n    this.activeModalOverlayAttr = `[${selectors.MODAL_ID}='${this.activeModalId}']`\n    this.activeModalOverlay = document.querySelector(this.activeModalOverlayAttr)\n\n    if (!this.activeModalOverlay) {\n      throw messages.MISSING_MODAL\n      return\n    }\n\n    this.activeModalSelector = `${this.activeModalOverlayAttr} ${this.modalContainerAttr}`\n    this.activeModal = document.querySelector(this.activeModalSelector)\n    this.modalCloseButtons = this.getElements(\n      `${this.activeModalOverlayAttr} ${this.closeButtonAttr}`,\n    )\n\n    this.getFocusableElements(this.activeModalSelector).forEach(element => {\n      console.log(element)\n      element.setAttribute(selectors.TAB_INDEX, \"0\")\n    })\n\n    this.handleScrollStop()\n    this.captureFocus(this.activeModalSelector)\n    this.activeModalOverlay.setAttribute(selectors.ARIA_HIDDEN, \"false\")\n    this.activeModal.setAttribute(\"tabindex\", \"-1\")\n    this.activeModalOverlay.setAttribute(selectors.VISIBLE, \"true\")\n    this.activeModal.focus()\n\n    // offset slight scroll caused by this.activeModal.focus()\n    this.activeModalOverlay.scrollTop = 0\n\n    // begin listening to events\n    document.addEventListener(events.KEYDOWN, this.handleEscapeKeyPress)\n    document.addEventListener(events.CLICK, this.handleOverlayClick)\n    this.modalCloseButtons.forEach(button => {\n      button.addEventListener(events.CLICK, this.handleModalClose)\n    })\n  }\n\n  /**\n   * Turn off event listeners and reset focus to last selected DOM node (button)\n   * @param {Object} event - Event (keydown or click)\n   */\n  handleModalClose(event) {\n    event.preventDefault()\n    this.activeModalOverlay.setAttribute(selectors.VISIBLE, \"false\")\n    this.handleReturnFocus()\n    this.handleScrollRestore()\n    this.releaseFocus()\n    this.activeModalOverlay.setAttribute(selectors.ARIA_HIDDEN, \"true\")\n    this.activeModal.removeAttribute(\"tabindex\")\n\n    this.getFocusableElements(this.activeModalSelector).forEach(element => {\n      console.log(element)\n      element.setAttribute(selectors.TAB_INDEX, \"-1\")\n    })\n\n    // stop listening to events\n    document.removeEventListener(events.KEYDOWN, this.handleEscapeKeyPress)\n    document.removeEventListener(events.CLICK, this.handleOverlayClick)\n    this.modalCloseButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this.handleModalClose)\n    })\n  }\n\n  /**\n   * Handles click event on the modal background to close it.\n   * @param {Object} event - Event (keydown)\n   */\n  handleOverlayClick(event) {\n    if (event.target !== this.activeModalOverlay) return\n    this.handleModalClose(event)\n  }\n\n  /**\n   * Handles escape key event to close the current modal\n   * @param {Object} event - Event (keydown)\n   */\n  handleEscapeKeyPress(event) {\n    const escapeKey = event.which === keyCodes.ESCAPE\n    if (escapeKey) {\n      this.handleModalClose(event)\n    }\n  }\n\n  /**\n   * Returns focus to the last focused element before the modal was called.\n   * @param {Object} button - The current modal's corresponding button.\n   */\n  handleReturnFocus() {\n    this.modalButton.setAttribute(\"tabindex\", \"-1\")\n    this.modalButton.focus()\n    this.modalButton.removeAttribute(\"tabindex\")\n  }\n\n  /**\n   * Restores scroll behavior to <html> and <body>\n   */\n  handleScrollRestore() {\n    this.bodyTag.classList.remove(selectors.NO_SCROLL)\n    this.htmlTag.classList.remove(selectors.NO_SCROLL)\n  }\n\n  /**\n   * Prevents scroll behavior on <html> and <body>\n   */\n  handleScrollStop() {\n    this.bodyTag.classList.add(selectors.NO_SCROLL)\n    this.htmlTag.classList.add(selectors.NO_SCROLL)\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst keyCodes = {\n  SPACE: 32,\n}\n\nconst selectors = {\n  // unique\n  ACCORDION_CONTAINER: \"data-accordion\",\n  ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  EXPANDED: \"data-expanded\",\n  TARGET: \"data-target\",\n  CONTENT: \"data-content\",\n  TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  TAB_INDEX: \"tabindex\",\n}\n\nconst events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst messages = {\n  MISSING_CONTENT:\n    \"You have an accordion button that is missing its [data-content] attribute, and has a matching id to the button's [data-target] attribute's value.\",\n}\n\n/**\n * Accordion component class.\n * @module Accordion\n * @requires Utils\n */\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n    this.accordionButtons = null\n    this.accordionContents = null\n    this.activeContainer = null\n\n    // bind events to class\n    this.renderAccordionContent = this.renderAccordionContent.bind(this)\n    this.handleSpaceKeyPress = this.handleSpaceKeyPress.bind(this)\n  }\n\n  /**\n   * Add accessible attributes [data-accordion-button] and [data-accordion-content] elements\n   * Begin listening to [data-accordion-button] elements\n   */\n  start() {\n    this.accordionButtons = this.getElements(\n      `[${selectors.ACCORDION_CONTAINER}] [${selectors.TARGET}]`,\n    )\n\n    this.accordionContentsAttr = `[${selectors.ACCORDION_CONTAINER}] [${selectors.CONTENT}]`\n    this.accordionContents = this.getElements(this.accordionContentsAttr)\n\n    this.getFocusableElements(`[${selectors.ACCORDION_CONTAINER}] [${selectors.CONTENT}]`).forEach(\n      element => {\n        element.setAttribute(selectors.TAB_INDEX, \"-1\")\n      },\n    )\n\n    if (this.accordionButtons.length) {\n      this.accordionButtons.forEach(button => {\n        this.setupButton(button)\n        button.addEventListener(events.CLICK, this.renderAccordionContent)\n        button.addEventListener(events.KEYDOWN, this.handleSpaceKeyPress)\n      })\n    }\n\n    if (this.accordionContents.length) {\n      this.accordionContents.forEach(content => {\n        const contentRowAttr = this.getAccordionRowAttr(content.id)\n        const contentRow = document.querySelector(contentRowAttr)\n        const contentHiddenState = contentRow.getAttribute(selectors.EXPANDED)\n        const toggleContentHiddenState = contentHiddenState === \"true\" ? \"false\" : \"true\"\n        content.setAttribute(selectors.ARIA_HIDDEN, toggleContentHiddenState)\n\n        if (toggleContentHiddenState === \"false\") {\n          this.getFocusableElements(`#${content.id}`).forEach(element => {\n            element.setAttribute(selectors.TAB_INDEX, \"0\")\n          })\n        }\n      })\n    }\n  }\n\n  /**\n   * Stop listening to accordion buttons.\n   */\n  stop() {\n    this.accordionButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this.renderAccordionContent)\n      button.removeEventListener(events.KEYDOWN, this.handleSpaceKeyPress)\n    })\n  }\n\n  setupButton(button) {\n    const buttonId = button.getAttribute(selectors.TARGET)\n    const accordionRowAttr = this.getAccordionRowAttr(buttonId)\n    const accordionRow = document.querySelector(accordionRowAttr)\n    const shouldContentExpand = accordionRow.getAttribute(selectors.EXPANDED)\n    const buttonContent = document.getElementById(buttonId)\n\n    button.setAttribute(selectors.ARIA_CONTROLS, buttonId)\n\n    if (shouldContentExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(selectors.ARIA_EXPANDED, \"true\")\n    } else {\n      button.setAttribute(selectors.ARIA_EXPANDED, \"false\")\n    }\n  }\n\n  /**\n   * Return a selector that targets `selectors.ACCORDION_ROW` with value of the id.\n   * @param {String} id - An id value associated with a given selectors.TARGET\n   * @return {String}\n   */\n  getAccordionRowAttr(id) {\n    return `[${selectors.ACCORDION_ROW}='${id}']`\n  }\n\n  /**\n   * Open accordion content associated with a [data-accordion-button] element.\n   * @param {Object} event - The event object.\n   */\n  renderAccordionContent(event) {\n    event.preventDefault()\n\n    this.activeButton = event.target\n    this.activeAccordionRowId = this.activeButton.getAttribute(selectors.TARGET)\n\n    this.activeRowAttr = this.getAccordionRowAttr(this.activeAccordionRowId)\n    this.activeRow = document.querySelector(this.activeRowAttr)\n    this.activeContainerId = this.activeButton.getAttribute(selectors.PARENT)\n    this.activeContainerAttr = `[${selectors.ACCORDION_CONTAINER}='${this.activeContainerId}']`\n    this.activeContainer = document.querySelector(this.activeContainerAttr)\n\n    this.activeContent = document.getElementById(this.activeAccordionRowId)\n\n    const accordionContentHasAttr = this.activeContent.hasAttribute(selectors.CONTENT)\n    if (!accordionContentHasAttr) {\n      throw messages.MISSING_CONTENT\n      return\n    }\n\n    const accordionButtonState = this.activeRow.getAttribute(selectors.EXPANDED)\n    const accordionContentState = this.activeContent.getAttribute(selectors.CONTENT)\n\n    this.toggleExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this.toggleContentState = accordionContentState === \"visible\" ? \"hidden\" : \"visible\"\n    this.toggleHiddenState = this.toggleExpandState === \"false\" ? \"true\" : \"false\"\n\n    this.closeAllIfToggleable()\n    this.toggleSelectedAccordion()\n  }\n\n  /**\n   * If a keypress is the spacebar on a button, open its correlated content.\n   * @param {Object} event - The event object.\n   */\n  handleSpaceKeyPress(event) {\n    if (event.which === keyCodes.SPACE) this.renderAccordionContent(event)\n  }\n\n  /**\n   * If toggling multiple rows at once isn't enabled, close all rows except the selected one.\n   * This ensures the selected one can be closed if it's already open.\n   */\n  closeAllIfToggleable() {\n    if (this.activeContainer.hasAttribute(selectors.TOGGLE_MULTIPLE)) return\n    this.allContentAttr = `${this.activeContainerAttr} [${selectors.CONTENT}]`\n    const allRows = this.getElements(`${this.activeContainerAttr} [${selectors.EXPANDED}]`)\n    const allContent = this.getElements(this.allContentAttr)\n    const allButtons = this.getElements(`${this.activeContainerAttr} [${selectors.TARGET}]`)\n\n    allContent.forEach(content => {\n      if (!(content === this.activeContent)) content.style.maxHeight = null\n    })\n\n    this.getFocusableElements(this.allContentAttr).forEach(element => {\n      element.setAttribute(selectors.TAB_INDEX, \"-1\")\n    })\n\n    this.toggleAttributeInCollection(allRows, selectors.EXPANDED, \"true\", \"false\")\n    this.toggleAttributeInCollection(allButtons, selectors.ARIA_EXPANDED, \"true\", \"false\")\n    this.toggleAttributeInCollection(allContent, selectors.ARIA_HIDDEN, \"false\", \"true\")\n    this.toggleAttributeInCollection(allContent, selectors.CONTENT, \"visible\", \"hidden\")\n  }\n\n  /**\n   * Toggle a [data-accordion-button]'s corresponding [data-accordion-content] element.\n   */\n  toggleSelectedAccordion() {\n    this.activeRow.setAttribute(selectors.EXPANDED, this.toggleExpandState)\n    this.activeContent.setAttribute(selectors.CONTENT, this.toggleContentState)\n    this.activeButton.setAttribute(selectors.ARIA_EXPANDED, this.toggleExpandState)\n    this.activeContent.setAttribute(selectors.ARIA_HIDDEN, this.toggleHiddenState)\n\n    const activeContentBlock = `#${this.activeAccordionRowId}`\n    this.getFocusableElements(activeContentBlock).forEach(element => {\n      const value = this.toggleExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(selectors.TAB_INDEX, value)\n    })\n\n    if (this.activeContent.style.maxHeight) {\n      this.activeContent.style.maxHeight = null\n    } else {\n      this.activeContent.style.maxHeight = `${this.activeContent.scrollHeight}px`\n    }\n  }\n\n  /**\n   * Toggles a single attribute of a series of elements within a parent.\n   */\n  toggleAttributeInCollection(elements, attributeName, currentValue, newValue) {\n    elements.forEach(element => {\n      if (element.hasAttribute(attributeName, currentValue)) {\n        element.setAttribute(attributeName, newValue)\n      }\n    })\n  }\n}\n","\"use strict\"\n\nimport Modal from \"./components/modal\"\nimport Accordion from \"./components/accordion\"\nimport Utils from \"./utils\"\n\nconst Modals = new Modal()\nconst Accordions = new Accordion()\nconst Utilities = new Utils()\n\nconst Undernet = {\n  Modals,\n  Accordions,\n  Utilities,\n}\n\nUndernet.start = () => {\n  Undernet.Modals.start()\n  Undernet.Accordions.start()\n}\n\nUndernet.stop = () => {\n  Undernet.Modals.stop()\n  Undernet.Accordions.stop()\n}\n\nwindow.Undernet = Undernet\nexport default Undernet\n"],"names":["keyCodes","SHIFT","TAB","selectors","FOCUSABLE_SELECTOR","FOCUSABLE_TAGS","events","KEYDOWN","Utils","handleFocusTrap","bind","element","nodeList","document","querySelectorAll","Array","apply","container","focusables","map","push","getElements","join","focusContainer","children","getFocusableElements","focusableFirstChild","focusableLastChild","length","addEventListener","event","active","activeElement","containerElement","querySelector","containerActive","firstActive","lastActive","tabKey","which","shiftKey","hasShift","noShift","releaseFocus","captureFocus","preventDefault","focus","removeEventListener","ESCAPE","MODAL_CONTAINER","MODAL_ID","MODAL_BUTTON","NO_SCROLL","VISIBLE","CLOSE","TARGET","ARIA_HIDDEN","ARIA_MODAL","ROLE","TAB_INDEX","CLICK","RESIZE","messages","MISSING_MODAL","Modal","modalContainerAttr","closeButtonAttr","modals","modalButtons","closeButtons","bodyTag","body","htmlTag","getModal","handleModalClose","handleEscapeKeyPress","handleOverlayClick","forEach","setAttribute","modal","parentNode","button","renderModal","modalButton","target","activeModalId","getAttribute","activeModalOverlayAttr","activeModalOverlay","activeModalSelector","activeModal","modalCloseButtons","console","log","handleScrollStop","scrollTop","handleReturnFocus","handleScrollRestore","removeAttribute","escapeKey","classList","remove","add","SPACE","ACCORDION_CONTAINER","ACCORDION_ROW","EXPANDED","CONTENT","TOGGLE_MULTIPLE","PARENT","ARIA_EXPANDED","ARIA_CONTROLS","MISSING_CONTENT","Accordion","accordionButtons","accordionContents","activeContainer","renderAccordionContent","handleSpaceKeyPress","accordionContentsAttr","setupButton","content","contentRowAttr","getAccordionRowAttr","id","contentRow","contentHiddenState","toggleContentHiddenState","buttonId","accordionRowAttr","accordionRow","shouldContentExpand","buttonContent","getElementById","style","maxHeight","scrollHeight","activeButton","activeAccordionRowId","activeRowAttr","activeRow","activeContainerId","activeContainerAttr","activeContent","accordionContentHasAttr","hasAttribute","accordionButtonState","accordionContentState","toggleExpandState","toggleContentState","toggleHiddenState","closeAllIfToggleable","toggleSelectedAccordion","allContentAttr","allRows","allContent","allButtons","toggleAttributeInCollection","activeContentBlock","value","elements","attributeName","currentValue","newValue","Modals","Accordions","Utilities","Undernet","start","stop","window"],"mappings":"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"}