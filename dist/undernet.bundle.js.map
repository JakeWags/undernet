{"version":3,"file":"undernet.bundle.js","sources":["../js/src/utils.js","../js/src/accordion.js","../js/src/dropdown.js","../js/src/modal.js","../js/src/tooltip.js","../js/src/index.js","../js/src/index.bundle.js"],"sourcesContent":["const KeyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst Selectors = {\n  NOT_VISUALLY_HIDDEN: \":not(.is-visually-hidden)\",\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n  KEYBOARD_CLASS: \"using-keyboard\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\n/**\n * Creates a string of element selector patterns using common elements.\n * @param {String} container - The enclosing container's class, attribute, etc.\n * @return {String}\n */\nexport const nodeListToArray = nodeList => {\n  return Array.apply(null, document.querySelectorAll(nodeList))\n}\n\n/**\n * Creates a string of element selector patterns using common elements.\n * @param {String} container - The enclosing container's class, attribute, etc.\n * @return {Array}\n */\nexport const getFocusableElements = container => {\n  const focusables = Selectors.FOCUSABLE_TAGS.map(\n    element => `${container} ${element}${Selectors.NOT_VISUALLY_HIDDEN}`\n  ).join(\", \")\n\n  return nodeListToArray(focusables)\n}\n\n/**\n * Detects if the browser being used is on an iphone, ipad, or ipod.\n * @return {Boolean}\n */\nexport const iOSMobile = /(iphone|ipod|ipad)/i.test(navigator.userAgent)\n\n/**\n * Utility methods for DOM traversal and focus trapping.\n * @module Utils\n */\nexport default class Utils {\n  constructor() {\n    // events\n    this._listenForKeyboard = this._listenForKeyboard.bind(this)\n    this._listenForClick = this._listenForClick.bind(this)\n    this._handleFocusTrapWithTab = this._handleFocusTrapWithTab.bind(this)\n    this._handleFocusTrapWithArrows = this._handleFocusTrapWithArrows.bind(this)\n\n    this._focusContainerSelector = \"\"\n    this._focusableChildren = []\n    this._focusableFirstChild = {}\n    this._focusableLastChild = {}\n    this._listeningForKeydown = false\n    this._trapFocusWithArrows = false\n  }\n\n  // public\n\n  /**\n   * Listens to the first and last elements matched from this.getFocusableElements()\n   * @param {String} container - The container's class, attribute, etc.\n   * @param {Object} options - Optional has hof options.\n   */\n  captureFocus(container, options) {\n    this._focusContainerSelector = container\n    this._focusableChildren = getFocusableElements(this._focusContainerSelector)\n    this._focusableFirstChild = this._focusableChildren[0]\n    this._focusableLastChild = this._focusableChildren[this._focusableChildren.length - 1]\n\n    if (options) {\n      if (options.useArrows) {\n        this._trapFocusWithArrows = options.useArrows || this._trapFocusWithArrows\n        document.addEventListener(Events.KEYDOWN, this._handleFocusTrapWithArrows)\n      }\n    } else {\n      document.addEventListener(Events.KEYDOWN, this._handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Stop trapping focus set in this.captureFocus()\n   */\n  releaseFocus() {\n    if (this._trapFocusWithArrows) {\n      document.removeEventListener(Events.KEYDOWN, this._handleFocusTrapWithArrows)\n      this._trapFocusWithArrows = false\n    } else {\n      document.removeEventListener(Events.KEYDOWN, this._handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Begin listening to _listenForKeyboard()\n   */\n  enableFocusOutline() {\n    document.addEventListener(Events.KEYDOWN, this._listenForKeyboard)\n  }\n\n  /**\n   * Completely disable focus outline utility.\n   */\n  disableFocusOutline() {\n    if (this._listeningForKeydown) {\n      document.removeEventListener(Events.KEYDOWN, this._listenForKeyboard)\n    } else {\n      document.removeEventListener(Events.CLICK, this._listenForClick)\n    }\n  }\n\n  // private\n\n  /**\n   * When a key is pressed, detect if it's tab or shift keys and enable\n   * focus outlines on currently focused element(s). Then, remove keydown listener\n   * and add click listener on _listenForClick().\n   * @param {Object} event - Event (keypress).\n   */\n  _listenForKeyboard(event) {\n    document.body.classList.add(Selectors.KEYBOARD_CLASS)\n    document.removeEventListener(Events.KEYDOWN, this._listenForKeyboard)\n    document.addEventListener(Events.CLICK, this._listenForClick)\n    this._listeningForKeydown = false\n  }\n\n  /**\n   * On click, remove Selectors.KEYBOARD_CLASS and re-add keydown listener.\n   * @param {Object} event - Event (keypress).\n   */\n  _listenForClick(event) {\n    document.body.classList.remove(Selectors.KEYBOARD_CLASS)\n    document.removeEventListener(Events.CLICK, this._listenForClick)\n    document.addEventListener(Events.KEYDOWN, this._listenForKeyboard)\n    this._listeningForKeydown = true\n  }\n\n  /**\n   * Handles focus on first or last child in a container, using tab and tab+shift keys.\n   * @param {Object} event - Event (keypress)\n   */\n  _handleFocusTrapWithTab(event) {\n    const containerElement = document.querySelector(this._focusContainerSelector)\n    const containerActive = document.activeElement === containerElement\n    const firstActive = document.activeElement === this._focusableFirstChild\n    const lastActive = document.activeElement === this._focusableLastChild\n    const tabKey = event.which === KeyCodes.TAB\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const hasShift = shiftKey && tabKey\n    const noShift = !shiftKey && tabKey\n\n    if (shiftKey && tabKey && (firstActive || containerActive)) {\n      event.preventDefault()\n      this._focusableLastChild.focus()\n    } else if (!shiftKey && tabKey && lastActive) {\n      event.preventDefault()\n      this._focusableFirstChild.focus()\n    }\n  }\n\n  /**\n   * Handles focus on the first, last, next, or previous child in a container, using up and down arrow keys.\n   * @param {Object} event - Event (keypress)\n   */\n  _handleFocusTrapWithArrows(event) {\n    const firstActive = document.activeElement === this._focusableFirstChild\n    const lastActive = document.activeElement === this._focusableLastChild\n    const arrowUp = event.which === KeyCodes.ARROW_UP\n    const arrowDown = event.which === KeyCodes.ARROW_DOWN\n\n    if (arrowUp || arrowDown) {\n      event.preventDefault()\n\n      if (firstActive && arrowUp) {\n        this._focusableLastChild.focus()\n      } else if (lastActive && arrowDown) {\n        this._focusableFirstChild.focus()\n      } else if (arrowDown) {\n        this._focusNextChild()\n      } else if (arrowUp) {\n        this._focusLastChild()\n      }\n    }\n  }\n\n  /**\n   * Focus the next child in this._focusableChildren.\n   */\n  _focusNextChild() {\n    for (let i = 0; i < this._focusableChildren.length; i++) {\n      if (this._focusableChildren[i] === document.activeElement) {\n        this._focusableChildren[i + 1].focus()\n        break\n      }\n    }\n  }\n\n  /**\n   * Focus the previous child in this._focusableChildren.\n   */\n  _focusLastChild() {\n    for (let i = 0; i < this._focusableChildren.length; i++) {\n      if (this._focusableChildren[i] === document.activeElement) {\n        this._focusableChildren[i - 1].focus()\n        break\n      }\n    }\n  }\n}\n","import Utils, { getFocusableElements, nodeListToArray } from \"./utils\"\n\nconst Selectors = {\n  // unique\n  DATA_ACCORDION: \"data-accordion\",\n  DATA_ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst Messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find parent with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with ${id}.`,\n  NO_HEADER_ID_ERROR: id => `Could not find header tag associated with [data-target='${id}'].`,\n  NO_PARENT_ERROR: id => `Could not find [data-parent] associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find accordion content block with [id] ${id} associated with [data-target='${id}'].`,\n}\n\n/**\n * Accordion component class.\n * @module Accordion\n * @requires Utils\n */\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n\n    // all accordions\n    this._accordionButtons = []\n    this._accordionContentsAttr = \"\"\n    this._accordionContents = []\n\n    // active accordion\n    this._activeContainer = {}\n    this._activeButton = {}\n    this._activeAccordionRowId = \"\"\n    this._activeRowAttr = \"\"\n    this._activeRow = \"\"\n    this._activeContainerId = \"\"\n    this._activeContainerAttr = \"\"\n    this._activeContent = {}\n    this._activeButtonExpandState = \"\"\n    this._activeContentHiddenState = \"\"\n\n    // other data\n    this._headerLevels = [1, 2, 3, 4, 5, 6]\n  }\n\n  // public\n\n  /**\n   * Begin listening to accordions.\n   */\n  start() {\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttrs(\n      `[${Selectors.DATA_ACCORDION}]`\n    )\n    this._accordionButtons = nodeListToArray(accordionButtonSelector)\n\n    if (this._accordionButtons.length) {\n      this._accordionButtons.forEach(button => {\n        this._setupAccordion(button)\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to accordions.\n   */\n  stop() {\n    this._accordionButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  /**\n   * Open accordion content associated with an accordion button.\n   * @param {Object} event - The event object\n   */\n  _render(event) {\n    event.preventDefault()\n\n    this._activeButton = event.target\n    this._activeAccordionRowId = this._activeButton.getAttribute(Selectors.DATA_TARGET)\n\n    this._activeRowAttr = this._getAccordionRowAttr(this._activeAccordionRowId)\n    this._activeRow = document.querySelector(this._activeRowAttr)\n    this._activeContainerId = this._activeButton.getAttribute(Selectors.DATA_PARENT)\n\n    if (!this._activeContainerId) {\n      return console.error(Messages.NO_PARENT_ERROR(this._activeAccordionRowId))\n    }\n\n    this._activeContainerAttr = `[${Selectors.DATA_ACCORDION}='${this._activeContainerId}']`\n    this._activeContainer = document.querySelector(this._activeContainerAttr)\n\n    if (!this._activeContainer) {\n      return console.error(Messages.NO_ACCORDION_ERROR(this._activeContainerId))\n    }\n\n    this._activeContent = document.getElementById(this._activeAccordionRowId)\n\n    const accordionButtonState = this._activeRow.getAttribute(Selectors.DATA_VISIBLE)\n\n    this._activeButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this._activeContentHiddenState = this._activeButtonExpandState === \"false\" ? \"true\" : \"false\"\n\n    this._closeAllIfToggleable()\n    this._toggleSelectedAccordion()\n\n    this._activeContainerId = null\n    this._activeContainer = null\n  }\n\n  /**\n   * Add initial attributes to accordion elements.\n   * @param {Element} button - A button element that triggers an accordion.\n   */\n  _setupAccordion(button) {\n    const buttonId = button.getAttribute(Selectors.DATA_TARGET)\n    const buttonContent = document.getElementById(buttonId)\n\n    if (!buttonContent) {\n      return console.error(Messages.NO_CONTENT_ERROR(buttonId))\n    }\n\n    const accordionRowAttr = this._getAccordionRowAttr(buttonId)\n    const accordionRow = document.querySelector(accordionRowAttr)\n\n    if (!accordionRow) {\n      return console.error(Messages.NO_ROW_ERROR(buttonId))\n    }\n\n    const buttonHeaderAttr = this._getPossibleAccordionHeaderAttrs(accordionRowAttr)\n    const buttonHeader = nodeListToArray(buttonHeaderAttr)[0]\n\n    if (!buttonHeader || !buttonHeader.id) {\n      console.error(Messages.NO_HEADER_ID_ERROR(buttonId))\n    }\n\n    const buttonContentChildren = getFocusableElements(`#${buttonContent.id}`)\n\n    button.setAttribute(Selectors.ARIA_CONTROLS, buttonId)\n    buttonContent.setAttribute(Selectors.ARIA_LABELLEDBY, buttonHeader.id)\n\n    const contentShouldExpand = accordionRow.getAttribute(Selectors.DATA_VISIBLE)\n\n    if (!contentShouldExpand) {\n      return console.error(Messages.NO_VISIBLE_ERROR(buttonId))\n    }\n\n    if (contentShouldExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"0\")\n      })\n    } else {\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  /**\n   * Build a selector string to match possible accordion buttons\n   * @param {String} attr - A unique attribute\n   * @return {String} - String of possible button selectors\n   */\n  _getPossibleAccordionButtonAttrs(attr) {\n    return this._headerLevels\n      .map(\n        num => `${attr} > [${Selectors.DATA_ACCORDION_ROW}] > h${num} [${Selectors.DATA_TARGET}]`\n      )\n      .join(\", \")\n  }\n\n  /**\n   * Build a selector string to match possible accordion headers\n   * @param {String} attr - A unique attribute\n   * @return {String} - String of possible header selectors\n   */\n  _getPossibleAccordionHeaderAttrs(attr) {\n    return this._headerLevels.map(num => `${attr} > h${num}`).join(\", \")\n  }\n\n  /**\n   * Build a unique accordion row attribute selector.\n   * @param {String} id - An id value associated with a given Selectors.DATA_TARGET\n   * @return {String} - A unique accordion row selector\n   */\n  _getAccordionRowAttr(id) {\n    return `[${Selectors.DATA_ACCORDION_ROW}='${id}']`\n  }\n\n  /**\n   * If toggling multiple rows at once isn't enabled, close all rows except the selected one.\n   * This ensures the selected one can be closed if it's already open.\n   */\n  _closeAllIfToggleable() {\n    if (this._activeContainer.hasAttribute(Selectors.DATA_TOGGLE_MULTIPLE)) return\n\n    const allContentAttr = `${this._activeContainerAttr} [${Selectors.ARIA_HIDDEN}]`\n    const allRows = nodeListToArray(`${this._activeContainerAttr} [${Selectors.DATA_VISIBLE}]`)\n    const allContent = nodeListToArray(allContentAttr)\n\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttrs(this._activeContainerAttr)\n    const allButtons = nodeListToArray(accordionButtonSelector)\n\n    allContent.forEach(content => {\n      if (content !== this._activeContent) content.style.maxHeight = null\n    })\n\n    getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    this._toggleAttributeInCollection(allRows, Selectors.DATA_VISIBLE, \"true\", \"false\")\n    this._toggleAttributeInCollection(allButtons, Selectors.ARIA_EXPANDED, \"true\", \"false\")\n    this._toggleAttributeInCollection(allContent, Selectors.ARIA_HIDDEN, \"false\", \"true\")\n  }\n\n  /**\n   * Toggle the currently selected accordion button's content.\n   */\n  _toggleSelectedAccordion() {\n    this._activeRow.setAttribute(Selectors.DATA_VISIBLE, this._activeButtonExpandState)\n    this._activeButton.setAttribute(Selectors.ARIA_EXPANDED, this._activeButtonExpandState)\n    this._activeContent.setAttribute(Selectors.ARIA_HIDDEN, this._activeContentHiddenState)\n\n    const activeContentBlock = `#${this._activeAccordionRowId}`\n    getFocusableElements(activeContentBlock).forEach(element => {\n      const value = this._activeButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(Selectors.TABINDEX, value)\n    })\n\n    if (this._activeContent.style.maxHeight) {\n      this._activeContent.style.maxHeight = null\n    } else {\n      this._activeContent.style.maxHeight = `${this._activeContent.scrollHeight}px`\n    }\n  }\n\n  /**\n   * Toggles a single attribute of a series of elements.\n   * @param {Array} elements - An array of elements to be operated on.\n   * @param {String} attributeName - An attribute to be changed.\n   * @param {String} currentValue - The current value of attributeName\n   * @param {String} newValue - The new value of attributeName\n   */\n  _toggleAttributeInCollection(elements, attributeName, currentValue, newValue) {\n    elements.forEach(element => {\n      if (element.hasAttribute(attributeName, currentValue)) {\n        element.setAttribute(attributeName, newValue)\n      }\n    })\n  }\n}\n","import Utils, { iOSMobile, nodeListToArray } from \"./utils\"\n\nconst KeyCodes = {\n  TAB: 9,\n  SHIFT: 16,\n  ESCAPE: 27,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst Selectors = {\n  // unique\n  DATA_DROPDOWN: \"data-dropdown\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  // accessibility\n  TABINDEX: \"tabindex\",\n  ARIA_HASPOPUP: \"aria-haspopup\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ROLE: \"role\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\nconst Messages = {\n  NO_PARENT_ERROR: `Could not find dropdown button's [data-parent] attribute.`,\n  NO_DROPDOWN_ERROR: attr => `Could not find dropdown container associated with ${attr}.`,\n  NO_MENU_ERROR: attr => `Could not find menu associated with ${attr}.`,\n}\n\n/**\n * Dropdown component class.\n * @module Dropdown\n * @requires Utils\n */\nexport default class Dropdown extends Utils {\n  constructor() {\n    super()\n    // events\n    this._render = this._render.bind(this)\n    this._handleFirstTabClose = this._handleFirstTabClose.bind(this)\n    this._handleLastTabClose = this._handleLastTabClose.bind(this)\n    this._renderWithKeys = this._renderWithKeys.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n    this._handleOffMenuClick = this._handleOffMenuClick.bind(this)\n\n    // active dropdown\n    this._activeDropdownButton = null\n    this._activeDropdown = null\n    this._activeDropdownMenu = null\n    this._activeDropdownLinks = []\n    this._allowFocusReturn = true\n    this._activeDropdownId = \"\"\n    this._activeDropdownAttr = \"\"\n    this._activeDropdownMenuId = \"\"\n\n    // all dropdowns\n    this._dropdownButtons = []\n    this._dropdowns = []\n\n    // dropdown element selectors\n    this._dropdownContainerAttr = `[${Selectors.DATA_DROPDOWN}]`\n    this._dropdownTargetAttr = `[${Selectors.DATA_TARGET}]`\n  }\n\n  // public\n\n  /**\n   * Begin listening to dropdowns.\n   */\n  start() {\n    this._dropdowns = nodeListToArray(`${this._dropdownContainerAttr}`)\n    this._dropdownButtons = nodeListToArray(\n      `${this._dropdownContainerAttr} > ${this._dropdownTargetAttr}`\n    )\n\n    if (this._dropdowns.length) {\n      this._dropdowns.forEach(dropdown => this._setupDropdown(dropdown))\n    }\n\n    this._dropdownButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this._render)\n      button.addEventListener(Events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  /**\n   * Stop listening to dropdowns.\n   */\n  stop() {\n    this._dropdownButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n      button.removeEventListener(Events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   * @param {Number} key - The key code that called _render()\n   */\n  _render(event, key) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    if (this._activeDropdownButton) {\n      this._allowFocusReturn = false\n      this._handleClose(event)\n      this._allowFocusReturn = true\n    }\n\n    // dropdown button / trigger\n    this._activeDropdownButton = event.target\n    this._activeDropdownId = this._activeDropdownButton.getAttribute(Selectors.DATA_PARENT)\n\n    if (!this._activeDropdownId) {\n      return console.error(Messages.NO_PARENT_ERROR)\n    }\n\n    // dropdown container\n    this._activeDropdownAttr = `[${Selectors.DATA_DROPDOWN}=\"${this._activeDropdownId}\"]`\n    this._activeDropdown = document.querySelector(this._activeDropdownAttr)\n\n    if (!this._activeDropdown) {\n      return console.error(Messages.NO_DROPDOWN_ERROR(this._activeDropdownAttr))\n    }\n\n    // dropdown menu\n    this._activeDropdownMenuId = this._activeDropdownButton.getAttribute(Selectors.DATA_TARGET)\n    this._activeDropdownMenu = document.getElementById(this._activeDropdownMenuId)\n\n    // toggle attributes on dropdown button, indicating a visible dropdown is present\n    this._activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n\n    // trade button event listener to close the menu, instead of open it\n    this._activeDropdownButton.removeEventListener(Events.CLICK, this._render)\n    this._activeDropdownButton.addEventListener(Events.CLICK, this._handleClose)\n\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOffMenuClick)\n\n    // make click events work on mobile iOS\n    if (iOSMobile) {\n      document.body.style.cursor = \"pointer\"\n    }\n\n    this._activeDropdownLinks = this._getDropdownLinks(this._activeDropdownAttr)\n\n    this.firstDropdownLink = this._activeDropdownLinks[0]\n    this.lastDropdownLink = this._activeDropdownLinks[this._activeDropdownLinks.length - 1]\n\n    this.firstDropdownLink.addEventListener(Events.KEYDOWN, this._handleFirstTabClose)\n    this.lastDropdownLink.addEventListener(Events.KEYDOWN, this._handleLastTabClose)\n\n    if (key && key === KeyCodes.ARROW_UP) {\n      this.lastDropdownLink.focus()\n    } else {\n      this.firstDropdownLink.focus()\n    }\n\n    this._activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"0\")\n      link.addEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this.captureFocus(`${this._activeDropdownAttr} > ul`, { useArrows: true })\n  }\n\n  /**\n   * Closes the dropdown if user uses shift and tab keys on the first dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleFirstTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (shiftKey && tabKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes the dropdown if user uses tab key on the last dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleLastTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (tabKey && !shiftKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Renders dropdown if the user uses arrow up or down.\n   * @param {Object} event - The event object\n   */\n  _renderWithKeys(event) {\n    if (event.which === KeyCodes.ARROW_UP || event.which === KeyCodes.ARROW_DOWN) {\n      this._render(event, event.which)\n    }\n  }\n\n  /**\n   * Closes currently open dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleClose(event) {\n    event.preventDefault()\n\n    this.releaseFocus()\n\n    this._activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n\n    this._activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n      link.removeEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this._activeDropdownButton.removeEventListener(Events.CLICK, this._handleClose)\n    this._activeDropdownButton.addEventListener(Events.CLICK, this._render)\n\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n\n    if (iOSMobile) {\n      document.body.style.cursor = \"auto\"\n    }\n\n    document.removeEventListener(Events.CLICK, this._handleOffMenuClick)\n\n    if (this._allowFocusReturn) {\n      this._handleReturnFocus()\n    }\n\n    this._activeDropdownButton = null\n    this._activeDropdownId = null\n    this._activeDropdown = null\n  }\n\n  /**\n   * Use escape key to close dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes dropdown\n   * @param {Object} event - The event object\n   */\n  _handleOffMenuClick(event) {\n    if (event.target !== this._activeDropdownButton && event.target !== this._activeDropdownMenu) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Puts focus on a the active dropdown button.\n   */\n  _handleReturnFocus() {\n    this._activeDropdownButton.setAttribute(Selectors.TAB_INDEX, \"-1\")\n    this._activeDropdownButton.focus()\n    this._activeDropdownButton.removeAttribute(Selectors.TAB_INDEX)\n  }\n\n  /**\n   * Retrieve possible menu links or buttons as an array\n   * @param {String} attr - The unique attribute for a dropdown.\n   * @return {String} - Selector for possible menu item links.\n   */\n  _getDropdownLinks(attr) {\n    return nodeListToArray(`${attr} > ul > li > a, ${attr} > ul > li > button`)\n  }\n\n  /**\n   * Add starting attributes to a dropdown.\n   * @param {Element} dropdown - A dropdown element.\n   */\n  _setupDropdown(dropdown) {\n    const dropdownId = dropdown.getAttribute(Selectors.DATA_DROPDOWN)\n\n    // no id error\n\n    const dropdownAttr = `[${Selectors.DATA_DROPDOWN}=\"${dropdownId}\"]`\n    const dropdownMenuItemsAttr = `${dropdownAttr} > ul > li`\n    const dropdownMenu = document.querySelector(`${dropdownAttr} > ul`)\n\n    // no ul error\n\n    if (!dropdownMenu) {\n      return console.error(Messages.NO_MENU_ERROR(dropdownAttr))\n    }\n\n    const dropdownButton = document.querySelector(`${dropdownAttr} > ${this._dropdownTargetAttr}`)\n\n    dropdownButton.setAttribute(Selectors.ARIA_CONTROLS, dropdownMenu.id)\n    dropdownButton.setAttribute(Selectors.ARIA_HASPOPUP, \"true\")\n    dropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    dropdownMenu.setAttribute(Selectors.ARIA_LABELLEDBY, dropdownButton.id)\n\n    const dropdownMenuListItems = nodeListToArray(dropdownMenuItemsAttr)\n\n    // no menu items error\n\n    dropdownMenuListItems.forEach(item => item.setAttribute(Selectors.ROLE, \"none\"))\n\n    const dropdownMenuButtons = this._getDropdownLinks(dropdownAttr)\n\n    // no menu buttons error\n\n    dropdownMenuButtons.forEach(link => {\n      link.setAttribute(Selectors.ROLE, \"menuitem\")\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n  }\n}\n","import Utils, { iOSMobile, getFocusableElements, nodeListToArray } from \"./utils\"\n\nconst KeyCodes = {\n  ESCAPE: 27,\n}\n\nconst Selectors = {\n  // unique\n  DATA_MODAL: \"data-modal\",\n  DATA_MODAL_BUTTON: \"data-modal-button\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n  // classes\n  NO_SCROLL: \"no-scroll\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n}\n\nconst Messages = {\n  NO_BUTTON_ID_ERROR:\n    \"Could not find an id on your [data-modal-button] element. Modal can't be opened.\",\n  NO_MODAL_ID_ERROR:\n    \"Could not detect an id on your [data-modal] element. Please add a value matching a button's [data-modal-button] attribute.\",\n  NO_MODAL_ERROR: id =>\n    `Could not find a [data-parent='${id}'] attribute within your [data-modal='${id}'] element.`,\n}\n\n/**\n * Modal component class.\n * @module Modal\n * @requires Utils\n */\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleOverlayClick = this._handleOverlayClick.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n\n    // all modals\n    this._modals = []\n    this._modalButtons = []\n\n    // active modal\n    this._activeModalButton = {}\n    this._activeModalOverlay = {}\n    this._activeModal = {}\n    this._activeModalId = \"\"\n    this._activeModalOverlayAttr = \"\"\n    this._activeModalSelector = \"\"\n    this._activeModalCloseButtons = []\n\n    // attribute helpers\n    this._modalContainerAttr = `[${Selectors.DATA_MODAL}]`\n  }\n\n  // public\n\n  /**\n   * Begin listening to modals.\n   */\n  start() {\n    this._modals = nodeListToArray(this._modalContainerAttr)\n    this._modalButtons = nodeListToArray(`[${Selectors.DATA_MODAL_BUTTON}]`)\n\n    getFocusableElements(this._modalContainerAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    if (this._modals.length) {\n      this._modals.forEach(instance => {\n        this._setupModal(instance)\n      })\n    }\n\n    if (this._modalButtons.length) {\n      this._modalButtons.forEach(button => {\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to modals\n   */\n  stop() {\n    this._modalButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   */\n  _render(event) {\n    event.preventDefault()\n    this._activeModalButton = event.target\n    this._activeModalId = this._activeModalButton.getAttribute(Selectors.DATA_MODAL_BUTTON)\n\n    if (!this._activeModalId) {\n      return console.error(Messages.NO_BUTTON_ID_ERROR)\n    }\n\n    this._activeModalOverlay = document.querySelector(\n      `[${Selectors.DATA_MODAL}=\"${this._activeModalId}\"]`\n    )\n    this._activeModalSelector = `[${Selectors.DATA_PARENT}='${this._activeModalId}']`\n    this._activeModal = this._activeModalOverlay.querySelector(this._activeModalSelector)\n    this._activeModalCloseButtons = nodeListToArray(\n      `${this._activeModalSelector} [${Selectors.DATA_CLOSE}]`\n    )\n\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"0\")\n    })\n\n    this._handleScrollStop()\n    this.captureFocus(this._activeModalSelector)\n    this._activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n    this._activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n\n    this._activeModal.setAttribute(Selectors.TABINDEX, \"-1\")\n    this._activeModal.focus()\n\n    this._activeModalOverlay.scrollTop = 0\n\n    if (iOSMobile) {\n      this._activeModalOverlay.style.cursor = \"pointer\"\n    }\n\n    // begin listening to events\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOverlayClick)\n    this._activeModalCloseButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this._handleClose)\n    })\n  }\n\n  /**\n   * Setup a modal instance.\n   * @param {Object} instance - The modal element\n   */\n  _setupModal(instance) {\n    const modalId = instance.getAttribute(Selectors.DATA_MODAL)\n\n    if (!modalId) {\n      return console.error(Messages.NO_MODAL_ID_ERROR)\n    }\n\n    const modal = instance.querySelector(`[${Selectors.DATA_PARENT}='${modalId}']`)\n\n    if (!modal) {\n      return console.error(Messages.NO_MODAL_ERROR(modalId))\n    }\n\n    const modalWrapper = document.querySelector(`[${Selectors.DATA_MODAL}='${modalId}']`)\n\n    modalWrapper.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    modalWrapper.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    modal.setAttribute(Selectors.ARIA_MODAL, \"true\")\n    modal.setAttribute(Selectors.ROLE, \"dialog\")\n  }\n\n  /**\n   * Turn off event listeners and reset focus to last selected DOM node (button)\n   * @param {Object} event - The event object\n   */\n  _handleClose(event) {\n    event.preventDefault()\n    this._activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    this._handleReturnFocus()\n    this._handleScrollRestore()\n    this.releaseFocus()\n    this._activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    this._activeModal.removeAttribute(Selectors.TABINDEX)\n\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    if (iOSMobile) {\n      this._activeModalOverlay.style.cursor = \"auto\"\n    }\n\n    // stop listening to events\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this._handleOverlayClick)\n    this._activeModalCloseButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this._activeModalId = null\n  }\n\n  /**\n   * Handles click event on the modal background to close it.\n   * @param {Object} event - The event object\n   */\n  _handleOverlayClick(event) {\n    if (event.target === this._activeModalOverlay) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Handles escape key event to close the current modal\n   * @param {Object} event - The event object\n   */\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Returns focus to the last focused element before the modal was called.\n   * @param {Object} button - The current modal's corresponding button.\n   */\n  _handleReturnFocus() {\n    this._activeModalButton.setAttribute(Selectors.TABINDEX, \"-1\")\n    this._activeModalButton.focus()\n    this._activeModalButton.removeAttribute(Selectors.TABINDEX)\n  }\n\n  /**\n   * Restores scroll behavior to <html> and <body>\n   */\n  _handleScrollRestore() {\n    document.body.classList.remove(Selectors.NO_SCROLL)\n    document.documentElement.classList.remove(Selectors.NO_SCROLL)\n  }\n\n  /**\n   * Prevents scroll behavior on <html> and <body>\n   */\n  _handleScrollStop() {\n    document.body.classList.add(Selectors.NO_SCROLL)\n    document.documentElement.classList.add(Selectors.NO_SCROLL)\n  }\n}\n","import { iOSMobile } from \"./utils\"\r\n\r\nconst KeyCodes = {\r\n  ESCAPE: 27,\r\n}\r\n\r\nconst Selectors = {\r\n  DATA_TOOLTIP: \"data-tooltip\",\r\n  DATA_VISIBLE: \"data-visible\",\r\n  DATA_TARGET: \"data-target\",\r\n  ROLE: \"role\",\r\n  ARIA_DESCRIBEDBY: \"aria-describedby\",\r\n  DROP_LEFT_CLASS: \"is-drop-left\",\r\n  DROP_RIGHT_CLASS: \"is-drop-right\",\r\n}\r\n\r\nconst Events = {\r\n  CLICK: \"click\",\r\n  MOUSEOVER: \"mouseover\",\r\n  MOUSEOUT: \"mouseout\",\r\n  FOCUS: \"focus\",\r\n  BLUR: \"blur\",\r\n  KEYDOWN: \"keydown\",\r\n}\r\n\r\nconst Messages = {\r\n  NO_ID_ERROR: \"Could not find your tooltip's id.\",\r\n  NO_TRIGGER_ERROR: id => `Could not find a tooltip trigger with id of ${id}.`,\r\n  NO_TOOLTIP_ERROR: id => `Could not find a tooltip with id of ${id}.`,\r\n}\r\n\r\n/**\r\n * Tooltip component class.\r\n * @module Tooltip\r\n */\r\nexport default class Tooltip {\r\n  constructor() {\r\n    // events\r\n    this._render = this._render.bind(this)\r\n    this._handleClose = this._handleClose.bind(this)\r\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\r\n\r\n    // active tooltip\r\n    this._activeTrigger = null\r\n    this._activeTooltip = null\r\n\r\n    // all tooltips\r\n    this._allTooltips = []\r\n  }\r\n\r\n  // public\r\n\r\n  /**\r\n   * Begin listening to tooltips.\r\n   */\r\n  start() {\r\n    this._allTooltips = document.querySelectorAll(`[${Selectors.DATA_TOOLTIP}]`)\r\n\r\n    this._allTooltips.forEach(instance => {\r\n      this._setupTooltip(instance)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Stop listening to tooltips.\r\n   */\r\n  stop() {\r\n    this._allTooltips.forEach(instance => {\r\n      const id = instance.getAttribute(Selectors.DATA_TOOLTIP)\r\n      const trigger = instance.querySelector(this._getTrigger(id))\r\n\r\n      trigger.removeEventListener(Events.MOUSEOVER, this._render)\r\n      trigger.removeEventListener(Events.FOCUS, this._render)\r\n    })\r\n  }\r\n\r\n  // private\r\n\r\n  /**\r\n   * Render a tooltip.\r\n   * @param {Object} event - The event object\r\n   */\r\n  _render(event) {\r\n    this._activeTrigger = event.target\r\n    const tooltipId = this._activeTrigger.getAttribute(Selectors.DATA_TARGET)\r\n    this._activeTooltip = document.getElementById(tooltipId)\r\n\r\n    // align tooltip to its trigger\r\n    // -> if the trigger is on the left or right side, use height\r\n    // -> else use width\r\n    if (this._isLeftOrRight()) {\r\n      this._alignTooltip(\"height\")\r\n    } else {\r\n      this._alignTooltip(\"width\")\r\n    }\r\n\r\n    this._showTooltip()\r\n    this._listenForClose()\r\n  }\r\n\r\n  /**\r\n   * Close a tooltip.\r\n   */\r\n  _handleClose() {\r\n    this._hideTooltip()\r\n    this._listenForOpen()\r\n\r\n    this._activeTrigger = null\r\n    this._activeTooltip = null\r\n  }\r\n\r\n  /**\r\n   * Add data-visible attribute to currently active tooltip.\r\n   */\r\n  _showTooltip() {\r\n    this._activeTooltip.setAttribute(Selectors.DATA_VISIBLE, \"true\")\r\n  }\r\n\r\n  /**\r\n   * Remove data-visible attribute from currently active tooltip.\r\n   */\r\n  _hideTooltip() {\r\n    this._activeTooltip.setAttribute(Selectors.DATA_VISIBLE, \"false\")\r\n  }\r\n\r\n  /**\r\n   * Stop listening for render events, and start listening to close events.\r\n   */\r\n  _listenForClose() {\r\n    this._activeTrigger.removeEventListener(Events.MOUSEOVER, this._render)\r\n    this._activeTrigger.removeEventListener(Events.FOCUS, this._render)\r\n    this._activeTrigger.addEventListener(Events.MOUSEOUT, this._handleClose)\r\n    this._activeTrigger.addEventListener(Events.BLUR, this._handleClose)\r\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\r\n\r\n    if (iOSMobile) {\r\n      document.body.style.cursor = \"pointer\"\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close a tooltip with the escape key.\r\n   * @param {Object} event - The event object\r\n   */\r\n  _handleEscapeKeyPress(event) {\r\n    if (event.which === KeyCodes.ESCAPE) {\r\n      this._handleClose()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop listening to close events, start listening for render events.\r\n   */\r\n  _listenForOpen() {\r\n    this._activeTrigger.removeEventListener(Events.MOUSEOUT, this._handleClose)\r\n    this._activeTrigger.removeEventListener(Events.BLUR, this._handleClose)\r\n    this._activeTrigger.addEventListener(Events.MOUSEOVER, this._render)\r\n    this._activeTrigger.addEventListener(Events.FOCUS, this._render)\r\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\r\n\r\n    if (iOSMobile) {\r\n      document.body.style.cursor = \"auto\"\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Aligns a tooltip vertically or horizontally.\r\n   * @param {String} property - String specifying \"height\" or \"width\"\r\n   */\r\n  _alignTooltip(property) {\r\n    const triggerLength = this._getComputedLength(this._activeTrigger, property)\r\n    const tooltipLength = this._getComputedLength(this._activeTooltip, property)\r\n    const triggerIsLongest = triggerLength > tooltipLength\r\n\r\n    const offset = triggerIsLongest\r\n      ? (triggerLength - tooltipLength) / 2\r\n      : (tooltipLength - triggerLength) / -2\r\n\r\n    if (property === \"height\") {\r\n      this._activeTooltip.style.top = `${offset}px`\r\n    } else {\r\n      this._activeTooltip.style.left = `${offset}px`\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Setup a tooltip and trigger with appropriate event listeners and attributes.\r\n   * @param {Object} instance - A tooltip instance\r\n   */\r\n  _setupTooltip(instance) {\r\n    const id = instance.getAttribute(Selectors.DATA_TOOLTIP)\r\n    const trigger = instance.querySelector(this._getTrigger(id))\r\n    const tooltip = document.getElementById(id)\r\n\r\n    if (!id) {\r\n      return console.error(Messages.NO_ID_ERROR)\r\n    }\r\n\r\n    if (!trigger) {\r\n      return console.error(Messages.NO_TRIGGER_ERROR(id))\r\n    }\r\n\r\n    if (!tooltip) {\r\n      return console.error(Messages.NO_TOOLTIP_ERROR(id))\r\n    }\r\n\r\n    trigger.setAttribute(Selectors.ARIA_DESCRIBEDBY, id)\r\n    tooltip.setAttribute(Selectors.ROLE, \"tooltip\")\r\n\r\n    trigger.addEventListener(Events.MOUSEOVER, this._render)\r\n    trigger.addEventListener(Events.FOCUS, this._render)\r\n  }\r\n\r\n  /**\r\n   * Get an attribute selector string.\r\n   * @param {String} id - A unique tooltip id\r\n   * @return {String}\r\n   */\r\n  _getTrigger(id) {\r\n    return `[${Selectors.DATA_TARGET}=\"${id}\"]`\r\n  }\r\n\r\n  /**\r\n   * Render a tooltip.\r\n   * @param {Object} element - A tooltip element\r\n   * @param {String} property - The \"height\" or \"width\" property.\r\n   * @return {Number}\r\n   */\r\n  _getComputedLength(element, property) {\r\n    return parseInt(window.getComputedStyle(element)[property].slice(0, -2))\r\n  }\r\n\r\n  /**\r\n   * Determine if a tooltip is rendering on the left or right.\r\n   * @return {Boolean}\r\n   */\r\n  _isLeftOrRight() {\r\n    const classes = this._activeTooltip.classList\r\n    return (\r\n      classes.contains(Selectors.DROP_LEFT_CLASS) || classes.contains(Selectors.DROP_RIGHT_CLASS)\r\n    )\r\n  }\r\n}\r\n","import _Accordion from \"./accordion\"\nimport _Dropdown from \"./dropdown\"\nimport _Modals from \"./modal\"\nimport _Tooltips from \"./tooltip\"\nimport _Utils from \"./utils\"\n\nexport const Accordions = new _Accordion()\nexport const Dropdowns = new _Dropdown()\nexport const Modals = new _Modals()\nexport const Tooltips = new _Tooltips()\nexport const Utils = new _Utils()\n\nconst Undernet = {\n  // Components\n  Modals,\n  Accordions,\n  Dropdowns,\n  Tooltips,\n\n  // Utils\n  Utils,\n}\n\nUndernet.start = () => {\n  // Components\n  Undernet.Modals.start()\n  Undernet.Accordions.start()\n  Undernet.Dropdowns.start()\n  Undernet.Tooltips.start()\n\n  // Utils\n  Undernet.Utils.enableFocusOutline()\n}\n\nUndernet.stop = () => {\n  // Components\n  Undernet.Modals.stop()\n  Undernet.Accordions.stop()\n  Undernet.Dropdowns.stop()\n\n  // Utils\n  Undernet.Utils.disableFocusOutline()\n}\n\nexport default Undernet\n","import Undernet from \"./index\"\n\nwindow.Undernet = Undernet\nexport { default as Undernet, Modals, Accordions, Dropdowns, Tooltips, Utils } from \"./index\"\n"],"names":["KeyCodes","SHIFT","TAB","ARROW_UP","ARROW_DOWN","Selectors","NOT_VISUALLY_HIDDEN","FOCUSABLE_TAGS","KEYBOARD_CLASS","Events","KEYDOWN","CLICK","nodeListToArray","nodeList","Array","apply","document","querySelectorAll","getFocusableElements","container","focusables","map","element","join","iOSMobile","test","navigator","userAgent","Utils","_listenForKeyboard","bind","_listenForClick","_handleFocusTrapWithTab","_handleFocusTrapWithArrows","_focusContainerSelector","_focusableChildren","_focusableFirstChild","_focusableLastChild","_listeningForKeydown","_trapFocusWithArrows","options","length","useArrows","addEventListener","removeEventListener","event","body","classList","add","remove","containerElement","querySelector","containerActive","activeElement","firstActive","lastActive","tabKey","which","shiftKey","preventDefault","focus","arrowUp","arrowDown","_focusNextChild","_focusLastChild","i","DATA_ACCORDION","DATA_ACCORDION_ROW","DATA_VISIBLE","DATA_TARGET","DATA_TOGGLE_MULTIPLE","DATA_PARENT","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_HIDDEN","ARIA_LABELLEDBY","TABINDEX","Messages","NO_VISIBLE_ERROR","id","NO_ROW_ERROR","NO_HEADER_ID_ERROR","NO_PARENT_ERROR","NO_CONTENT_ERROR","Accordion","_render","_accordionButtons","_accordionContentsAttr","_accordionContents","_activeContainer","_activeButton","_activeAccordionRowId","_activeRowAttr","_activeRow","_activeContainerId","_activeContainerAttr","_activeContent","_activeButtonExpandState","_activeContentHiddenState","_headerLevels","accordionButtonSelector","_getPossibleAccordionButtonAttrs","forEach","button","_setupAccordion","target","getAttribute","_getAccordionRowAttr","console","error","NO_ACCORDION_ERROR","getElementById","accordionButtonState","_closeAllIfToggleable","_toggleSelectedAccordion","buttonId","buttonContent","accordionRowAttr","accordionRow","buttonHeaderAttr","_getPossibleAccordionHeaderAttrs","buttonHeader","buttonContentChildren","setAttribute","contentShouldExpand","style","maxHeight","scrollHeight","attr","num","hasAttribute","allContentAttr","allRows","allContent","allButtons","content","_toggleAttributeInCollection","activeContentBlock","value","elements","attributeName","currentValue","newValue","ESCAPE","DATA_DROPDOWN","ARIA_HASPOPUP","ROLE","NO_DROPDOWN_ERROR","NO_MENU_ERROR","Dropdown","_handleFirstTabClose","_handleLastTabClose","_renderWithKeys","_handleClose","_handleEscapeKeyPress","_handleOffMenuClick","_activeDropdownButton","_activeDropdown","_activeDropdownMenu","_activeDropdownLinks","_allowFocusReturn","_activeDropdownId","_activeDropdownAttr","_activeDropdownMenuId","_dropdownButtons","_dropdowns","_dropdownContainerAttr","_dropdownTargetAttr","dropdown","_setupDropdown","key","stopPropagation","cursor","_getDropdownLinks","firstDropdownLink","lastDropdownLink","link","captureFocus","releaseFocus","_handleReturnFocus","TAB_INDEX","removeAttribute","dropdownId","dropdownAttr","dropdownMenuItemsAttr","dropdownMenu","dropdownButton","dropdownMenuListItems","item","dropdownMenuButtons","DATA_MODAL","DATA_MODAL_BUTTON","DATA_CLOSE","ARIA_MODAL","NO_SCROLL","RESIZE","NO_BUTTON_ID_ERROR","NO_MODAL_ID_ERROR","NO_MODAL_ERROR","Modal","_handleOverlayClick","_modals","_modalButtons","_activeModalButton","_activeModalOverlay","_activeModal","_activeModalId","_activeModalOverlayAttr","_activeModalSelector","_activeModalCloseButtons","_modalContainerAttr","instance","_setupModal","_handleScrollStop","scrollTop","modalId","modal","modalWrapper","_handleScrollRestore","documentElement","DATA_TOOLTIP","ARIA_DESCRIBEDBY","DROP_LEFT_CLASS","DROP_RIGHT_CLASS","MOUSEOVER","MOUSEOUT","FOCUS","BLUR","NO_ID_ERROR","NO_TRIGGER_ERROR","NO_TOOLTIP_ERROR","Tooltip","_activeTrigger","_activeTooltip","_allTooltips","_setupTooltip","trigger","_getTrigger","tooltipId","_isLeftOrRight","_alignTooltip","_showTooltip","_listenForClose","_hideTooltip","_listenForOpen","property","triggerLength","_getComputedLength","tooltipLength","triggerIsLongest","offset","top","left","tooltip","parseInt","window","getComputedStyle","slice","classes","contains","Accordions","_Accordion","Dropdowns","_Dropdown","Modals","_Modals","Tooltips","_Tooltips","_Utils","Undernet","start","enableFocusOutline","stop","disableFocusOutline"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,IAAMA,QAAQ,GAAG;EACfC,EAAAA,KAAK,EAAE,EADQ;EAEfC,EAAAA,GAAG,EAAE,CAFU;EAGfC,EAAAA,QAAQ,EAAE,EAHK;EAIfC,EAAAA,UAAU,EAAE;EAJG,CAAjB;EAOA,IAAMC,SAAS,GAAG;EAChBC,EAAAA,mBAAmB,EAAE,2BADL;EAEhBC,EAAAA,cAAc,EAAE,CAAC,GAAD,EAAM,QAAN,EAAgB,OAAhB,EAAyB,QAAzB,EAAmC,QAAnC,EAA6C,UAA7C,EAAyD,YAAzD,CAFA;EAGhBC,EAAAA,cAAc,EAAE;EAHA,CAAlB;EAMA,IAAMC,MAAM,GAAG;EACbC,EAAAA,OAAO,EAAE,SADI;EAEbC,EAAAA,KAAK,EAAE;EAFM,CAAf;AAUA,EAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,QAAQ,EAAI;EACzC,SAAOC,KAAK,CAACC,KAAN,CAAY,IAAZ,EAAkBC,QAAQ,CAACC,gBAAT,CAA0BJ,QAA1B,CAAlB,CAAP;EACD,CAFM;AASP,EAAO,IAAMK,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,SAAS,EAAI;EAC/C,MAAMC,UAAU,GAAGf,SAAS,CAACE,cAAV,CAAyBc,GAAzB,CACjB,UAAAC,OAAO;EAAA,qBAAOH,SAAP,cAAoBG,OAApB,SAA8BjB,SAAS,CAACC,mBAAxC;EAAA,GADU,EAEjBiB,IAFiB,CAEZ,IAFY,CAAnB;EAIA,SAAOX,eAAe,CAACQ,UAAD,CAAtB;EACD,CANM;AAYP,EAAO,IAAMI,SAAS,GAAG,sBAAsBC,IAAtB,CAA2BC,SAAS,CAACC,SAArC,CAAlB;;MAMcC;EACnB,mBAAc;EAAA;;EAEZ,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;EACA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAAvB;EACA,SAAKE,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BF,IAA7B,CAAkC,IAAlC,CAA/B;EACA,SAAKG,0BAAL,GAAkC,KAAKA,0BAAL,CAAgCH,IAAhC,CAAqC,IAArC,CAAlC;EAEA,SAAKI,uBAAL,GAA+B,EAA/B;EACA,SAAKC,kBAAL,GAA0B,EAA1B;EACA,SAAKC,oBAAL,GAA4B,EAA5B;EACA,SAAKC,mBAAL,GAA2B,EAA3B;EACA,SAAKC,oBAAL,GAA4B,KAA5B;EACA,SAAKC,oBAAL,GAA4B,KAA5B;EACD;;;;mCASYpB,WAAWqB,SAAS;EAC/B,WAAKN,uBAAL,GAA+Bf,SAA/B;EACA,WAAKgB,kBAAL,GAA0BjB,oBAAoB,CAAC,KAAKgB,uBAAN,CAA9C;EACA,WAAKE,oBAAL,GAA4B,KAAKD,kBAAL,CAAwB,CAAxB,CAA5B;EACA,WAAKE,mBAAL,GAA2B,KAAKF,kBAAL,CAAwB,KAAKA,kBAAL,CAAwBM,MAAxB,GAAiC,CAAzD,CAA3B;;EAEA,UAAID,OAAJ,EAAa;EACX,YAAIA,OAAO,CAACE,SAAZ,EAAuB;EACrB,eAAKH,oBAAL,GAA4BC,OAAO,CAACE,SAAR,IAAqB,KAAKH,oBAAtD;EACAvB,UAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,MAAM,CAACC,OAAjC,EAA0C,KAAKuB,0BAA/C;EACD;EACF,OALD,MAKO;EACLjB,QAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,MAAM,CAACC,OAAjC,EAA0C,KAAKsB,uBAA/C;EACD;EACF;;;qCAKc;EACb,UAAI,KAAKO,oBAAT,EAA+B;EAC7BvB,QAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,MAAM,CAACC,OAApC,EAA6C,KAAKuB,0BAAlD;EACA,aAAKM,oBAAL,GAA4B,KAA5B;EACD,OAHD,MAGO;EACLvB,QAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,MAAM,CAACC,OAApC,EAA6C,KAAKsB,uBAAlD;EACD;EACF;;;2CAKoB;EACnBhB,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,MAAM,CAACC,OAAjC,EAA0C,KAAKmB,kBAA/C;EACD;;;4CAKqB;EACpB,UAAI,KAAKS,oBAAT,EAA+B;EAC7BtB,QAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,MAAM,CAACC,OAApC,EAA6C,KAAKmB,kBAAlD;EACD,OAFD,MAEO;EACLb,QAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,MAAM,CAACE,KAApC,EAA2C,KAAKoB,eAAhD;EACD;EACF;;;yCAUkBc,OAAO;EACxB7B,MAAAA,QAAQ,CAAC8B,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B3C,SAAS,CAACG,cAAtC;EACAQ,MAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,MAAM,CAACC,OAApC,EAA6C,KAAKmB,kBAAlD;EACAb,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,MAAM,CAACE,KAAjC,EAAwC,KAAKoB,eAA7C;EACA,WAAKO,oBAAL,GAA4B,KAA5B;EACD;;;sCAMeO,OAAO;EACrB7B,MAAAA,QAAQ,CAAC8B,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B5C,SAAS,CAACG,cAAzC;EACAQ,MAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,MAAM,CAACE,KAApC,EAA2C,KAAKoB,eAAhD;EACAf,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,MAAM,CAACC,OAAjC,EAA0C,KAAKmB,kBAA/C;EACA,WAAKS,oBAAL,GAA4B,IAA5B;EACD;;;8CAMuBO,OAAO;EAC7B,UAAMK,gBAAgB,GAAGlC,QAAQ,CAACmC,aAAT,CAAuB,KAAKjB,uBAA5B,CAAzB;EACA,UAAMkB,eAAe,GAAGpC,QAAQ,CAACqC,aAAT,KAA2BH,gBAAnD;EACA,UAAMI,WAAW,GAAGtC,QAAQ,CAACqC,aAAT,KAA2B,KAAKjB,oBAApD;EACA,UAAMmB,UAAU,GAAGvC,QAAQ,CAACqC,aAAT,KAA2B,KAAKhB,mBAAnD;EACA,UAAMmB,MAAM,GAAGX,KAAK,CAACY,KAAN,KAAgBzD,QAAQ,CAACE,GAAxC;EACA,UAAMwD,QAAQ,GAAGb,KAAK,CAACY,KAAN,KAAgBzD,QAAQ,CAACC,KAAzB,IAAkC4C,KAAK,CAACa,QAAzD;AACA;EAGA,UAAIA,QAAQ,IAAIF,MAAZ,KAAuBF,WAAW,IAAIF,eAAtC,CAAJ,EAA4D;EAC1DP,QAAAA,KAAK,CAACc,cAAN;;EACA,aAAKtB,mBAAL,CAAyBuB,KAAzB;EACD,OAHD,MAGO,IAAI,CAACF,QAAD,IAAaF,MAAb,IAAuBD,UAA3B,EAAuC;EAC5CV,QAAAA,KAAK,CAACc,cAAN;;EACA,aAAKvB,oBAAL,CAA0BwB,KAA1B;EACD;EACF;;;iDAM0Bf,OAAO;EAChC,UAAMS,WAAW,GAAGtC,QAAQ,CAACqC,aAAT,KAA2B,KAAKjB,oBAApD;EACA,UAAMmB,UAAU,GAAGvC,QAAQ,CAACqC,aAAT,KAA2B,KAAKhB,mBAAnD;EACA,UAAMwB,OAAO,GAAGhB,KAAK,CAACY,KAAN,KAAgBzD,QAAQ,CAACG,QAAzC;EACA,UAAM2D,SAAS,GAAGjB,KAAK,CAACY,KAAN,KAAgBzD,QAAQ,CAACI,UAA3C;;EAEA,UAAIyD,OAAO,IAAIC,SAAf,EAA0B;EACxBjB,QAAAA,KAAK,CAACc,cAAN;;EAEA,YAAIL,WAAW,IAAIO,OAAnB,EAA4B;EAC1B,eAAKxB,mBAAL,CAAyBuB,KAAzB;EACD,SAFD,MAEO,IAAIL,UAAU,IAAIO,SAAlB,EAA6B;EAClC,eAAK1B,oBAAL,CAA0BwB,KAA1B;EACD,SAFM,MAEA,IAAIE,SAAJ,EAAe;EACpB,eAAKC,eAAL;EACD,SAFM,MAEA,IAAIF,OAAJ,EAAa;EAClB,eAAKG,eAAL;EACD;EACF;EACF;;;wCAKiB;EAChB,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9B,kBAAL,CAAwBM,MAA5C,EAAoDwB,CAAC,EAArD,EAAyD;EACvD,YAAI,KAAK9B,kBAAL,CAAwB8B,CAAxB,MAA+BjD,QAAQ,CAACqC,aAA5C,EAA2D;EACzD,eAAKlB,kBAAL,CAAwB8B,CAAC,GAAG,CAA5B,EAA+BL,KAA/B;;EACA;EACD;EACF;EACF;;;wCAKiB;EAChB,WAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9B,kBAAL,CAAwBM,MAA5C,EAAoDwB,CAAC,EAArD,EAAyD;EACvD,YAAI,KAAK9B,kBAAL,CAAwB8B,CAAxB,MAA+BjD,QAAQ,CAACqC,aAA5C,EAA2D;EACzD,eAAKlB,kBAAL,CAAwB8B,CAAC,GAAG,CAA5B,EAA+BL,KAA/B;;EACA;EACD;EACF;EACF;;;;;;ECrNH,IAAMvD,WAAS,GAAG;EAEhB6D,EAAAA,cAAc,EAAE,gBAFA;EAGhBC,EAAAA,kBAAkB,EAAE,oBAHJ;EAKhBC,EAAAA,YAAY,EAAE,cALE;EAMhBC,EAAAA,WAAW,EAAE,aANG;EAOhBC,EAAAA,oBAAoB,EAAE,sBAPN;EAQhBC,EAAAA,WAAW,EAAE,aARG;EAUhBC,EAAAA,aAAa,EAAE,eAVC;EAWhBC,EAAAA,aAAa,EAAE,eAXC;EAYhBC,EAAAA,WAAW,EAAE,aAZG;EAahBC,EAAAA,eAAe,EAAE,iBAbD;EAchBC,EAAAA,QAAQ,EAAE;EAdM,CAAlB;EAiBA,IAAMnE,QAAM,GAAG;EACbE,EAAAA,KAAK,EAAE,OADM;EAEbD,EAAAA,OAAO,EAAE;EAFI,CAAf;EAKA,IAAMmE,QAAQ,GAAG;EACfC,EAAAA,gBAAgB,EAAE,0BAAAC,EAAE;EAAA,uGACmEA,EADnE;EAAA,GADL;EAGfC,EAAAA,YAAY,EAAE,sBAAAD,EAAE;EAAA,yEAA2DA,EAA3D;EAAA,GAHD;EAIfE,EAAAA,kBAAkB,EAAE,4BAAAF,EAAE;EAAA,6EAA+DA,EAA/D;EAAA,GAJP;EAKfG,EAAAA,eAAe,EAAE,yBAAAH,EAAE;EAAA,gFAAkEA,EAAlE;EAAA,GALJ;EAMfI,EAAAA,gBAAgB,EAAE,0BAAAJ,EAAE;EAAA,sEACkCA,EADlC,4CACsEA,EADtE;EAAA;EANL,CAAjB;;MAeqBK;;;EACnB,uBAAc;EAAA;;EAAA;;EACZ;EAGA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAavD,IAAb,+BAAf;EAGA,UAAKwD,iBAAL,GAAyB,EAAzB;EACA,UAAKC,sBAAL,GAA8B,EAA9B;EACA,UAAKC,kBAAL,GAA0B,EAA1B;EAGA,UAAKC,gBAAL,GAAwB,EAAxB;EACA,UAAKC,aAAL,GAAqB,EAArB;EACA,UAAKC,qBAAL,GAA6B,EAA7B;EACA,UAAKC,cAAL,GAAsB,EAAtB;EACA,UAAKC,UAAL,GAAkB,EAAlB;EACA,UAAKC,kBAAL,GAA0B,EAA1B;EACA,UAAKC,oBAAL,GAA4B,EAA5B;EACA,UAAKC,cAAL,GAAsB,EAAtB;EACA,UAAKC,wBAAL,GAAgC,EAAhC;EACA,UAAKC,yBAAL,GAAiC,EAAjC;EAGA,UAAKC,aAAL,GAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAArB;EAxBY;EAyBb;;;;8BAOO;EAAA;;EACN,UAAMC,uBAAuB,GAAG,KAAKC,gCAAL,YAC1BhG,WAAS,CAAC6D,cADgB,OAAhC;;EAGA,WAAKoB,iBAAL,GAAyB1E,eAAe,CAACwF,uBAAD,CAAxC;;EAEA,UAAI,KAAKd,iBAAL,CAAuB7C,MAA3B,EAAmC;EACjC,aAAK6C,iBAAL,CAAuBgB,OAAvB,CAA+B,UAAAC,MAAM,EAAI;EACvC,UAAA,MAAI,CAACC,eAAL,CAAqBD,MAArB;;EACAA,UAAAA,MAAM,CAAC5D,gBAAP,CAAwBlC,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAAC0E,OAA3C;EACD,SAHD;EAID;EACF;;;6BAKM;EAAA;;EACL,WAAKC,iBAAL,CAAuBgB,OAAvB,CAA+B,UAAAC,MAAM,EAAI;EACvCA,QAAAA,MAAM,CAAC3D,mBAAP,CAA2BnC,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAAC0E,OAA9C;EACD,OAFD;EAGD;;;8BAQOxC,OAAO;EACbA,MAAAA,KAAK,CAACc,cAAN;EAEA,WAAK+B,aAAL,GAAqB7C,KAAK,CAAC4D,MAA3B;EACA,WAAKd,qBAAL,GAA6B,KAAKD,aAAL,CAAmBgB,YAAnB,CAAgCrG,WAAS,CAACgE,WAA1C,CAA7B;EAEA,WAAKuB,cAAL,GAAsB,KAAKe,oBAAL,CAA0B,KAAKhB,qBAA/B,CAAtB;EACA,WAAKE,UAAL,GAAkB7E,QAAQ,CAACmC,aAAT,CAAuB,KAAKyC,cAA5B,CAAlB;EACA,WAAKE,kBAAL,GAA0B,KAAKJ,aAAL,CAAmBgB,YAAnB,CAAgCrG,WAAS,CAACkE,WAA1C,CAA1B;;EAEA,UAAI,CAAC,KAAKuB,kBAAV,EAA8B;EAC5B,eAAOc,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACK,eAAT,CAAyB,KAAKS,qBAA9B,CAAd,CAAP;EACD;;EAED,WAAKI,oBAAL,cAAgC1F,WAAS,CAAC6D,cAA1C,eAA6D,KAAK4B,kBAAlE;EACA,WAAKL,gBAAL,GAAwBzE,QAAQ,CAACmC,aAAT,CAAuB,KAAK4C,oBAA5B,CAAxB;;EAEA,UAAI,CAAC,KAAKN,gBAAV,EAA4B;EAC1B,eAAOmB,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACiC,kBAAT,CAA4B,KAAKhB,kBAAjC,CAAd,CAAP;EACD;;EAED,WAAKE,cAAL,GAAsBhF,QAAQ,CAAC+F,cAAT,CAAwB,KAAKpB,qBAA7B,CAAtB;;EAEA,UAAMqB,oBAAoB,GAAG,KAAKnB,UAAL,CAAgBa,YAAhB,CAA6BrG,WAAS,CAAC+D,YAAvC,CAA7B;;EAEA,WAAK6B,wBAAL,GAAgCe,oBAAoB,KAAK,MAAzB,GAAkC,OAAlC,GAA4C,MAA5E;EACA,WAAKd,yBAAL,GAAiC,KAAKD,wBAAL,KAAkC,OAAlC,GAA4C,MAA5C,GAAqD,OAAtF;;EAEA,WAAKgB,qBAAL;;EACA,WAAKC,wBAAL;;EAEA,WAAKpB,kBAAL,GAA0B,IAA1B;EACA,WAAKL,gBAAL,GAAwB,IAAxB;EACD;;;sCAMec,QAAQ;EACtB,UAAMY,QAAQ,GAAGZ,MAAM,CAACG,YAAP,CAAoBrG,WAAS,CAACgE,WAA9B,CAAjB;EACA,UAAM+C,aAAa,GAAGpG,QAAQ,CAAC+F,cAAT,CAAwBI,QAAxB,CAAtB;;EAEA,UAAI,CAACC,aAAL,EAAoB;EAClB,eAAOR,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACM,gBAAT,CAA0BgC,QAA1B,CAAd,CAAP;EACD;;EAED,UAAME,gBAAgB,GAAG,KAAKV,oBAAL,CAA0BQ,QAA1B,CAAzB;;EACA,UAAMG,YAAY,GAAGtG,QAAQ,CAACmC,aAAT,CAAuBkE,gBAAvB,CAArB;;EAEA,UAAI,CAACC,YAAL,EAAmB;EACjB,eAAOV,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACG,YAAT,CAAsBmC,QAAtB,CAAd,CAAP;EACD;;EAED,UAAMI,gBAAgB,GAAG,KAAKC,gCAAL,CAAsCH,gBAAtC,CAAzB;;EACA,UAAMI,YAAY,GAAG7G,eAAe,CAAC2G,gBAAD,CAAf,CAAkC,CAAlC,CAArB;;EAEA,UAAI,CAACE,YAAD,IAAiB,CAACA,YAAY,CAAC1C,EAAnC,EAAuC;EACrC6B,QAAAA,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACI,kBAAT,CAA4BkC,QAA5B,CAAd;EACD;;EAED,UAAMO,qBAAqB,GAAGxG,oBAAoB,YAAKkG,aAAa,CAACrC,EAAnB,EAAlD;EAEAwB,MAAAA,MAAM,CAACoB,YAAP,CAAoBtH,WAAS,CAACoE,aAA9B,EAA6C0C,QAA7C;EACAC,MAAAA,aAAa,CAACO,YAAd,CAA2BtH,WAAS,CAACsE,eAArC,EAAsD8C,YAAY,CAAC1C,EAAnE;EAEA,UAAM6C,mBAAmB,GAAGN,YAAY,CAACZ,YAAb,CAA0BrG,WAAS,CAAC+D,YAApC,CAA5B;;EAEA,UAAI,CAACwD,mBAAL,EAA0B;EACxB,eAAOhB,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACC,gBAAT,CAA0BqC,QAA1B,CAAd,CAAP;EACD;;EAED,UAAIS,mBAAmB,KAAK,MAA5B,EAAoC;EAClCR,QAAAA,aAAa,CAACS,KAAd,CAAoBC,SAApB,aAAmCV,aAAa,CAACW,YAAjD;EACAxB,QAAAA,MAAM,CAACoB,YAAP,CAAoBtH,WAAS,CAACmE,aAA9B,EAA6C,MAA7C;EACA4C,QAAAA,aAAa,CAACO,YAAd,CAA2BtH,WAAS,CAACqE,WAArC,EAAkD,OAAlD;EACAgD,QAAAA,qBAAqB,CAACpB,OAAtB,CAA8B,UAAAhF,OAAO,EAAI;EACvCA,UAAAA,OAAO,CAACqG,YAAR,CAAqBtH,WAAS,CAACuE,QAA/B,EAAyC,GAAzC;EACD,SAFD;EAGD,OAPD,MAOO;EACL2B,QAAAA,MAAM,CAACoB,YAAP,CAAoBtH,WAAS,CAACmE,aAA9B,EAA6C,OAA7C;EACA4C,QAAAA,aAAa,CAACO,YAAd,CAA2BtH,WAAS,CAACqE,WAArC,EAAkD,MAAlD;EACAgD,QAAAA,qBAAqB,CAACpB,OAAtB,CAA8B,UAAAhF,OAAO,EAAI;EACvCA,UAAAA,OAAO,CAACqG,YAAR,CAAqBtH,WAAS,CAACuE,QAA/B,EAAyC,IAAzC;EACD,SAFD;EAGD;EACF;;;uDAOgCoD,MAAM;EACrC,aAAO,KAAK7B,aAAL,CACJ9E,GADI,CAEH,UAAA4G,GAAG;EAAA,yBAAOD,IAAP,iBAAkB3H,WAAS,CAAC8D,kBAA5B,kBAAsD8D,GAAtD,eAA8D5H,WAAS,CAACgE,WAAxE;EAAA,OAFA,EAIJ9C,IAJI,CAIC,IAJD,CAAP;EAKD;;;uDAOgCyG,MAAM;EACrC,aAAO,KAAK7B,aAAL,CAAmB9E,GAAnB,CAAuB,UAAA4G,GAAG;EAAA,yBAAOD,IAAP,iBAAkBC,GAAlB;EAAA,OAA1B,EAAmD1G,IAAnD,CAAwD,IAAxD,CAAP;EACD;;;2CAOoBwD,IAAI;EACvB,wBAAW1E,WAAS,CAAC8D,kBAArB,eAA4CY,EAA5C;EACD;;;8CAMuB;EAAA;;EACtB,UAAI,KAAKU,gBAAL,CAAsByC,YAAtB,CAAmC7H,WAAS,CAACiE,oBAA7C,CAAJ,EAAwE;EAExE,UAAM6D,cAAc,aAAM,KAAKpC,oBAAX,eAAoC1F,WAAS,CAACqE,WAA9C,MAApB;EACA,UAAM0D,OAAO,GAAGxH,eAAe,WAAI,KAAKmF,oBAAT,eAAkC1F,WAAS,CAAC+D,YAA5C,OAA/B;EACA,UAAMiE,UAAU,GAAGzH,eAAe,CAACuH,cAAD,CAAlC;;EAEA,UAAM/B,uBAAuB,GAAG,KAAKC,gCAAL,CAAsC,KAAKN,oBAA3C,CAAhC;;EACA,UAAMuC,UAAU,GAAG1H,eAAe,CAACwF,uBAAD,CAAlC;EAEAiC,MAAAA,UAAU,CAAC/B,OAAX,CAAmB,UAAAiC,OAAO,EAAI;EAC5B,YAAIA,OAAO,KAAK,MAAI,CAACvC,cAArB,EAAqCuC,OAAO,CAACV,KAAR,CAAcC,SAAd,GAA0B,IAA1B;EACtC,OAFD;EAIA5G,MAAAA,oBAAoB,CAACiH,cAAD,CAApB,CAAqC7B,OAArC,CAA6C,UAAAhF,OAAO,EAAI;EACtDA,QAAAA,OAAO,CAACqG,YAAR,CAAqBtH,WAAS,CAACuE,QAA/B,EAAyC,IAAzC;EACD,OAFD;;EAIA,WAAK4D,4BAAL,CAAkCJ,OAAlC,EAA2C/H,WAAS,CAAC+D,YAArD,EAAmE,MAAnE,EAA2E,OAA3E;;EACA,WAAKoE,4BAAL,CAAkCF,UAAlC,EAA8CjI,WAAS,CAACmE,aAAxD,EAAuE,MAAvE,EAA+E,OAA/E;;EACA,WAAKgE,4BAAL,CAAkCH,UAAlC,EAA8ChI,WAAS,CAACqE,WAAxD,EAAqE,OAArE,EAA8E,MAA9E;EACD;;;iDAK0B;EAAA;;EACzB,WAAKmB,UAAL,CAAgB8B,YAAhB,CAA6BtH,WAAS,CAAC+D,YAAvC,EAAqD,KAAK6B,wBAA1D;;EACA,WAAKP,aAAL,CAAmBiC,YAAnB,CAAgCtH,WAAS,CAACmE,aAA1C,EAAyD,KAAKyB,wBAA9D;;EACA,WAAKD,cAAL,CAAoB2B,YAApB,CAAiCtH,WAAS,CAACqE,WAA3C,EAAwD,KAAKwB,yBAA7D;;EAEA,UAAMuC,kBAAkB,cAAO,KAAK9C,qBAAZ,CAAxB;EACAzE,MAAAA,oBAAoB,CAACuH,kBAAD,CAApB,CAAyCnC,OAAzC,CAAiD,UAAAhF,OAAO,EAAI;EAC1D,YAAMoH,KAAK,GAAG,MAAI,CAACzC,wBAAL,KAAkC,MAAlC,GAA2C,GAA3C,GAAiD,IAA/D;EACA3E,QAAAA,OAAO,CAACqG,YAAR,CAAqBtH,WAAS,CAACuE,QAA/B,EAAyC8D,KAAzC;EACD,OAHD;;EAKA,UAAI,KAAK1C,cAAL,CAAoB6B,KAApB,CAA0BC,SAA9B,EAAyC;EACvC,aAAK9B,cAAL,CAAoB6B,KAApB,CAA0BC,SAA1B,GAAsC,IAAtC;EACD,OAFD,MAEO;EACL,aAAK9B,cAAL,CAAoB6B,KAApB,CAA0BC,SAA1B,aAAyC,KAAK9B,cAAL,CAAoB+B,YAA7D;EACD;EACF;;;mDAS4BY,UAAUC,eAAeC,cAAcC,UAAU;EAC5EH,MAAAA,QAAQ,CAACrC,OAAT,CAAiB,UAAAhF,OAAO,EAAI;EAC1B,YAAIA,OAAO,CAAC4G,YAAR,CAAqBU,aAArB,EAAoCC,YAApC,CAAJ,EAAuD;EACrDvH,UAAAA,OAAO,CAACqG,YAAR,CAAqBiB,aAArB,EAAoCE,QAApC;EACD;EACF,OAJD;EAKD;;;;IAlPoClH;;ECrCvC,IAAM5B,UAAQ,GAAG;EACfE,EAAAA,GAAG,EAAE,CADU;EAEfD,EAAAA,KAAK,EAAE,EAFQ;EAGf8I,EAAAA,MAAM,EAAE,EAHO;EAIf5I,EAAAA,QAAQ,EAAE,EAJK;EAKfC,EAAAA,UAAU,EAAE;EALG,CAAjB;EAQA,IAAMC,WAAS,GAAG;EAEhB2I,EAAAA,aAAa,EAAE,eAFC;EAIhB3E,EAAAA,WAAW,EAAE,aAJG;EAKhBE,EAAAA,WAAW,EAAE,aALG;EAMhBH,EAAAA,YAAY,EAAE,cANE;EAQhBQ,EAAAA,QAAQ,EAAE,UARM;EAShBqE,EAAAA,aAAa,EAAE,eATC;EAUhBxE,EAAAA,aAAa,EAAE,eAVC;EAWhBE,EAAAA,eAAe,EAAE,iBAXD;EAYhBH,EAAAA,aAAa,EAAE,eAZC;EAahB0E,EAAAA,IAAI,EAAE;EAbU,CAAlB;EAgBA,IAAMzI,QAAM,GAAG;EACbC,EAAAA,OAAO,EAAE,SADI;EAEbC,EAAAA,KAAK,EAAE;EAFM,CAAf;EAKA,IAAMkE,UAAQ,GAAG;EACfK,EAAAA,eAAe,6DADA;EAEfiE,EAAAA,iBAAiB,EAAE,2BAAAnB,IAAI;EAAA,uEAAyDA,IAAzD;EAAA,GAFR;EAGfoB,EAAAA,aAAa,EAAE,uBAAApB,IAAI;EAAA,yDAA2CA,IAA3C;EAAA;EAHJ,CAAjB;;MAWqBqB;;;EACnB,sBAAc;EAAA;;EAAA;;EACZ;EAEA,UAAKhE,OAAL,GAAe,MAAKA,OAAL,CAAavD,IAAb,+BAAf;EACA,UAAKwH,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BxH,IAA1B,+BAA5B;EACA,UAAKyH,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBzH,IAAzB,+BAA3B;EACA,UAAK0H,eAAL,GAAuB,MAAKA,eAAL,CAAqB1H,IAArB,+BAAvB;EACA,UAAK2H,YAAL,GAAoB,MAAKA,YAAL,CAAkB3H,IAAlB,+BAApB;EACA,UAAK4H,qBAAL,GAA6B,MAAKA,qBAAL,CAA2B5H,IAA3B,+BAA7B;EACA,UAAK6H,mBAAL,GAA2B,MAAKA,mBAAL,CAAyB7H,IAAzB,+BAA3B;EAGA,UAAK8H,qBAAL,GAA6B,IAA7B;EACA,UAAKC,eAAL,GAAuB,IAAvB;EACA,UAAKC,mBAAL,GAA2B,IAA3B;EACA,UAAKC,oBAAL,GAA4B,EAA5B;EACA,UAAKC,iBAAL,GAAyB,IAAzB;EACA,UAAKC,iBAAL,GAAyB,EAAzB;EACA,UAAKC,mBAAL,GAA2B,EAA3B;EACA,UAAKC,qBAAL,GAA6B,EAA7B;EAGA,UAAKC,gBAAL,GAAwB,EAAxB;EACA,UAAKC,UAAL,GAAkB,EAAlB;EAGA,UAAKC,sBAAL,cAAkCjK,WAAS,CAAC2I,aAA5C;EACA,UAAKuB,mBAAL,cAA+BlK,WAAS,CAACgE,WAAzC;EA3BY;EA4Bb;;;;8BAOO;EAAA;;EACN,WAAKgG,UAAL,GAAkBzJ,eAAe,WAAI,KAAK0J,sBAAT,EAAjC;EACA,WAAKF,gBAAL,GAAwBxJ,eAAe,WAClC,KAAK0J,sBAD6B,gBACD,KAAKC,mBADJ,EAAvC;;EAIA,UAAI,KAAKF,UAAL,CAAgB5H,MAApB,EAA4B;EAC1B,aAAK4H,UAAL,CAAgB/D,OAAhB,CAAwB,UAAAkE,QAAQ;EAAA,iBAAI,MAAI,CAACC,cAAL,CAAoBD,QAApB,CAAJ;EAAA,SAAhC;EACD;;EAED,WAAKJ,gBAAL,CAAsB9D,OAAtB,CAA8B,UAAAC,MAAM,EAAI;EACtCA,QAAAA,MAAM,CAAC5D,gBAAP,CAAwBlC,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAAC0E,OAA3C;EACAkB,QAAAA,MAAM,CAAC5D,gBAAP,CAAwBlC,QAAM,CAACC,OAA/B,EAAwC,MAAI,CAAC8I,eAA7C;EACD,OAHD;EAID;;;6BAKM;EAAA;;EACL,WAAKY,gBAAL,CAAsB9D,OAAtB,CAA8B,UAAAC,MAAM,EAAI;EACtCA,QAAAA,MAAM,CAAC3D,mBAAP,CAA2BnC,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAAC0E,OAA9C;EACAkB,QAAAA,MAAM,CAAC3D,mBAAP,CAA2BnC,QAAM,CAACC,OAAlC,EAA2C,MAAI,CAAC8I,eAAhD;EACD,OAHD;EAID;;;8BASO3G,OAAO6H,KAAK;EAAA;;EAClB7H,MAAAA,KAAK,CAACc,cAAN;EACAd,MAAAA,KAAK,CAAC8H,eAAN;;EAEA,UAAI,KAAKf,qBAAT,EAAgC;EAC9B,aAAKI,iBAAL,GAAyB,KAAzB;;EACA,aAAKP,YAAL,CAAkB5G,KAAlB;;EACA,aAAKmH,iBAAL,GAAyB,IAAzB;EACD;;EAGD,WAAKJ,qBAAL,GAA6B/G,KAAK,CAAC4D,MAAnC;EACA,WAAKwD,iBAAL,GAAyB,KAAKL,qBAAL,CAA2BlD,YAA3B,CAAwCrG,WAAS,CAACkE,WAAlD,CAAzB;;EAEA,UAAI,CAAC,KAAK0F,iBAAV,EAA6B;EAC3B,eAAOrD,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACK,eAAvB,CAAP;EACD;;EAGD,WAAKgF,mBAAL,cAA+B7J,WAAS,CAAC2I,aAAzC,gBAA2D,KAAKiB,iBAAhE;EACA,WAAKJ,eAAL,GAAuB7I,QAAQ,CAACmC,aAAT,CAAuB,KAAK+G,mBAA5B,CAAvB;;EAEA,UAAI,CAAC,KAAKL,eAAV,EAA2B;EACzB,eAAOjD,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACsE,iBAAT,CAA2B,KAAKe,mBAAhC,CAAd,CAAP;EACD;;EAGD,WAAKC,qBAAL,GAA6B,KAAKP,qBAAL,CAA2BlD,YAA3B,CAAwCrG,WAAS,CAACgE,WAAlD,CAA7B;EACA,WAAKyF,mBAAL,GAA2B9I,QAAQ,CAAC+F,cAAT,CAAwB,KAAKoD,qBAA7B,CAA3B;;EAGA,WAAKP,qBAAL,CAA2BjC,YAA3B,CAAwCtH,WAAS,CAACmE,aAAlD,EAAiE,MAAjE;;EACA,WAAKqF,eAAL,CAAqBlC,YAArB,CAAkCtH,WAAS,CAAC+D,YAA5C,EAA0D,MAA1D;;EAGA,WAAKwF,qBAAL,CAA2BhH,mBAA3B,CAA+CnC,QAAM,CAACE,KAAtD,EAA6D,KAAK0E,OAAlE;;EACA,WAAKuE,qBAAL,CAA2BjH,gBAA3B,CAA4ClC,QAAM,CAACE,KAAnD,EAA0D,KAAK8I,YAA/D;;EAEAzI,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,QAAM,CAACC,OAAjC,EAA0C,KAAKgJ,qBAA/C;EACA1I,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,QAAM,CAACE,KAAjC,EAAwC,KAAKgJ,mBAA7C;;EAGA,UAAInI,SAAJ,EAAe;EACbR,QAAAA,QAAQ,CAAC8B,IAAT,CAAc+E,KAAd,CAAoB+C,MAApB,GAA6B,SAA7B;EACD;;EAED,WAAKb,oBAAL,GAA4B,KAAKc,iBAAL,CAAuB,KAAKX,mBAA5B,CAA5B;EAEA,WAAKY,iBAAL,GAAyB,KAAKf,oBAAL,CAA0B,CAA1B,CAAzB;EACA,WAAKgB,gBAAL,GAAwB,KAAKhB,oBAAL,CAA0B,KAAKA,oBAAL,CAA0BtH,MAA1B,GAAmC,CAA7D,CAAxB;EAEA,WAAKqI,iBAAL,CAAuBnI,gBAAvB,CAAwClC,QAAM,CAACC,OAA/C,EAAwD,KAAK4I,oBAA7D;EACA,WAAKyB,gBAAL,CAAsBpI,gBAAtB,CAAuClC,QAAM,CAACC,OAA9C,EAAuD,KAAK6I,mBAA5D;;EAEA,UAAImB,GAAG,IAAIA,GAAG,KAAK1K,UAAQ,CAACG,QAA5B,EAAsC;EACpC,aAAK4K,gBAAL,CAAsBnH,KAAtB;EACD,OAFD,MAEO;EACL,aAAKkH,iBAAL,CAAuBlH,KAAvB;EACD;;EAED,WAAKmG,oBAAL,CAA0BzD,OAA1B,CAAkC,UAAA0E,IAAI,EAAI;EACxCA,QAAAA,IAAI,CAACrD,YAAL,CAAkBtH,WAAS,CAACuE,QAA5B,EAAsC,GAAtC;EACAoG,QAAAA,IAAI,CAACrI,gBAAL,CAAsBlC,QAAM,CAACE,KAA7B,EAAoC,MAAI,CAAC8I,YAAzC;EACD,OAHD;;EAKA,WAAKwB,YAAL,WAAqB,KAAKf,mBAA1B,YAAsD;EAAExH,QAAAA,SAAS,EAAE;EAAb,OAAtD;EACD;;;2CAMoBG,OAAO;EAC1B,UAAMa,QAAQ,GAAGb,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAACC,KAAzB,IAAkC4C,KAAK,CAACa,QAAzD;EACA,UAAMF,MAAM,GAAGX,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAACE,GAAxC;;EAEA,UAAIwD,QAAQ,IAAIF,MAAhB,EAAwB;EACtB,aAAKiG,YAAL,CAAkB5G,KAAlB;EACD;EACF;;;0CAMmBA,OAAO;EACzB,UAAMa,QAAQ,GAAGb,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAACC,KAAzB,IAAkC4C,KAAK,CAACa,QAAzD;EACA,UAAMF,MAAM,GAAGX,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAACE,GAAxC;;EAEA,UAAIsD,MAAM,IAAI,CAACE,QAAf,EAAyB;EACvB,aAAK+F,YAAL,CAAkB5G,KAAlB;EACD;EACF;;;sCAMeA,OAAO;EACrB,UAAIA,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAACG,QAAzB,IAAqC0C,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAACI,UAAlE,EAA8E;EAC5E,aAAKiF,OAAL,CAAaxC,KAAb,EAAoBA,KAAK,CAACY,KAA1B;EACD;EACF;;;mCAMYZ,OAAO;EAAA;;EAClBA,MAAAA,KAAK,CAACc,cAAN;EAEA,WAAKuH,YAAL;;EAEA,WAAKtB,qBAAL,CAA2BjC,YAA3B,CAAwCtH,WAAS,CAACmE,aAAlD,EAAiE,OAAjE;;EACA,WAAKqF,eAAL,CAAqBlC,YAArB,CAAkCtH,WAAS,CAAC+D,YAA5C,EAA0D,OAA1D;;EAEA,WAAK2F,oBAAL,CAA0BzD,OAA1B,CAAkC,UAAA0E,IAAI,EAAI;EACxCA,QAAAA,IAAI,CAACrD,YAAL,CAAkBtH,WAAS,CAACuE,QAA5B,EAAsC,IAAtC;EACAoG,QAAAA,IAAI,CAACpI,mBAAL,CAAyBnC,QAAM,CAACE,KAAhC,EAAuC,MAAI,CAAC8I,YAA5C;EACD,OAHD;;EAKA,WAAKG,qBAAL,CAA2BhH,mBAA3B,CAA+CnC,QAAM,CAACE,KAAtD,EAA6D,KAAK8I,YAAlE;;EACA,WAAKG,qBAAL,CAA2BjH,gBAA3B,CAA4ClC,QAAM,CAACE,KAAnD,EAA0D,KAAK0E,OAA/D;;EAEArE,MAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,QAAM,CAACC,OAApC,EAA6C,KAAKgJ,qBAAlD;;EAEA,UAAIlI,SAAJ,EAAe;EACbR,QAAAA,QAAQ,CAAC8B,IAAT,CAAc+E,KAAd,CAAoB+C,MAApB,GAA6B,MAA7B;EACD;;EAED5J,MAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,QAAM,CAACE,KAApC,EAA2C,KAAKgJ,mBAAhD;;EAEA,UAAI,KAAKK,iBAAT,EAA4B;EAC1B,aAAKmB,kBAAL;EACD;;EAED,WAAKvB,qBAAL,GAA6B,IAA7B;EACA,WAAKK,iBAAL,GAAyB,IAAzB;EACA,WAAKJ,eAAL,GAAuB,IAAvB;EACD;;;4CAMqBhH,OAAO;EAC3B,UAAIA,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAAC+I,MAA7B,EAAqC;EACnC,aAAKU,YAAL,CAAkB5G,KAAlB;EACD;EACF;;;0CAMmBA,OAAO;EACzB,UAAIA,KAAK,CAAC4D,MAAN,KAAiB,KAAKmD,qBAAtB,IAA+C/G,KAAK,CAAC4D,MAAN,KAAiB,KAAKqD,mBAAzE,EAA8F;EAC5F,aAAKL,YAAL,CAAkB5G,KAAlB;EACD;EACF;;;2CAKoB;EACnB,WAAK+G,qBAAL,CAA2BjC,YAA3B,CAAwCtH,WAAS,CAAC+K,SAAlD,EAA6D,IAA7D;;EACA,WAAKxB,qBAAL,CAA2BhG,KAA3B;;EACA,WAAKgG,qBAAL,CAA2ByB,eAA3B,CAA2ChL,WAAS,CAAC+K,SAArD;EACD;;;wCAOiBpD,MAAM;EACtB,aAAOpH,eAAe,WAAIoH,IAAJ,6BAA2BA,IAA3B,yBAAtB;EACD;;;qCAMcwC,UAAU;EACvB,UAAMc,UAAU,GAAGd,QAAQ,CAAC9D,YAAT,CAAsBrG,WAAS,CAAC2I,aAAhC,CAAnB;EAIA,UAAMuC,YAAY,cAAOlL,WAAS,CAAC2I,aAAjB,gBAAmCsC,UAAnC,QAAlB;EACA,UAAME,qBAAqB,aAAMD,YAAN,eAA3B;EACA,UAAME,YAAY,GAAGzK,QAAQ,CAACmC,aAAT,WAA0BoI,YAA1B,WAArB;;EAIA,UAAI,CAACE,YAAL,EAAmB;EACjB,eAAO7E,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACuE,aAAT,CAAuBmC,YAAvB,CAAd,CAAP;EACD;;EAED,UAAMG,cAAc,GAAG1K,QAAQ,CAACmC,aAAT,WAA0BoI,YAA1B,gBAA4C,KAAKhB,mBAAjD,EAAvB;EAEAmB,MAAAA,cAAc,CAAC/D,YAAf,CAA4BtH,WAAS,CAACoE,aAAtC,EAAqDgH,YAAY,CAAC1G,EAAlE;EACA2G,MAAAA,cAAc,CAAC/D,YAAf,CAA4BtH,WAAS,CAAC4I,aAAtC,EAAqD,MAArD;EACAyC,MAAAA,cAAc,CAAC/D,YAAf,CAA4BtH,WAAS,CAACmE,aAAtC,EAAqD,OAArD;EACAiH,MAAAA,YAAY,CAAC9D,YAAb,CAA0BtH,WAAS,CAACsE,eAApC,EAAqD+G,cAAc,CAAC3G,EAApE;EAEA,UAAM4G,qBAAqB,GAAG/K,eAAe,CAAC4K,qBAAD,CAA7C;EAIAG,MAAAA,qBAAqB,CAACrF,OAAtB,CAA8B,UAAAsF,IAAI;EAAA,eAAIA,IAAI,CAACjE,YAAL,CAAkBtH,WAAS,CAAC6I,IAA5B,EAAkC,MAAlC,CAAJ;EAAA,OAAlC;;EAEA,UAAM2C,mBAAmB,GAAG,KAAKhB,iBAAL,CAAuBU,YAAvB,CAA5B;;EAIAM,MAAAA,mBAAmB,CAACvF,OAApB,CAA4B,UAAA0E,IAAI,EAAI;EAClCA,QAAAA,IAAI,CAACrD,YAAL,CAAkBtH,WAAS,CAAC6I,IAA5B,EAAkC,UAAlC;EACA8B,QAAAA,IAAI,CAACrD,YAAL,CAAkBtH,WAAS,CAACuE,QAA5B,EAAsC,IAAtC;EACD,OAHD;EAID;;;;IAhSmChD;;ECxCtC,IAAM5B,UAAQ,GAAG;EACf+I,EAAAA,MAAM,EAAE;EADO,CAAjB;EAIA,IAAM1I,WAAS,GAAG;EAEhByL,EAAAA,UAAU,EAAE,YAFI;EAGhBC,EAAAA,iBAAiB,EAAE,mBAHH;EAKhB3H,EAAAA,YAAY,EAAE,cALE;EAMhB4H,EAAAA,UAAU,EAAE,YANI;EAOhBzH,EAAAA,WAAW,EAAE,aAPG;EAShBG,EAAAA,WAAW,EAAE,aATG;EAUhBuH,EAAAA,UAAU,EAAE,YAVI;EAWhB/C,EAAAA,IAAI,EAAE,MAXU;EAYhBtE,EAAAA,QAAQ,EAAE,UAZM;EAchBsH,EAAAA,SAAS,EAAE;EAdK,CAAlB;EAiBA,IAAMzL,QAAM,GAAG;EACbC,EAAAA,OAAO,EAAE,SADI;EAEbC,EAAAA,KAAK,EAAE,OAFM;EAGbwL,EAAAA,MAAM,EAAE;EAHK,CAAf;EAMA,IAAMtH,UAAQ,GAAG;EACfuH,EAAAA,kBAAkB,EAChB,kFAFa;EAGfC,EAAAA,iBAAiB,EACf,4HAJa;EAKfC,EAAAA,cAAc,EAAE,wBAAAvH,EAAE;EAAA,oDACkBA,EADlB,mDAC6DA,EAD7D;EAAA;EALH,CAAjB;;MAcqBwH;;;EACnB,mBAAc;EAAA;;EAAA;;EACZ;EAGA,UAAKlH,OAAL,GAAe,MAAKA,OAAL,CAAavD,IAAb,+BAAf;EACA,UAAK2H,YAAL,GAAoB,MAAKA,YAAL,CAAkB3H,IAAlB,+BAApB;EACA,UAAK0K,mBAAL,GAA2B,MAAKA,mBAAL,CAAyB1K,IAAzB,+BAA3B;EACA,UAAK4H,qBAAL,GAA6B,MAAKA,qBAAL,CAA2B5H,IAA3B,+BAA7B;EAGA,UAAK2K,OAAL,GAAe,EAAf;EACA,UAAKC,aAAL,GAAqB,EAArB;EAGA,UAAKC,kBAAL,GAA0B,EAA1B;EACA,UAAKC,mBAAL,GAA2B,EAA3B;EACA,UAAKC,YAAL,GAAoB,EAApB;EACA,UAAKC,cAAL,GAAsB,EAAtB;EACA,UAAKC,uBAAL,GAA+B,EAA/B;EACA,UAAKC,oBAAL,GAA4B,EAA5B;EACA,UAAKC,wBAAL,GAAgC,EAAhC;EAGA,UAAKC,mBAAL,cAA+B7M,WAAS,CAACyL,UAAzC;EAvBY;EAwBb;;;;8BAOO;EAAA;;EACN,WAAKW,OAAL,GAAe7L,eAAe,CAAC,KAAKsM,mBAAN,CAA9B;EACA,WAAKR,aAAL,GAAqB9L,eAAe,YAAKP,WAAS,CAAC0L,iBAAf,OAApC;EAEA7K,MAAAA,oBAAoB,CAAC,KAAKgM,mBAAN,CAApB,CAA+C5G,OAA/C,CAAuD,UAAAhF,OAAO,EAAI;EAChEA,QAAAA,OAAO,CAACqG,YAAR,CAAqBtH,WAAS,CAACuE,QAA/B,EAAyC,IAAzC;EACD,OAFD;;EAIA,UAAI,KAAK6H,OAAL,CAAahK,MAAjB,EAAyB;EACvB,aAAKgK,OAAL,CAAanG,OAAb,CAAqB,UAAA6G,QAAQ,EAAI;EAC/B,UAAA,MAAI,CAACC,WAAL,CAAiBD,QAAjB;EACD,SAFD;EAGD;;EAED,UAAI,KAAKT,aAAL,CAAmBjK,MAAvB,EAA+B;EAC7B,aAAKiK,aAAL,CAAmBpG,OAAnB,CAA2B,UAAAC,MAAM,EAAI;EACnCA,UAAAA,MAAM,CAAC5D,gBAAP,CAAwBlC,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAAC0E,OAA3C;EACD,SAFD;EAGD;EACF;;;6BAKM;EAAA;;EACL,WAAKqH,aAAL,CAAmBpG,OAAnB,CAA2B,UAAAC,MAAM,EAAI;EACnCA,QAAAA,MAAM,CAAC3D,mBAAP,CAA2BnC,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAAC0E,OAA9C;EACD,OAFD;EAGD;;;8BAQOxC,OAAO;EAAA;;EACbA,MAAAA,KAAK,CAACc,cAAN;EACA,WAAKgJ,kBAAL,GAA0B9J,KAAK,CAAC4D,MAAhC;EACA,WAAKqG,cAAL,GAAsB,KAAKH,kBAAL,CAAwBjG,YAAxB,CAAqCrG,WAAS,CAAC0L,iBAA/C,CAAtB;;EAEA,UAAI,CAAC,KAAKe,cAAV,EAA0B;EACxB,eAAOlG,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACuH,kBAAvB,CAAP;EACD;;EAED,WAAKQ,mBAAL,GAA2B5L,QAAQ,CAACmC,aAAT,YACrB9C,WAAS,CAACyL,UADW,gBACI,KAAKgB,cADT,SAA3B;EAGA,WAAKE,oBAAL,cAAgC3M,WAAS,CAACkE,WAA1C,eAA0D,KAAKuI,cAA/D;EACA,WAAKD,YAAL,GAAoB,KAAKD,mBAAL,CAAyBzJ,aAAzB,CAAuC,KAAK6J,oBAA5C,CAApB;EACA,WAAKC,wBAAL,GAAgCrM,eAAe,WAC1C,KAAKoM,oBADqC,eACZ3M,WAAS,CAAC2L,UADE,OAA/C;EAIA9K,MAAAA,oBAAoB,CAAC,KAAK8L,oBAAN,CAApB,CAAgD1G,OAAhD,CAAwD,UAAAhF,OAAO,EAAI;EACjEA,QAAAA,OAAO,CAACqG,YAAR,CAAqBtH,WAAS,CAACuE,QAA/B,EAAyC,GAAzC;EACD,OAFD;;EAIA,WAAKyI,iBAAL;;EACA,WAAKpC,YAAL,CAAkB,KAAK+B,oBAAvB;;EACA,WAAKJ,mBAAL,CAAyBjF,YAAzB,CAAsCtH,WAAS,CAACqE,WAAhD,EAA6D,OAA7D;;EACA,WAAKkI,mBAAL,CAAyBjF,YAAzB,CAAsCtH,WAAS,CAAC+D,YAAhD,EAA8D,MAA9D;;EAEA,WAAKyI,YAAL,CAAkBlF,YAAlB,CAA+BtH,WAAS,CAACuE,QAAzC,EAAmD,IAAnD;;EACA,WAAKiI,YAAL,CAAkBjJ,KAAlB;;EAEA,WAAKgJ,mBAAL,CAAyBU,SAAzB,GAAqC,CAArC;;EAEA,UAAI9L,SAAJ,EAAe;EACb,aAAKoL,mBAAL,CAAyB/E,KAAzB,CAA+B+C,MAA/B,GAAwC,SAAxC;EACD;;EAGD5J,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,QAAM,CAACC,OAAjC,EAA0C,KAAKgJ,qBAA/C;EACA1I,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,QAAM,CAACE,KAAjC,EAAwC,KAAK6L,mBAA7C;;EACA,WAAKS,wBAAL,CAA8B3G,OAA9B,CAAsC,UAAAC,MAAM,EAAI;EAC9CA,QAAAA,MAAM,CAAC5D,gBAAP,CAAwBlC,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAAC8I,YAA3C;EACD,OAFD;EAGD;;;kCAMW0D,UAAU;EACpB,UAAMI,OAAO,GAAGJ,QAAQ,CAACzG,YAAT,CAAsBrG,WAAS,CAACyL,UAAhC,CAAhB;;EAEA,UAAI,CAACyB,OAAL,EAAc;EACZ,eAAO3G,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACwH,iBAAvB,CAAP;EACD;;EAED,UAAMmB,KAAK,GAAGL,QAAQ,CAAChK,aAAT,YAA2B9C,WAAS,CAACkE,WAArC,eAAqDgJ,OAArD,QAAd;;EAEA,UAAI,CAACC,KAAL,EAAY;EACV,eAAO5G,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACyH,cAAT,CAAwBiB,OAAxB,CAAd,CAAP;EACD;;EAED,UAAME,YAAY,GAAGzM,QAAQ,CAACmC,aAAT,YAA2B9C,WAAS,CAACyL,UAArC,eAAoDyB,OAApD,QAArB;EAEAE,MAAAA,YAAY,CAAC9F,YAAb,CAA0BtH,WAAS,CAACqE,WAApC,EAAiD,MAAjD;EACA+I,MAAAA,YAAY,CAAC9F,YAAb,CAA0BtH,WAAS,CAAC+D,YAApC,EAAkD,OAAlD;EACAoJ,MAAAA,KAAK,CAAC7F,YAAN,CAAmBtH,WAAS,CAAC4L,UAA7B,EAAyC,MAAzC;EACAuB,MAAAA,KAAK,CAAC7F,YAAN,CAAmBtH,WAAS,CAAC6I,IAA7B,EAAmC,QAAnC;EACD;;;mCAMYrG,OAAO;EAAA;;EAClBA,MAAAA,KAAK,CAACc,cAAN;;EACA,WAAKiJ,mBAAL,CAAyBjF,YAAzB,CAAsCtH,WAAS,CAAC+D,YAAhD,EAA8D,OAA9D;;EACA,WAAK+G,kBAAL;;EACA,WAAKuC,oBAAL;;EACA,WAAKxC,YAAL;;EACA,WAAK0B,mBAAL,CAAyBjF,YAAzB,CAAsCtH,WAAS,CAACqE,WAAhD,EAA6D,MAA7D;;EACA,WAAKmI,YAAL,CAAkBxB,eAAlB,CAAkChL,WAAS,CAACuE,QAA5C;;EAEA1D,MAAAA,oBAAoB,CAAC,KAAK8L,oBAAN,CAApB,CAAgD1G,OAAhD,CAAwD,UAAAhF,OAAO,EAAI;EACjEA,QAAAA,OAAO,CAACqG,YAAR,CAAqBtH,WAAS,CAACuE,QAA/B,EAAyC,IAAzC;EACD,OAFD;;EAIA,UAAIpD,SAAJ,EAAe;EACb,aAAKoL,mBAAL,CAAyB/E,KAAzB,CAA+B+C,MAA/B,GAAwC,MAAxC;EACD;;EAGD5J,MAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,QAAM,CAACC,OAApC,EAA6C,KAAKgJ,qBAAlD;EACA1I,MAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,QAAM,CAACE,KAApC,EAA2C,KAAK6L,mBAAhD;;EACA,WAAKS,wBAAL,CAA8B3G,OAA9B,CAAsC,UAAAC,MAAM,EAAI;EAC9CA,QAAAA,MAAM,CAAC3D,mBAAP,CAA2BnC,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAAC8I,YAA9C;EACD,OAFD;;EAIA,WAAKqD,cAAL,GAAsB,IAAtB;EACD;;;0CAMmBjK,OAAO;EACzB,UAAIA,KAAK,CAAC4D,MAAN,KAAiB,KAAKmG,mBAA1B,EAA+C;EAC7C,aAAKnD,YAAL,CAAkB5G,KAAlB;EACD;EACF;;;4CAMqBA,OAAO;EAC3B,UAAIA,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAAC+I,MAA7B,EAAqC;EACnC,aAAKU,YAAL,CAAkB5G,KAAlB;EACD;EACF;;;2CAMoB;EACnB,WAAK8J,kBAAL,CAAwBhF,YAAxB,CAAqCtH,WAAS,CAACuE,QAA/C,EAAyD,IAAzD;;EACA,WAAK+H,kBAAL,CAAwB/I,KAAxB;;EACA,WAAK+I,kBAAL,CAAwBtB,eAAxB,CAAwChL,WAAS,CAACuE,QAAlD;EACD;;;6CAKsB;EACrB5D,MAAAA,QAAQ,CAAC8B,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B5C,WAAS,CAAC6L,SAAzC;EACAlL,MAAAA,QAAQ,CAAC2M,eAAT,CAAyB5K,SAAzB,CAAmCE,MAAnC,CAA0C5C,WAAS,CAAC6L,SAApD;EACD;;;0CAKmB;EAClBlL,MAAAA,QAAQ,CAAC8B,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B3C,WAAS,CAAC6L,SAAtC;EACAlL,MAAAA,QAAQ,CAAC2M,eAAT,CAAyB5K,SAAzB,CAAmCC,GAAnC,CAAuC3C,WAAS,CAAC6L,SAAjD;EACD;;;;IApNgCtK;;ECzCnC,IAAM5B,UAAQ,GAAG;EACf+I,EAAAA,MAAM,EAAE;EADO,CAAjB;EAIA,IAAM1I,WAAS,GAAG;EAChBuN,EAAAA,YAAY,EAAE,cADE;EAEhBxJ,EAAAA,YAAY,EAAE,cAFE;EAGhBC,EAAAA,WAAW,EAAE,aAHG;EAIhB6E,EAAAA,IAAI,EAAE,MAJU;EAKhB2E,EAAAA,gBAAgB,EAAE,kBALF;EAMhBC,EAAAA,eAAe,EAAE,cAND;EAOhBC,EAAAA,gBAAgB,EAAE;EAPF,CAAlB;EAUA,IAAMtN,QAAM,GAAG;EACbE,EAAAA,KAAK,EAAE,OADM;EAEbqN,EAAAA,SAAS,EAAE,WAFE;EAGbC,EAAAA,QAAQ,EAAE,UAHG;EAIbC,EAAAA,KAAK,EAAE,OAJM;EAKbC,EAAAA,IAAI,EAAE,MALO;EAMbzN,EAAAA,OAAO,EAAE;EANI,CAAf;EASA,IAAMmE,UAAQ,GAAG;EACfuJ,EAAAA,WAAW,EAAE,mCADE;EAEfC,EAAAA,gBAAgB,EAAE,0BAAAtJ,EAAE;EAAA,iEAAmDA,EAAnD;EAAA,GAFL;EAGfuJ,EAAAA,gBAAgB,EAAE,0BAAAvJ,EAAE;EAAA,yDAA2CA,EAA3C;EAAA;EAHL,CAAjB;;MAUqBwJ;EACnB,qBAAc;EAAA;;EAEZ,SAAKlJ,OAAL,GAAe,KAAKA,OAAL,CAAavD,IAAb,CAAkB,IAAlB,CAAf;EACA,SAAK2H,YAAL,GAAoB,KAAKA,YAAL,CAAkB3H,IAAlB,CAAuB,IAAvB,CAApB;EACA,SAAK4H,qBAAL,GAA6B,KAAKA,qBAAL,CAA2B5H,IAA3B,CAAgC,IAAhC,CAA7B;EAGA,SAAK0M,cAAL,GAAsB,IAAtB;EACA,SAAKC,cAAL,GAAsB,IAAtB;EAGA,SAAKC,YAAL,GAAoB,EAApB;EACD;;;;8BAOO;EAAA;;EACN,WAAKA,YAAL,GAAoB1N,QAAQ,CAACC,gBAAT,YAA8BZ,WAAS,CAACuN,YAAxC,OAApB;;EAEA,WAAKc,YAAL,CAAkBpI,OAAlB,CAA0B,UAAA6G,QAAQ,EAAI;EACpC,QAAA,KAAI,CAACwB,aAAL,CAAmBxB,QAAnB;EACD,OAFD;EAGD;;;6BAKM;EAAA;;EACL,WAAKuB,YAAL,CAAkBpI,OAAlB,CAA0B,UAAA6G,QAAQ,EAAI;EACpC,YAAMpI,EAAE,GAAGoI,QAAQ,CAACzG,YAAT,CAAsBrG,WAAS,CAACuN,YAAhC,CAAX;EACA,YAAMgB,OAAO,GAAGzB,QAAQ,CAAChK,aAAT,CAAuB,MAAI,CAAC0L,WAAL,CAAiB9J,EAAjB,CAAvB,CAAhB;EAEA6J,QAAAA,OAAO,CAAChM,mBAAR,CAA4BnC,QAAM,CAACuN,SAAnC,EAA8C,MAAI,CAAC3I,OAAnD;EACAuJ,QAAAA,OAAO,CAAChM,mBAAR,CAA4BnC,QAAM,CAACyN,KAAnC,EAA0C,MAAI,CAAC7I,OAA/C;EACD,OAND;EAOD;;;8BAQOxC,OAAO;EACb,WAAK2L,cAAL,GAAsB3L,KAAK,CAAC4D,MAA5B;;EACA,UAAMqI,SAAS,GAAG,KAAKN,cAAL,CAAoB9H,YAApB,CAAiCrG,WAAS,CAACgE,WAA3C,CAAlB;;EACA,WAAKoK,cAAL,GAAsBzN,QAAQ,CAAC+F,cAAT,CAAwB+H,SAAxB,CAAtB;;EAKA,UAAI,KAAKC,cAAL,EAAJ,EAA2B;EACzB,aAAKC,aAAL,CAAmB,QAAnB;EACD,OAFD,MAEO;EACL,aAAKA,aAAL,CAAmB,OAAnB;EACD;;EAED,WAAKC,YAAL;;EACA,WAAKC,eAAL;EACD;;;qCAKc;EACb,WAAKC,YAAL;;EACA,WAAKC,cAAL;;EAEA,WAAKZ,cAAL,GAAsB,IAAtB;EACA,WAAKC,cAAL,GAAsB,IAAtB;EACD;;;qCAKc;EACb,WAAKA,cAAL,CAAoB9G,YAApB,CAAiCtH,WAAS,CAAC+D,YAA3C,EAAyD,MAAzD;EACD;;;qCAKc;EACb,WAAKqK,cAAL,CAAoB9G,YAApB,CAAiCtH,WAAS,CAAC+D,YAA3C,EAAyD,OAAzD;EACD;;;wCAKiB;EAChB,WAAKoK,cAAL,CAAoB5L,mBAApB,CAAwCnC,QAAM,CAACuN,SAA/C,EAA0D,KAAK3I,OAA/D;;EACA,WAAKmJ,cAAL,CAAoB5L,mBAApB,CAAwCnC,QAAM,CAACyN,KAA/C,EAAsD,KAAK7I,OAA3D;;EACA,WAAKmJ,cAAL,CAAoB7L,gBAApB,CAAqClC,QAAM,CAACwN,QAA5C,EAAsD,KAAKxE,YAA3D;;EACA,WAAK+E,cAAL,CAAoB7L,gBAApB,CAAqClC,QAAM,CAAC0N,IAA5C,EAAkD,KAAK1E,YAAvD;;EACAzI,MAAAA,QAAQ,CAAC2B,gBAAT,CAA0BlC,QAAM,CAACC,OAAjC,EAA0C,KAAKgJ,qBAA/C;;EAEA,UAAIlI,SAAJ,EAAe;EACbR,QAAAA,QAAQ,CAAC8B,IAAT,CAAc+E,KAAd,CAAoB+C,MAApB,GAA6B,SAA7B;EACD;EACF;;;4CAMqB/H,OAAO;EAC3B,UAAIA,KAAK,CAACY,KAAN,KAAgBzD,UAAQ,CAAC+I,MAA7B,EAAqC;EACnC,aAAKU,YAAL;EACD;EACF;;;uCAKgB;EACf,WAAK+E,cAAL,CAAoB5L,mBAApB,CAAwCnC,QAAM,CAACwN,QAA/C,EAAyD,KAAKxE,YAA9D;;EACA,WAAK+E,cAAL,CAAoB5L,mBAApB,CAAwCnC,QAAM,CAAC0N,IAA/C,EAAqD,KAAK1E,YAA1D;;EACA,WAAK+E,cAAL,CAAoB7L,gBAApB,CAAqClC,QAAM,CAACuN,SAA5C,EAAuD,KAAK3I,OAA5D;;EACA,WAAKmJ,cAAL,CAAoB7L,gBAApB,CAAqClC,QAAM,CAACyN,KAA5C,EAAmD,KAAK7I,OAAxD;;EACArE,MAAAA,QAAQ,CAAC4B,mBAAT,CAA6BnC,QAAM,CAACC,OAApC,EAA6C,KAAKgJ,qBAAlD;;EAEA,UAAIlI,SAAJ,EAAe;EACbR,QAAAA,QAAQ,CAAC8B,IAAT,CAAc+E,KAAd,CAAoB+C,MAApB,GAA6B,MAA7B;EACD;EACF;;;oCAMayE,UAAU;EACtB,UAAMC,aAAa,GAAG,KAAKC,kBAAL,CAAwB,KAAKf,cAA7B,EAA6Ca,QAA7C,CAAtB;;EACA,UAAMG,aAAa,GAAG,KAAKD,kBAAL,CAAwB,KAAKd,cAA7B,EAA6CY,QAA7C,CAAtB;;EACA,UAAMI,gBAAgB,GAAGH,aAAa,GAAGE,aAAzC;EAEA,UAAME,MAAM,GAAGD,gBAAgB,GAC3B,CAACH,aAAa,GAAGE,aAAjB,IAAkC,CADP,GAE3B,CAACA,aAAa,GAAGF,aAAjB,IAAkC,CAAC,CAFvC;;EAIA,UAAID,QAAQ,KAAK,QAAjB,EAA2B;EACzB,aAAKZ,cAAL,CAAoB5G,KAApB,CAA0B8H,GAA1B,aAAmCD,MAAnC;EACD,OAFD,MAEO;EACL,aAAKjB,cAAL,CAAoB5G,KAApB,CAA0B+H,IAA1B,aAAoCF,MAApC;EACD;EACF;;;oCAMavC,UAAU;EACtB,UAAMpI,EAAE,GAAGoI,QAAQ,CAACzG,YAAT,CAAsBrG,WAAS,CAACuN,YAAhC,CAAX;EACA,UAAMgB,OAAO,GAAGzB,QAAQ,CAAChK,aAAT,CAAuB,KAAK0L,WAAL,CAAiB9J,EAAjB,CAAvB,CAAhB;EACA,UAAM8K,OAAO,GAAG7O,QAAQ,CAAC+F,cAAT,CAAwBhC,EAAxB,CAAhB;;EAEA,UAAI,CAACA,EAAL,EAAS;EACP,eAAO6B,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACuJ,WAAvB,CAAP;EACD;;EAED,UAAI,CAACQ,OAAL,EAAc;EACZ,eAAOhI,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACwJ,gBAAT,CAA0BtJ,EAA1B,CAAd,CAAP;EACD;;EAED,UAAI,CAAC8K,OAAL,EAAc;EACZ,eAAOjJ,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACyJ,gBAAT,CAA0BvJ,EAA1B,CAAd,CAAP;EACD;;EAED6J,MAAAA,OAAO,CAACjH,YAAR,CAAqBtH,WAAS,CAACwN,gBAA/B,EAAiD9I,EAAjD;EACA8K,MAAAA,OAAO,CAAClI,YAAR,CAAqBtH,WAAS,CAAC6I,IAA/B,EAAqC,SAArC;EAEA0F,MAAAA,OAAO,CAACjM,gBAAR,CAAyBlC,QAAM,CAACuN,SAAhC,EAA2C,KAAK3I,OAAhD;EACAuJ,MAAAA,OAAO,CAACjM,gBAAR,CAAyBlC,QAAM,CAACyN,KAAhC,EAAuC,KAAK7I,OAA5C;EACD;;;kCAOWN,IAAI;EACd,wBAAW1E,WAAS,CAACgE,WAArB,gBAAqCU,EAArC;EACD;;;yCAQkBzD,SAAS+N,UAAU;EACpC,aAAOS,QAAQ,CAACC,MAAM,CAACC,gBAAP,CAAwB1O,OAAxB,EAAiC+N,QAAjC,EAA2CY,KAA3C,CAAiD,CAAjD,EAAoD,CAAC,CAArD,CAAD,CAAf;EACD;;;uCAMgB;EACf,UAAMC,OAAO,GAAG,KAAKzB,cAAL,CAAoB1L,SAApC;EACA,aACEmN,OAAO,CAACC,QAAR,CAAiB9P,WAAS,CAACyN,eAA3B,KAA+CoC,OAAO,CAACC,QAAR,CAAiB9P,WAAS,CAAC0N,gBAA3B,CADjD;EAGD;;;;;;MC3OUqC,UAAU,GAAG,IAAIC,SAAJ,EAAnB;AACP,MAAaC,SAAS,GAAG,IAAIC,QAAJ,EAAlB;AACP,MAAaC,MAAM,GAAG,IAAIC,KAAJ,EAAf;AACP,MAAaC,QAAQ,GAAG,IAAIC,OAAJ,EAAjB;AACP,MAAa/O,OAAK,GAAG,IAAIgP,KAAJ,EAAd;EAEP,IAAMC,QAAQ,GAAG;EAEfL,EAAAA,MAAM,EAANA,MAFe;EAGfJ,EAAAA,UAAU,EAAVA,UAHe;EAIfE,EAAAA,SAAS,EAATA,SAJe;EAKfI,EAAAA,QAAQ,EAARA,QALe;EAQf9O,EAAAA,KAAK,EAALA;EARe,CAAjB;;EAWAiP,QAAQ,CAACC,KAAT,GAAiB,YAAM;EAErBD,EAAAA,QAAQ,CAACL,MAAT,CAAgBM,KAAhB;EACAD,EAAAA,QAAQ,CAACT,UAAT,CAAoBU,KAApB;EACAD,EAAAA,QAAQ,CAACP,SAAT,CAAmBQ,KAAnB;EACAD,EAAAA,QAAQ,CAACH,QAAT,CAAkBI,KAAlB;EAGAD,EAAAA,QAAQ,CAACjP,KAAT,CAAemP,kBAAf;EACD,CATD;;EAWAF,QAAQ,CAACG,IAAT,GAAgB,YAAM;EAEpBH,EAAAA,QAAQ,CAACL,MAAT,CAAgBQ,IAAhB;EACAH,EAAAA,QAAQ,CAACT,UAAT,CAAoBY,IAApB;EACAH,EAAAA,QAAQ,CAACP,SAAT,CAAmBU,IAAnB;EAGAH,EAAAA,QAAQ,CAACjP,KAAT,CAAeqP,mBAAf;EACD,CARD;;EChCAlB,MAAM,CAACc,QAAP,GAAkBA,QAAlB;;;;;;;;;;;;;;;;;"}