{"version":3,"file":"undernet.bundle.js","sources":["../js/src/utils.js","../js/src/components/modal.js","../js/src/components/accordion.js","../js/src/components/dropdown.js","../js/src/index.js","../js/src/index.bundle.js"],"sourcesContent":["const KeyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst Selectors = {\n  NOT_VISUALLY_HIDDEN: \":not(.is-visually-hidden)\",\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n  KEYBOARD_CLASS: \"using-keyboard\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\n/**\n * Creates a string of element selector patterns using common elements.\n * @param {String} container - The enclosing container's class, attribute, etc.\n * @return {String}\n */\nexport const getFocusableElements = container => {\n  const focusables = Selectors.FOCUSABLE_TAGS.map(\n    element => `${container} ${element}${Selectors.NOT_VISUALLY_HIDDEN}`\n  ).join(\", \")\n\n  return document.querySelectorAll(focusables)\n}\n\n/**\n * Utility methods for DOM traversal and focus trapping.\n * @module Utils\n */\nexport default class Utils {\n  constructor() {\n    // events\n    this._listenForKeyboard = this._listenForKeyboard.bind(this)\n    this._listenForClick = this._listenForClick.bind(this)\n    this._handleFocusTrapWithTab = this._handleFocusTrapWithTab.bind(this)\n    this._handleFocusTrapWithArrows = this._handleFocusTrapWithArrows.bind(this)\n\n    this._focusContainerSelector = \"\"\n    this._focusableChildren = []\n    this._focusableFirstChild = {}\n    this._focusableLastChild = {}\n    this._listeningForKeydown = false\n    this._trapFocusWithArrows = false\n  }\n\n  // public\n\n  /**\n   * Listens to the first and last elements matched from this.getFocusableElements()\n   * @param {String} container - The container's class, attribute, etc.\n   * @param {Object} options - Optional has hof options.\n   */\n  captureFocus(container, options) {\n    this._focusContainerSelector = container\n    this._focusableChildren = getFocusableElements(this._focusContainerSelector)\n    this._focusableFirstChild = this._focusableChildren[0]\n    this._focusableLastChild = this._focusableChildren[this._focusableChildren.length - 1]\n\n    if (options) {\n      if (options.useArrows) {\n        this._trapFocusWithArrows = options.useArrows || this._trapFocusWithArrows\n        document.addEventListener(Events.KEYDOWN, this._handleFocusTrapWithArrows)\n      }\n    } else {\n      document.addEventListener(Events.KEYDOWN, this._handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Stop trapping focus set in this.captureFocus()\n   */\n  releaseFocus() {\n    if (this._trapFocusWithArrows) {\n      document.removeEventListener(Events.KEYDOWN, this._handleFocusTrapWithArrows)\n      this._trapFocusWithArrows = false\n    } else {\n      document.removeEventListener(Events.KEYDOWN, this._handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Begin listening to _listenForKeyboard()\n   */\n  enableFocusOutline() {\n    document.addEventListener(Events.KEYDOWN, this._listenForKeyboard)\n  }\n\n  /**\n   * Completely disable focus outline utility.\n   */\n  disableFocusOutline() {\n    if (this._listeningForKeydown) {\n      document.removeEventListener(Events.KEYDOWN, this._listenForKeyboard)\n    } else {\n      document.removeEventListener(Events.CLICK, this._listenForClick)\n    }\n  }\n\n  // private\n\n  /**\n   * When a key is pressed, detect if it's tab or shift keys and enable\n   * focus outlines on currently focused element(s). Then, remove keydown listener\n   * and add click listener on _listenForClick().\n   * @param {Object} event - Event (keypress).\n   */\n  _listenForKeyboard(event) {\n    const tabKey = event.which === KeyCodes.TAB\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const arrowUp = event.which === KeyCodes.ARROW_UP\n    const arrowDown = event.which === KeyCodes.ARROW_DOWN\n\n    if (tabKey || shiftKey || arrowUp || arrowDown) {\n      document.body.classList.add(Selectors.KEYBOARD_CLASS)\n      document.removeEventListener(Events.KEYDOWN, this._listenForKeyboard)\n      document.addEventListener(Events.CLICK, this._listenForClick)\n      this._listeningForKeydown = false\n    }\n  }\n\n  /**\n   * On click, remove Selectors.KEYBOARD_CLASS and re-add keydown listener.\n   * @param {Object} event - Event (keypress).\n   */\n  _listenForClick(event) {\n    document.body.classList.remove(Selectors.KEYBOARD_CLASS)\n    document.removeEventListener(Events.CLICK, this._listenForClick)\n    document.addEventListener(Events.KEYDOWN, this._listenForKeyboard)\n    this._listeningForKeydown = true\n  }\n\n  /**\n   * Handles focus on first or last child in a container, using tab and tab+shift keys.\n   * @param {Object} event - Event (keypress)\n   */\n  _handleFocusTrapWithTab(event) {\n    const containerElement = document.querySelector(this._focusContainerSelector)\n    const containerActive = document.activeElement === containerElement\n    const firstActive = document.activeElement === this._focusableFirstChild\n    const lastActive = document.activeElement === this._focusableLastChild\n    const tabKey = event.which === KeyCodes.TAB\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const hasShift = shiftKey && tabKey\n    const noShift = !shiftKey && tabKey\n\n    if (shiftKey && tabKey && (firstActive || containerActive)) {\n      event.preventDefault()\n      this._focusableLastChild.focus()\n    } else if (!shiftKey && tabKey && lastActive) {\n      event.preventDefault()\n      this._focusableFirstChild.focus()\n    }\n  }\n\n  /**\n   * Handles focus on the first, last, next, or previous child in a container, using up and down arrow keys.\n   * @param {Object} event - Event (keypress)\n   */\n  _handleFocusTrapWithArrows(event) {\n    const firstActive = document.activeElement === this._focusableFirstChild\n    const lastActive = document.activeElement === this._focusableLastChild\n    const arrowUp = event.which === KeyCodes.ARROW_UP\n    const arrowDown = event.which === KeyCodes.ARROW_DOWN\n\n    if (arrowUp || arrowDown) {\n      event.preventDefault()\n\n      if (firstActive && arrowUp) {\n        this._focusableLastChild.focus()\n      } else if (lastActive && arrowDown) {\n        this._focusableFirstChild.focus()\n      } else if (arrowDown) {\n        this._focusNextChild()\n      } else if (arrowUp) {\n        this._focusLastChild()\n      }\n    }\n  }\n\n  /**\n   * Focus the next child in this._focusableChildren.\n   */\n  _focusNextChild() {\n    for (let i = 0; i < this._focusableChildren.length; i++) {\n      if (this._focusableChildren[i] === document.activeElement) {\n        this._focusableChildren[i + 1].focus()\n        break\n      }\n    }\n  }\n\n  /**\n   * Focus the previous child in this._focusableChildren.\n   */\n  _focusLastChild() {\n    for (let i = 0; i < this._focusableChildren.length; i++) {\n      if (this._focusableChildren[i] === document.activeElement) {\n        this._focusableChildren[i - 1].focus()\n        break\n      }\n    }\n  }\n}\n","import Utils, { getFocusableElements } from \"../utils\"\n\nconst KeyCodes = {\n  ESCAPE: 27,\n}\n\nconst Selectors = {\n  // unique\n  DATA_MODAL: \"data-modal\",\n  DATA_MODAL_ID: \"data-modal-id\",\n  DATA_MODAL_BUTTON: \"data-modal-button\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n  // classes\n  NO_SCROLL: \"no-scroll\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n}\n\nconst Messages = {\n  NO_TARGET_ERROR: `Could not find [data-target] attribute associated with a [data-modal-button] element.`,\n  NO_PARENT_ERROR: `Could not find [data-parent] attribute associated with a [data-modal] element.`,\n  NO_ID_ERROR: id =>\n    `Could not find [data-modal-id='${id}'] associated with a [data-modal] element.`,\n}\n\n/**\n * Modal component class.\n * @module Modal\n * @requires Utils\n */\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n\n    this._iosMobile = /(iphone|ipod)/i.test(navigator.userAgent)\n\n    // events\n    this._render = this._render.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleOverlayClick = this._handleOverlayClick.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n\n    // all modals\n    this._modals = []\n    this._modalButtons = []\n\n    // active modal\n    this._activeModalButton = {}\n    this._activeModalOverlay = {}\n    this._activeModal = {}\n    this._activeModalId = \"\"\n    this._activeModalOverlayAttr = \"\"\n    this._activeModalSelector = \"\"\n    this._activeModalCloseButtons = []\n\n    // attribute helpers\n    this._modalContainerAttr = `[${Selectors.DATA_MODAL}]`\n  }\n\n  // public\n\n  /**\n   * Add accessible attributes to modal containers\n   * Begin listening to elements with [data-modal-button]\n   */\n  start() {\n    this._modals = document.querySelectorAll(this._modalContainerAttr)\n    this._modalButtons = document.querySelectorAll(`[${Selectors.DATA_MODAL_BUTTON}]`)\n\n    getFocusableElements(this._modalContainerAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    if (this._modals.length) {\n      this._modals.forEach(modal => {\n        this._setupModal(modal)\n      })\n    }\n\n    if (this._modalButtons.length) {\n      this._modalButtons.forEach(button => {\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to modal buttons\n   */\n  stop() {\n    this._modalButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   */\n  _render(event) {\n    event.preventDefault()\n    this._activeModalButton = event.target\n\n    if (!this._activeModalButton.getAttribute(Selectors.DATA_TARGET)) {\n      return console.error(Messages.NO_TARGET_ERROR)\n    }\n\n    this._activeModalId = this._activeModalButton.getAttribute(Selectors.DATA_TARGET)\n    this._activeModalOverlayAttr = `[${Selectors.DATA_MODAL_ID}=\"${this._activeModalId}\"]`\n\n    if (!document.querySelector(this._activeModalOverlayAttr)) {\n      return console.error(Messages.NO_ID_ERROR(this._activeModalId))\n    }\n\n    this._activeModalOverlay = document.querySelector(this._activeModalOverlayAttr)\n\n    this._activeModalSelector = `${this._activeModalOverlayAttr} ${this._modalContainerAttr}`\n    this._activeModal = document.querySelector(this._activeModalSelector)\n    this._activeModalCloseButtons = document.querySelectorAll(\n      `${this._activeModalOverlayAttr} [${Selectors.DATA_CLOSE}]`\n    )\n\n    // allow focusable elements to be focused\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"0\")\n    })\n\n    // capture focus, stop scrolling, and toggle attributes for visibility\n    this._handleScrollStop()\n    this.captureFocus(this._activeModalSelector)\n    this._activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n    this._activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n\n    // focus the modal\n    this._activeModal.setAttribute(Selectors.TABINDEX, \"-1\")\n    this._activeModal.focus()\n\n    // offset slight scroll caused by this._activeModal.focus()\n    this._activeModalOverlay.scrollTop = 0\n\n    // on ios devices, let the modal close on overlay click\n    if (this._iosMobile) {\n      this._activeModalOverlay.style.cursor = \"pointer\"\n    }\n\n    // begin listening to events\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOverlayClick)\n    this._activeModalCloseButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this._handleClose)\n    })\n  }\n\n  _setupModal(modal) {\n    let modalId\n    if (!modal.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR)\n    } else {\n      modalId = modal.getAttribute(Selectors.DATA_PARENT)\n    }\n\n    let modalWrapper\n    if (!document.querySelector(`[${Selectors.DATA_MODAL_ID}='${modalId}']`)) {\n      return console.error(Messages.NO_ID_ERROR(modalId))\n    } else {\n      modalWrapper = document.querySelector(`[${Selectors.DATA_MODAL_ID}='${modalId}']`)\n    }\n\n    modalWrapper.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    modalWrapper.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    modal.setAttribute(Selectors.ARIA_MODAL, \"true\")\n    modal.setAttribute(Selectors.ROLE, \"dialog\")\n  }\n\n  /**\n   * Turn off event listeners and reset focus to last selected DOM node (button)\n   * @param {Object} event - The event object\n   */\n  _handleClose(event) {\n    event.preventDefault()\n    this._activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    this._handleReturnFocus()\n    this._handleScrollRestore()\n    this.releaseFocus()\n    this._activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    this._activeModal.removeAttribute(Selectors.TABINDEX)\n\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    if (this._iosMobile) {\n      this._activeModalOverlay.style.cursor = \"auto\"\n    }\n\n    // stop listening to events\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this._handleOverlayClick)\n    this._activeModalCloseButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._handleClose)\n    })\n  }\n\n  /**\n   * Handles click event on the modal background to close it.\n   * @param {Object} event - The event object\n   */\n  _handleOverlayClick(event) {\n    if (event.target === this._activeModalOverlay) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Handles escape key event to close the current modal\n   * @param {Object} event - The event object\n   */\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Returns focus to the last focused element before the modal was called.\n   * @param {Object} button - The current modal's corresponding button.\n   */\n  _handleReturnFocus() {\n    this._activeModalButton.setAttribute(Selectors.TABINDEX, \"-1\")\n    this._activeModalButton.focus()\n    this._activeModalButton.removeAttribute(Selectors.TABINDEX)\n  }\n\n  /**\n   * Restores scroll behavior to <html> and <body>\n   */\n  _handleScrollRestore() {\n    document.body.classList.remove(Selectors.NO_SCROLL)\n    document.querySelector(\"html\").classList.remove(Selectors.NO_SCROLL)\n  }\n\n  /**\n   * Prevents scroll behavior on <html> and <body>\n   */\n  _handleScrollStop() {\n    document.body.classList.add(Selectors.NO_SCROLL)\n    document.querySelector(\"html\").classList.add(Selectors.NO_SCROLL)\n  }\n}\n","import Utils, { getFocusableElements } from \"../utils\"\n\nconst Selectors = {\n  // unique\n  DATA_ACCORDION: \"data-accordion\",\n  DATA_ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst Messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find parent with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with ${id}.`,\n  NO_HEADER_ID_ERROR: id => `Could not find header tag associated with [data-target='${id}'].`,\n  NO_PARENT_ERROR: id => `Could not find [data-parent] associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find accordion content block with [id] ${id} associated with [data-target='${id}'].`,\n}\n\n/**\n * Accordion component class.\n * @module Accordion\n * @requires Utils\n */\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n\n    // all accordions\n    this._accordionButtons = []\n    this._accordionContentsAttr = \"\"\n    this._accordionContents = []\n\n    // active accordion\n    this._activeContainer = {}\n    this._activeButton = {}\n    this._activeAccordionRowId = \"\"\n    this._activeRowAttr = \"\"\n    this._activeRow = \"\"\n    this._activeContainerId = \"\"\n    this._activeContainerAttr = \"\"\n    this._activeContent = {}\n    this._activeButtonExpandState = \"\"\n    this._activeContentHiddenState = \"\"\n\n    // other data\n    this._headerLevels = [1, 2, 3, 4, 5, 6]\n  }\n\n  // public\n\n  /**\n   * Sets up accordion components and listens to buttons for events.\n   * Begin listening to [data-accordion-button] elements\n   */\n  start() {\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttrs(\n      `[${Selectors.DATA_ACCORDION}]`\n    )\n    this._accordionButtons = document.querySelectorAll(accordionButtonSelector)\n\n    if (this._accordionButtons.length) {\n      this._accordionButtons.forEach(button => {\n        this._setupAccordion(button)\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to accordion button events.\n   */\n  stop() {\n    this._accordionButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  /**\n   * Open accordion content associated with an accordion button.\n   * @param {Object} event - The event object\n   */\n  _render(event) {\n    event.preventDefault()\n\n    this._activeButton = event.target\n    this._activeAccordionRowId = this._activeButton.getAttribute(Selectors.DATA_TARGET)\n\n    this._activeRowAttr = this._getAccordionRowAttr(this._activeAccordionRowId)\n    this._activeRow = document.querySelector(this._activeRowAttr)\n\n    if (!this._activeButton.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR(this._activeAccordionRowId))\n    }\n\n    this._activeContainerId = this._activeButton.getAttribute(Selectors.DATA_PARENT)\n    this._activeContainerAttr = `[${Selectors.DATA_ACCORDION}='${this._activeContainerId}']`\n\n    if (!document.querySelector(this._activeContainerAttr)) {\n      return console.error(Messages.NO_ACCORDION_ERROR(this._activeContainerId))\n    }\n\n    this._activeContainer = document.querySelector(this._activeContainerAttr)\n    this._activeContent = document.getElementById(this._activeAccordionRowId)\n\n    const accordionButtonState = this._activeRow.getAttribute(Selectors.DATA_VISIBLE)\n\n    this._activeButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this._activeContentHiddenState = this._activeButtonExpandState === \"false\" ? \"true\" : \"false\"\n\n    this._closeAllIfToggleable()\n    this._toggleSelectedAccordion()\n  }\n\n  /**\n   * Add initial attributes to accordion elements.\n   * @param {Element} button - A button element that triggers an accordion.\n   */\n  _setupAccordion(button) {\n    const buttonId = button.getAttribute(Selectors.DATA_TARGET)\n\n    if (!document.getElementById(buttonId)) {\n      return console.error(Messages.NO_CONTENT_ERROR(buttonId))\n    }\n\n    const buttonContent = document.getElementById(buttonId)\n    const accordionRowAttr = this._getAccordionRowAttr(buttonId)\n\n    if (!document.querySelector(accordionRowAttr)) {\n      return console.error(Messages.NO_ROW_ERROR(buttonId))\n    }\n\n    const accordionRow = document.querySelector(accordionRowAttr)\n    const buttonHeaderAttr = this._getPossibleAccordionHeaderAttrs(accordionRowAttr)\n    const buttonHeader = document.querySelectorAll(buttonHeaderAttr)[0]\n\n    if (!buttonHeader || !buttonHeader.id) {\n      console.error(Messages.NO_HEADER_ID_ERROR(buttonId))\n    }\n\n    const buttonContentChildren = getFocusableElements(`#${buttonContent.id}`)\n\n    button.setAttribute(Selectors.ARIA_CONTROLS, buttonId)\n    buttonContent.setAttribute(Selectors.ARIA_LABELLEDBY, buttonHeader.id)\n\n    if (!accordionRow.getAttribute(Selectors.DATA_VISIBLE)) {\n      return console.error(Messages.NO_VISIBLE_ERROR(buttonId))\n    }\n\n    const contentShouldExpand = accordionRow.getAttribute(Selectors.DATA_VISIBLE)\n    if (contentShouldExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"0\")\n      })\n    } else {\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  /**\n   * Build a selector string to match possible accordion buttons\n   * @param {String} attr - A unique attribute\n   * @return {String} - String of possible button selectors\n   */\n  _getPossibleAccordionButtonAttrs(attr) {\n    return this._headerLevels\n      .map(\n        num => `${attr} > [${Selectors.DATA_ACCORDION_ROW}] > h${num} [${Selectors.DATA_TARGET}]`\n      )\n      .join(\", \")\n  }\n\n  /**\n   * Build a selector string to match possible accordion headers\n   * @param {String} attr - A unique attribute\n   * @return {String} - String of possible header selectors\n   */\n  _getPossibleAccordionHeaderAttrs(attr) {\n    return this._headerLevels.map(num => `${attr} > h${num}`).join(\", \")\n  }\n\n  /**\n   * Build a unique accordion row attribute selector.\n   * @param {String} id - An id value associated with a given Selectors.DATA_TARGET\n   * @return {String} - A unique accordion row selector\n   */\n  _getAccordionRowAttr(id) {\n    return `[${Selectors.DATA_ACCORDION_ROW}='${id}']`\n  }\n\n  /**\n   * If toggling multiple rows at once isn't enabled, close all rows except the selected one.\n   * This ensures the selected one can be closed if it's already open.\n   */\n  _closeAllIfToggleable() {\n    if (this._activeContainer.hasAttribute(Selectors.DATA_TOGGLE_MULTIPLE)) return\n\n    const allContentAttr = `${this._activeContainerAttr} [${Selectors.ARIA_HIDDEN}]`\n    const allRows = document.querySelectorAll(\n      `${this._activeContainerAttr} [${Selectors.DATA_VISIBLE}]`\n    )\n    const allContent = document.querySelectorAll(allContentAttr)\n\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttrs(this._activeContainerAttr)\n    const allButtons = document.querySelectorAll(accordionButtonSelector)\n\n    allContent.forEach(content => {\n      if (content !== this._activeContent) content.style.maxHeight = null\n    })\n\n    getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    this._toggleAttributeInCollection(allRows, Selectors.DATA_VISIBLE, \"true\", \"false\")\n    this._toggleAttributeInCollection(allButtons, Selectors.ARIA_EXPANDED, \"true\", \"false\")\n    this._toggleAttributeInCollection(allContent, Selectors.ARIA_HIDDEN, \"false\", \"true\")\n  }\n\n  /**\n   * Toggle the currently selected accordion button's content.\n   */\n  _toggleSelectedAccordion() {\n    this._activeRow.setAttribute(Selectors.DATA_VISIBLE, this._activeButtonExpandState)\n    this._activeButton.setAttribute(Selectors.ARIA_EXPANDED, this._activeButtonExpandState)\n    this._activeContent.setAttribute(Selectors.ARIA_HIDDEN, this._activeContentHiddenState)\n\n    const activeContentBlock = `#${this._activeAccordionRowId}`\n    getFocusableElements(activeContentBlock).forEach(element => {\n      const value = this._activeButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(Selectors.TABINDEX, value)\n    })\n\n    if (this._activeContent.style.maxHeight) {\n      this._activeContent.style.maxHeight = null\n    } else {\n      this._activeContent.style.maxHeight = `${this._activeContent.scrollHeight}px`\n    }\n  }\n\n  /**\n   * Toggles a single attribute of a series of elements.\n   * @param {Array} elements - An array of elements to be operated on.\n   * @param {String} attributeName - An attribute to be changed.\n   * @param {String} currentValue - The current value of attributeName\n   * @param {String} newValue - The new value of attributeName\n   */\n  _toggleAttributeInCollection(elements, attributeName, currentValue, newValue) {\n    elements.forEach(element => {\n      if (element.hasAttribute(attributeName, currentValue)) {\n        element.setAttribute(attributeName, newValue)\n      }\n    })\n  }\n}\n","import Utils from \"../utils\"\n\nconst KeyCodes = {\n  TAB: 9,\n  SHIFT: 16,\n  ESCAPE: 27,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst Selectors = {\n  // unique\n  DATA_DROPDOWN: \"data-dropdown\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  // accessibility\n  TABINDEX: \"tabindex\",\n  ARIA_HASPOPUP: \"aria-haspopup\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ROLE: \"role\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\nconst Messages = {\n  NO_PARENT_ERROR: `Could not find dropdown button's [data-parent] attribute.`,\n  NO_DROPDOWN_ERROR: attr => `Could not find dropdown container associated with ${attr}.`,\n  NO_MENU_ERROR: attr => `Could not find menu associated with ${attr}.`,\n}\n\n/**\n * Dropdown component class.\n * @module Dropdown\n * @requires Utils\n */\nexport default class Dropdown extends Utils {\n  constructor() {\n    super()\n\n    this._iosMobile = /(iphone|ipod)/i.test(navigator.userAgent)\n\n    // events\n    this._render = this._render.bind(this)\n    this._handleFirstTabClose = this._handleFirstTabClose.bind(this)\n    this._handleLastTabClose = this._handleLastTabClose.bind(this)\n    this._renderWithKeys = this._renderWithKeys.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n    this._handleOffMenuClick = this._handleOffMenuClick.bind(this)\n\n    // active dropdown\n    this._activeDropdownButton = null\n    this._activeDropdown = null\n    this._activeDropdownMenu = null\n    this._activeDropdownLinks = []\n    this._allowFocusReturn = true\n    this._activeDropdownId = \"\"\n    this._activeDropdownAttr = \"\"\n    this._activeDropdownMenuId = \"\"\n\n    // all dropdowns\n    this._dropdownButtons = []\n    this._dropdowns = []\n\n    // dropdown element selectors\n    this._dropdownContainerAttr = `[${Selectors.DATA_DROPDOWN}]`\n    this._dropdownTargetAttr = `[${Selectors.DATA_TARGET}]`\n  }\n\n  // public\n\n  /**\n   * Find and set up dropdown buttons and menus.\n   * Begin listening to dropdowns for events.\n   */\n  start() {\n    this._dropdowns = document.querySelectorAll(`${this._dropdownContainerAttr}`)\n    this._dropdownButtons = document.querySelectorAll(\n      `${this._dropdownContainerAttr} > ${this._dropdownTargetAttr}`\n    )\n\n    if (this._dropdowns.length) {\n      this._dropdowns.forEach(dropdown => this._setupDropdown(dropdown))\n    }\n\n    this._dropdownButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this._render)\n      button.addEventListener(Events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  /**\n   * Stop listening for dropdown events.\n   */\n  stop() {\n    this._dropdownButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n      button.removeEventListener(Events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   * @param {Number} key - The key code that called _render()\n   */\n  _render(event, key) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    if (this._activeDropdownButton) {\n      this._allowFocusReturn = false\n      this._handleClose(event)\n      this._allowFocusReturn = true\n    }\n\n    // dropdown button / trigger\n    this._activeDropdownButton = event.target\n\n    if (!this._activeDropdownButton.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR)\n    }\n\n    this._activeDropdownId = this._activeDropdownButton.getAttribute(Selectors.DATA_PARENT)\n\n    // dropdown container\n    this._activeDropdownAttr = `[${Selectors.DATA_DROPDOWN}=\"${this._activeDropdownId}\"]`\n\n    if (!document.querySelector(this._activeDropdownAttr)) {\n      return console.error(Messages.NO_DROPDOWN_ERROR(this._activeDropdownAttr))\n    }\n\n    this._activeDropdown = document.querySelector(this._activeDropdownAttr)\n\n    // dropdown menu\n    this._activeDropdownMenuId = this._activeDropdownButton.getAttribute(Selectors.DATA_TARGET)\n    this._activeDropdownMenu = document.getElementById(this._activeDropdownMenuId)\n\n    // toggle attributes on dropdown button, indicating a visible dropdown is present\n    this._activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n\n    // trade button event listener to close the menu, instead of open it\n    this._activeDropdownButton.removeEventListener(Events.CLICK, this._render)\n    this._activeDropdownButton.addEventListener(Events.CLICK, this._handleClose)\n\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOffMenuClick)\n\n    // make click events work on mobile iOS\n    if (this._iosMobile) {\n      document.body.style.cursor = \"pointer\"\n    }\n\n    this._activeDropdownLinks = this._getDropdownLinks(this._activeDropdownAttr)\n\n    this.firstDropdownLink = this._activeDropdownLinks[0]\n    this.lastDropdownLink = this._activeDropdownLinks[this._activeDropdownLinks.length - 1]\n\n    this.firstDropdownLink.addEventListener(Events.KEYDOWN, this._handleFirstTabClose)\n    this.lastDropdownLink.addEventListener(Events.KEYDOWN, this._handleLastTabClose)\n\n    if (key && key === KeyCodes.ARROW_UP) {\n      this.lastDropdownLink.focus()\n    } else {\n      this.firstDropdownLink.focus()\n    }\n\n    this._activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"0\")\n      link.addEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this.captureFocus(`${this._activeDropdownAttr} > ul`, { useArrows: true })\n  }\n\n  /**\n   * Closes the dropdown if user uses shift and tab keys on the first dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleFirstTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (shiftKey && tabKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes the dropdown if user uses tab key on the last dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleLastTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (tabKey && !shiftKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Renders dropdown if the user uses arrow up or down.\n   * @param {Object} event - The event object\n   */\n  _renderWithKeys(event) {\n    if (event.which === KeyCodes.ARROW_UP || event.which === KeyCodes.ARROW_DOWN) {\n      this._render(event, event.which)\n    }\n  }\n\n  /**\n   * Closes currently open dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleClose(event) {\n    event.preventDefault()\n\n    this.releaseFocus()\n\n    this._activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n\n    this._activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n      link.removeEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this._activeDropdownButton.removeEventListener(Events.CLICK, this._handleClose)\n    this._activeDropdownButton.addEventListener(Events.CLICK, this._render)\n\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n\n    if (this._iosMobile) {\n      document.body.style.cursor = \"auto\"\n    }\n\n    document.removeEventListener(Events.CLICK, this._handleOffMenuClick)\n\n    if (this._allowFocusReturn) {\n      this._handleReturnFocus()\n    }\n\n    this._activeDropdownButton = null\n  }\n\n  /**\n   * Use escape key to close dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes dropdown\n   * @param {Object} event - The event object\n   */\n  _handleOffMenuClick(event) {\n    if (event.target !== this._activeDropdownButton && event.target !== this._activeDropdownMenu) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Puts focus on a the active dropdown button.\n   */\n  _handleReturnFocus() {\n    this._activeDropdownButton.setAttribute(Selectors.TAB_INDEX, \"-1\")\n    this._activeDropdownButton.focus()\n    this._activeDropdownButton.removeAttribute(Selectors.TAB_INDEX)\n  }\n\n  /**\n   * Retrieve possible menu links or buttons as an array\n   * @param {String} attr - The unique attribute for a dropdown.\n   * @return {String} - Selector for possible menu item links.\n   */\n  _getDropdownLinks(attr) {\n    return document.querySelectorAll(`${attr} > ul > li > a, ${attr} > ul > li > button`)\n  }\n\n  /**\n   * Add starting attributes to a dropdown.\n   * @param {Element} dropdown - A dropdown element.\n   */\n  _setupDropdown(dropdown) {\n    const dropdownId = dropdown.getAttribute(Selectors.DATA_DROPDOWN)\n    const dropdownIdAttr = `[${Selectors.DATA_DROPDOWN}=\"${dropdownId}\"]`\n    const dropdownMenuItemsAttr = `${dropdownIdAttr} > ul > li`\n\n    if (!document.querySelector(`${dropdownIdAttr} > ul`)) {\n      return console.error(Messages.NO_MENU_ERROR(dropdownIdAttr))\n    }\n\n    const dropdownMenu = document.querySelector(`${dropdownIdAttr} > ul`)\n    const dropdownButton = document.querySelector(`${dropdownIdAttr} > ${this._dropdownTargetAttr}`)\n\n    dropdownButton.setAttribute(Selectors.ARIA_CONTROLS, dropdownMenu.id)\n    dropdownButton.setAttribute(Selectors.ARIA_HASPOPUP, \"true\")\n    dropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    dropdownMenu.setAttribute(Selectors.ARIA_LABELLEDBY, dropdownButton.id)\n\n    const dropdownMenuItems = document.querySelectorAll(dropdownMenuItemsAttr)\n    dropdownMenuItems.forEach(item => item.setAttribute(Selectors.ROLE, \"none\"))\n\n    this._getDropdownLinks(dropdownIdAttr).forEach(link => {\n      link.setAttribute(Selectors.ROLE, \"menuitem\")\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n  }\n}\n","import _Modals from \"./components/modal\"\nimport _Accordion from \"./components/accordion\"\nimport _Dropdown from \"./components/dropdown\"\nimport _Utils from \"./utils\"\n\nexport const Modals = new _Modals()\nexport const Accordions = new _Accordion()\nexport const Dropdowns = new _Dropdown()\nexport const Utils = new _Utils()\n\nconst Undernet = {\n  // Components\n  Modals,\n  Accordions,\n  Dropdowns,\n\n  // Utils\n  Utils,\n}\n\nUndernet.start = () => {\n  // Components\n  Undernet.Modals.start()\n  Undernet.Accordions.start()\n  Undernet.Dropdowns.start()\n\n  // Utils\n  Undernet.Utils.enableFocusOutline()\n}\n\nUndernet.stop = () => {\n  // Components\n  Undernet.Modals.stop()\n  Undernet.Accordions.stop()\n  Undernet.Dropdowns.stop()\n\n  // Utils\n  Undernet.Utils.disableFocusOutline()\n}\n\nexport default Undernet\n","import Undernet from \"./index\"\n\nexport default Undernet\nexport { Modals, Accordions, Dropdowns, Utils } from \"./index\"\n\nwindow.Undernet = Undernet\n"],"names":["KeyCodes","SHIFT","TAB","ARROW_UP","ARROW_DOWN","Selectors","NOT_VISUALLY_HIDDEN","FOCUSABLE_TAGS","KEYBOARD_CLASS","Events","KEYDOWN","CLICK","getFocusableElements","container","focusables","map","element","join","document","querySelectorAll","Utils","_listenForKeyboard","bind","_listenForClick","_handleFocusTrapWithTab","_handleFocusTrapWithArrows","_focusContainerSelector","_focusableChildren","_focusableFirstChild","_focusableLastChild","_listeningForKeydown","_trapFocusWithArrows","options","length","useArrows","addEventListener","removeEventListener","event","tabKey","which","shiftKey","arrowUp","arrowDown","body","classList","add","remove","containerElement","querySelector","containerActive","activeElement","firstActive","lastActive","preventDefault","focus","_focusNextChild","_focusLastChild","i","ESCAPE","DATA_MODAL","DATA_MODAL_ID","DATA_MODAL_BUTTON","DATA_VISIBLE","DATA_CLOSE","DATA_TARGET","DATA_PARENT","ARIA_HIDDEN","ARIA_MODAL","ROLE","TABINDEX","NO_SCROLL","RESIZE","Messages","NO_TARGET_ERROR","NO_PARENT_ERROR","NO_ID_ERROR","id","Modal","_iosMobile","test","navigator","userAgent","_render","_handleClose","_handleOverlayClick","_handleEscapeKeyPress","_modals","_modalButtons","_activeModalButton","_activeModalOverlay","_activeModal","_activeModalId","_activeModalOverlayAttr","_activeModalSelector","_activeModalCloseButtons","_modalContainerAttr","forEach","setAttribute","modal","_setupModal","button","target","getAttribute","console","error","_handleScrollStop","captureFocus","scrollTop","style","cursor","modalId","modalWrapper","_handleReturnFocus","_handleScrollRestore","releaseFocus","removeAttribute","DATA_ACCORDION","DATA_ACCORDION_ROW","DATA_TOGGLE_MULTIPLE","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_LABELLEDBY","NO_VISIBLE_ERROR","NO_ROW_ERROR","NO_HEADER_ID_ERROR","NO_CONTENT_ERROR","Accordion","_accordionButtons","_accordionContentsAttr","_accordionContents","_activeContainer","_activeButton","_activeAccordionRowId","_activeRowAttr","_activeRow","_activeContainerId","_activeContainerAttr","_activeContent","_activeButtonExpandState","_activeContentHiddenState","_headerLevels","accordionButtonSelector","_getPossibleAccordionButtonAttrs","_setupAccordion","_getAccordionRowAttr","NO_ACCORDION_ERROR","getElementById","accordionButtonState","_closeAllIfToggleable","_toggleSelectedAccordion","buttonId","buttonContent","accordionRowAttr","accordionRow","buttonHeaderAttr","_getPossibleAccordionHeaderAttrs","buttonHeader","buttonContentChildren","contentShouldExpand","maxHeight","scrollHeight","attr","num","hasAttribute","allContentAttr","allRows","allContent","allButtons","content","_toggleAttributeInCollection","activeContentBlock","value","elements","attributeName","currentValue","newValue","DATA_DROPDOWN","ARIA_HASPOPUP","NO_DROPDOWN_ERROR","NO_MENU_ERROR","Dropdown","_handleFirstTabClose","_handleLastTabClose","_renderWithKeys","_handleOffMenuClick","_activeDropdownButton","_activeDropdown","_activeDropdownMenu","_activeDropdownLinks","_allowFocusReturn","_activeDropdownId","_activeDropdownAttr","_activeDropdownMenuId","_dropdownButtons","_dropdowns","_dropdownContainerAttr","_dropdownTargetAttr","dropdown","_setupDropdown","key","stopPropagation","_getDropdownLinks","firstDropdownLink","lastDropdownLink","link","TAB_INDEX","dropdownId","dropdownIdAttr","dropdownMenuItemsAttr","dropdownMenu","dropdownButton","dropdownMenuItems","item","Modals","_Modals","Accordions","_Accordion","Dropdowns","_Dropdown","_Utils","Undernet","start","enableFocusOutline","stop","disableFocusOutline","window"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,IAAMA,QAAQ,GAAG;EACfC,EAAAA,KAAK,EAAE,EADQ;EAEfC,EAAAA,GAAG,EAAE,CAFU;EAGfC,EAAAA,QAAQ,EAAE,EAHK;EAIfC,EAAAA,UAAU,EAAE;EAJG,CAAjB;EAOA,IAAMC,SAAS,GAAG;EAChBC,EAAAA,mBAAmB,EAAE,2BADL;EAEhBC,EAAAA,cAAc,EAAE,CAAC,GAAD,EAAM,QAAN,EAAgB,OAAhB,EAAyB,QAAzB,EAAmC,QAAnC,EAA6C,UAA7C,EAAyD,YAAzD,CAFA;EAGhBC,EAAAA,cAAc,EAAE;EAHA,CAAlB;EAMA,IAAMC,MAAM,GAAG;EACbC,EAAAA,OAAO,EAAE,SADI;EAEbC,EAAAA,KAAK,EAAE;EAFM,CAAf;AAUA,EAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,SAAS,EAAI;EAC/C,MAAMC,UAAU,GAAGT,SAAS,CAACE,cAAV,CAAyBQ,GAAzB,CACjB,UAAAC,OAAO;EAAA,qBAAOH,SAAP,cAAoBG,OAApB,SAA8BX,SAAS,CAACC,mBAAxC;EAAA,GADU,EAEjBW,IAFiB,CAEZ,IAFY,CAAnB;EAIA,SAAOC,QAAQ,CAACC,gBAAT,CAA0BL,UAA1B,CAAP;EACD,CANM;;MAYcM;EACnB,mBAAc;EAAA;;EAEZ,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;EACA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAAvB;EACA,SAAKE,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BF,IAA7B,CAAkC,IAAlC,CAA/B;EACA,SAAKG,0BAAL,GAAkC,KAAKA,0BAAL,CAAgCH,IAAhC,CAAqC,IAArC,CAAlC;EAEA,SAAKI,uBAAL,GAA+B,EAA/B;EACA,SAAKC,kBAAL,GAA0B,EAA1B;EACA,SAAKC,oBAAL,GAA4B,EAA5B;EACA,SAAKC,mBAAL,GAA2B,EAA3B;EACA,SAAKC,oBAAL,GAA4B,KAA5B;EACA,SAAKC,oBAAL,GAA4B,KAA5B;EACD;;;;mCASYlB,WAAWmB,SAAS;EAC/B,WAAKN,uBAAL,GAA+Bb,SAA/B;EACA,WAAKc,kBAAL,GAA0Bf,oBAAoB,CAAC,KAAKc,uBAAN,CAA9C;EACA,WAAKE,oBAAL,GAA4B,KAAKD,kBAAL,CAAwB,CAAxB,CAA5B;EACA,WAAKE,mBAAL,GAA2B,KAAKF,kBAAL,CAAwB,KAAKA,kBAAL,CAAwBM,MAAxB,GAAiC,CAAzD,CAA3B;;EAEA,UAAID,OAAJ,EAAa;EACX,YAAIA,OAAO,CAACE,SAAZ,EAAuB;EACrB,eAAKH,oBAAL,GAA4BC,OAAO,CAACE,SAAR,IAAqB,KAAKH,oBAAtD;EACAb,UAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,MAAM,CAACC,OAAjC,EAA0C,KAAKe,0BAA/C;EACD;EACF,OALD,MAKO;EACLP,QAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,MAAM,CAACC,OAAjC,EAA0C,KAAKc,uBAA/C;EACD;EACF;;;qCAKc;EACb,UAAI,KAAKO,oBAAT,EAA+B;EAC7Bb,QAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,MAAM,CAACC,OAApC,EAA6C,KAAKe,0BAAlD;EACA,aAAKM,oBAAL,GAA4B,KAA5B;EACD,OAHD,MAGO;EACLb,QAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,MAAM,CAACC,OAApC,EAA6C,KAAKc,uBAAlD;EACD;EACF;;;2CAKoB;EACnBN,MAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,MAAM,CAACC,OAAjC,EAA0C,KAAKW,kBAA/C;EACD;;;4CAKqB;EACpB,UAAI,KAAKS,oBAAT,EAA+B;EAC7BZ,QAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,MAAM,CAACC,OAApC,EAA6C,KAAKW,kBAAlD;EACD,OAFD,MAEO;EACLH,QAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,MAAM,CAACE,KAApC,EAA2C,KAAKY,eAAhD;EACD;EACF;;;yCAUkBc,OAAO;EACxB,UAAMC,MAAM,GAAGD,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACE,GAAxC;EACA,UAAMsC,QAAQ,GAAGH,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACC,KAAzB,IAAkCoC,KAAK,CAACG,QAAzD;EACA,UAAMC,OAAO,GAAGJ,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACG,QAAzC;EACA,UAAMuC,SAAS,GAAGL,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACI,UAA3C;;EAEA,UAAIkC,MAAM,IAAIE,QAAV,IAAsBC,OAAtB,IAAiCC,SAArC,EAAgD;EAC9CxB,QAAAA,QAAQ,CAACyB,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4BxC,SAAS,CAACG,cAAtC;EACAU,QAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,MAAM,CAACC,OAApC,EAA6C,KAAKW,kBAAlD;EACAH,QAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,MAAM,CAACE,KAAjC,EAAwC,KAAKY,eAA7C;EACA,aAAKO,oBAAL,GAA4B,KAA5B;EACD;EACF;;;sCAMeO,OAAO;EACrBnB,MAAAA,QAAQ,CAACyB,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+BzC,SAAS,CAACG,cAAzC;EACAU,MAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,MAAM,CAACE,KAApC,EAA2C,KAAKY,eAAhD;EACAL,MAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,MAAM,CAACC,OAAjC,EAA0C,KAAKW,kBAA/C;EACA,WAAKS,oBAAL,GAA4B,IAA5B;EACD;;;8CAMuBO,OAAO;EAC7B,UAAMU,gBAAgB,GAAG7B,QAAQ,CAAC8B,aAAT,CAAuB,KAAKtB,uBAA5B,CAAzB;EACA,UAAMuB,eAAe,GAAG/B,QAAQ,CAACgC,aAAT,KAA2BH,gBAAnD;EACA,UAAMI,WAAW,GAAGjC,QAAQ,CAACgC,aAAT,KAA2B,KAAKtB,oBAApD;EACA,UAAMwB,UAAU,GAAGlC,QAAQ,CAACgC,aAAT,KAA2B,KAAKrB,mBAAnD;EACA,UAAMS,MAAM,GAAGD,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACE,GAAxC;EACA,UAAMsC,QAAQ,GAAGH,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACC,KAAzB,IAAkCoC,KAAK,CAACG,QAAzD;AACA;EAGA,UAAIA,QAAQ,IAAIF,MAAZ,KAAuBa,WAAW,IAAIF,eAAtC,CAAJ,EAA4D;EAC1DZ,QAAAA,KAAK,CAACgB,cAAN;;EACA,aAAKxB,mBAAL,CAAyByB,KAAzB;EACD,OAHD,MAGO,IAAI,CAACd,QAAD,IAAaF,MAAb,IAAuBc,UAA3B,EAAuC;EAC5Cf,QAAAA,KAAK,CAACgB,cAAN;;EACA,aAAKzB,oBAAL,CAA0B0B,KAA1B;EACD;EACF;;;iDAM0BjB,OAAO;EAChC,UAAMc,WAAW,GAAGjC,QAAQ,CAACgC,aAAT,KAA2B,KAAKtB,oBAApD;EACA,UAAMwB,UAAU,GAAGlC,QAAQ,CAACgC,aAAT,KAA2B,KAAKrB,mBAAnD;EACA,UAAMY,OAAO,GAAGJ,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACG,QAAzC;EACA,UAAMuC,SAAS,GAAGL,KAAK,CAACE,KAAN,KAAgBvC,QAAQ,CAACI,UAA3C;;EAEA,UAAIqC,OAAO,IAAIC,SAAf,EAA0B;EACxBL,QAAAA,KAAK,CAACgB,cAAN;;EAEA,YAAIF,WAAW,IAAIV,OAAnB,EAA4B;EAC1B,eAAKZ,mBAAL,CAAyByB,KAAzB;EACD,SAFD,MAEO,IAAIF,UAAU,IAAIV,SAAlB,EAA6B;EAClC,eAAKd,oBAAL,CAA0B0B,KAA1B;EACD,SAFM,MAEA,IAAIZ,SAAJ,EAAe;EACpB,eAAKa,eAAL;EACD,SAFM,MAEA,IAAId,OAAJ,EAAa;EAClB,eAAKe,eAAL;EACD;EACF;EACF;;;wCAKiB;EAChB,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9B,kBAAL,CAAwBM,MAA5C,EAAoDwB,CAAC,EAArD,EAAyD;EACvD,YAAI,KAAK9B,kBAAL,CAAwB8B,CAAxB,MAA+BvC,QAAQ,CAACgC,aAA5C,EAA2D;EACzD,eAAKvB,kBAAL,CAAwB8B,CAAC,GAAG,CAA5B,EAA+BH,KAA/B;;EACA;EACD;EACF;EACF;;;wCAKiB;EAChB,WAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9B,kBAAL,CAAwBM,MAA5C,EAAoDwB,CAAC,EAArD,EAAyD;EACvD,YAAI,KAAK9B,kBAAL,CAAwB8B,CAAxB,MAA+BvC,QAAQ,CAACgC,aAA5C,EAA2D;EACzD,eAAKvB,kBAAL,CAAwB8B,CAAC,GAAG,CAA5B,EAA+BH,KAA/B;;EACA;EACD;EACF;EACF;;;;;;EC7MH,IAAMtD,UAAQ,GAAG;EACf0D,EAAAA,MAAM,EAAE;EADO,CAAjB;EAIA,IAAMrD,WAAS,GAAG;EAEhBsD,EAAAA,UAAU,EAAE,YAFI;EAGhBC,EAAAA,aAAa,EAAE,eAHC;EAIhBC,EAAAA,iBAAiB,EAAE,mBAJH;EAMhBC,EAAAA,YAAY,EAAE,cANE;EAOhBC,EAAAA,UAAU,EAAE,YAPI;EAQhBC,EAAAA,WAAW,EAAE,aARG;EAShBC,EAAAA,WAAW,EAAE,aATG;EAWhBC,EAAAA,WAAW,EAAE,aAXG;EAYhBC,EAAAA,UAAU,EAAE,YAZI;EAahBC,EAAAA,IAAI,EAAE,MAbU;EAchBC,EAAAA,QAAQ,EAAE,UAdM;EAgBhBC,EAAAA,SAAS,EAAE;EAhBK,CAAlB;EAmBA,IAAM7D,QAAM,GAAG;EACbC,EAAAA,OAAO,EAAE,SADI;EAEbC,EAAAA,KAAK,EAAE,OAFM;EAGb4D,EAAAA,MAAM,EAAE;EAHK,CAAf;EAMA,IAAMC,QAAQ,GAAG;EACfC,EAAAA,eAAe,yFADA;EAEfC,EAAAA,eAAe,kFAFA;EAGfC,EAAAA,WAAW,EAAE,qBAAAC,EAAE;EAAA,oDACqBA,EADrB;EAAA;EAHA,CAAjB;;MAYqBC;;;EACnB,mBAAc;EAAA;;EAAA;;EACZ;EAEA,UAAKC,UAAL,GAAkB,iBAAiBC,IAAjB,CAAsBC,SAAS,CAACC,SAAhC,CAAlB;EAGA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAa5D,IAAb,+BAAf;EACA,UAAK6D,YAAL,GAAoB,MAAKA,YAAL,CAAkB7D,IAAlB,+BAApB;EACA,UAAK8D,mBAAL,GAA2B,MAAKA,mBAAL,CAAyB9D,IAAzB,+BAA3B;EACA,UAAK+D,qBAAL,GAA6B,MAAKA,qBAAL,CAA2B/D,IAA3B,+BAA7B;EAGA,UAAKgE,OAAL,GAAe,EAAf;EACA,UAAKC,aAAL,GAAqB,EAArB;EAGA,UAAKC,kBAAL,GAA0B,EAA1B;EACA,UAAKC,mBAAL,GAA2B,EAA3B;EACA,UAAKC,YAAL,GAAoB,EAApB;EACA,UAAKC,cAAL,GAAsB,EAAtB;EACA,UAAKC,uBAAL,GAA+B,EAA/B;EACA,UAAKC,oBAAL,GAA4B,EAA5B;EACA,UAAKC,wBAAL,GAAgC,EAAhC;EAGA,UAAKC,mBAAL,cAA+B1F,WAAS,CAACsD,UAAzC;EAzBY;EA0Bb;;;;8BAQO;EAAA;;EACN,WAAK2B,OAAL,GAAepE,QAAQ,CAACC,gBAAT,CAA0B,KAAK4E,mBAA/B,CAAf;EACA,WAAKR,aAAL,GAAqBrE,QAAQ,CAACC,gBAAT,YAA8Bd,WAAS,CAACwD,iBAAxC,OAArB;EAEAjD,MAAAA,oBAAoB,CAAC,KAAKmF,mBAAN,CAApB,CAA+CC,OAA/C,CAAuD,UAAAhF,OAAO,EAAI;EAChEA,QAAAA,OAAO,CAACiF,YAAR,CAAqB5F,WAAS,CAACgE,QAA/B,EAAyC,IAAzC;EACD,OAFD;;EAIA,UAAI,KAAKiB,OAAL,CAAarD,MAAjB,EAAyB;EACvB,aAAKqD,OAAL,CAAaU,OAAb,CAAqB,UAAAE,KAAK,EAAI;EAC5B,UAAA,MAAI,CAACC,WAAL,CAAiBD,KAAjB;EACD,SAFD;EAGD;;EAED,UAAI,KAAKX,aAAL,CAAmBtD,MAAvB,EAA+B;EAC7B,aAAKsD,aAAL,CAAmBS,OAAnB,CAA2B,UAAAI,MAAM,EAAI;EACnCA,UAAAA,MAAM,CAACjE,gBAAP,CAAwB1B,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAACuE,OAA3C;EACD,SAFD;EAGD;EACF;;;6BAKM;EAAA;;EACL,WAAKK,aAAL,CAAmBS,OAAnB,CAA2B,UAAAI,MAAM,EAAI;EACnCA,QAAAA,MAAM,CAAChE,mBAAP,CAA2B3B,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAACuE,OAA9C;EACD,OAFD;EAGD;;;8BAQO7C,OAAO;EAAA;;EACbA,MAAAA,KAAK,CAACgB,cAAN;EACA,WAAKmC,kBAAL,GAA0BnD,KAAK,CAACgE,MAAhC;;EAEA,UAAI,CAAC,KAAKb,kBAAL,CAAwBc,YAAxB,CAAqCjG,WAAS,CAAC2D,WAA/C,CAAL,EAAkE;EAChE,eAAOuC,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACC,eAAvB,CAAP;EACD;;EAED,WAAKkB,cAAL,GAAsB,KAAKH,kBAAL,CAAwBc,YAAxB,CAAqCjG,WAAS,CAAC2D,WAA/C,CAAtB;EACA,WAAK4B,uBAAL,cAAmCvF,WAAS,CAACuD,aAA7C,gBAA+D,KAAK+B,cAApE;;EAEA,UAAI,CAACzE,QAAQ,CAAC8B,aAAT,CAAuB,KAAK4C,uBAA5B,CAAL,EAA2D;EACzD,eAAOW,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACG,WAAT,CAAqB,KAAKgB,cAA1B,CAAd,CAAP;EACD;;EAED,WAAKF,mBAAL,GAA2BvE,QAAQ,CAAC8B,aAAT,CAAuB,KAAK4C,uBAA5B,CAA3B;EAEA,WAAKC,oBAAL,aAA+B,KAAKD,uBAApC,cAA+D,KAAKG,mBAApE;EACA,WAAKL,YAAL,GAAoBxE,QAAQ,CAAC8B,aAAT,CAAuB,KAAK6C,oBAA5B,CAApB;EACA,WAAKC,wBAAL,GAAgC5E,QAAQ,CAACC,gBAAT,WAC3B,KAAKyE,uBADsB,eACMvF,WAAS,CAAC0D,UADhB,OAAhC;EAKAnD,MAAAA,oBAAoB,CAAC,KAAKiF,oBAAN,CAApB,CAAgDG,OAAhD,CAAwD,UAAAhF,OAAO,EAAI;EACjEA,QAAAA,OAAO,CAACiF,YAAR,CAAqB5F,WAAS,CAACgE,QAA/B,EAAyC,GAAzC;EACD,OAFD;;EAKA,WAAKoC,iBAAL;;EACA,WAAKC,YAAL,CAAkB,KAAKb,oBAAvB;;EACA,WAAKJ,mBAAL,CAAyBQ,YAAzB,CAAsC5F,WAAS,CAAC6D,WAAhD,EAA6D,OAA7D;;EACA,WAAKuB,mBAAL,CAAyBQ,YAAzB,CAAsC5F,WAAS,CAACyD,YAAhD,EAA8D,MAA9D;;EAGA,WAAK4B,YAAL,CAAkBO,YAAlB,CAA+B5F,WAAS,CAACgE,QAAzC,EAAmD,IAAnD;;EACA,WAAKqB,YAAL,CAAkBpC,KAAlB;;EAGA,WAAKmC,mBAAL,CAAyBkB,SAAzB,GAAqC,CAArC;;EAGA,UAAI,KAAK7B,UAAT,EAAqB;EACnB,aAAKW,mBAAL,CAAyBmB,KAAzB,CAA+BC,MAA/B,GAAwC,SAAxC;EACD;;EAGD3F,MAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,QAAM,CAACC,OAAjC,EAA0C,KAAK2E,qBAA/C;EACAnE,MAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,QAAM,CAACE,KAAjC,EAAwC,KAAKyE,mBAA7C;;EACA,WAAKU,wBAAL,CAA8BE,OAA9B,CAAsC,UAAAI,MAAM,EAAI;EAC9CA,QAAAA,MAAM,CAACjE,gBAAP,CAAwB1B,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAACwE,YAA3C;EACD,OAFD;EAGD;;;kCAEWe,OAAO;EACjB,UAAIY,OAAJ;;EACA,UAAI,CAACZ,KAAK,CAACI,YAAN,CAAmBjG,WAAS,CAAC4D,WAA7B,CAAL,EAAgD;EAC9C,eAAOsC,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACE,eAAvB,CAAP;EACD,OAFD,MAEO;EACLoC,QAAAA,OAAO,GAAGZ,KAAK,CAACI,YAAN,CAAmBjG,WAAS,CAAC4D,WAA7B,CAAV;EACD;;EAED,UAAI8C,YAAJ;;EACA,UAAI,CAAC7F,QAAQ,CAAC8B,aAAT,YAA2B3C,WAAS,CAACuD,aAArC,eAAuDkD,OAAvD,QAAL,EAA0E;EACxE,eAAOP,OAAO,CAACC,KAAR,CAAchC,QAAQ,CAACG,WAAT,CAAqBmC,OAArB,CAAd,CAAP;EACD,OAFD,MAEO;EACLC,QAAAA,YAAY,GAAG7F,QAAQ,CAAC8B,aAAT,YAA2B3C,WAAS,CAACuD,aAArC,eAAuDkD,OAAvD,QAAf;EACD;;EAEDC,MAAAA,YAAY,CAACd,YAAb,CAA0B5F,WAAS,CAAC6D,WAApC,EAAiD,MAAjD;EACA6C,MAAAA,YAAY,CAACd,YAAb,CAA0B5F,WAAS,CAACyD,YAApC,EAAkD,OAAlD;EACAoC,MAAAA,KAAK,CAACD,YAAN,CAAmB5F,WAAS,CAAC8D,UAA7B,EAAyC,MAAzC;EACA+B,MAAAA,KAAK,CAACD,YAAN,CAAmB5F,WAAS,CAAC+D,IAA7B,EAAmC,QAAnC;EACD;;;mCAMY/B,OAAO;EAAA;;EAClBA,MAAAA,KAAK,CAACgB,cAAN;;EACA,WAAKoC,mBAAL,CAAyBQ,YAAzB,CAAsC5F,WAAS,CAACyD,YAAhD,EAA8D,OAA9D;;EACA,WAAKkD,kBAAL;;EACA,WAAKC,oBAAL;;EACA,WAAKC,YAAL;;EACA,WAAKzB,mBAAL,CAAyBQ,YAAzB,CAAsC5F,WAAS,CAAC6D,WAAhD,EAA6D,MAA7D;;EACA,WAAKwB,YAAL,CAAkByB,eAAlB,CAAkC9G,WAAS,CAACgE,QAA5C;;EAEAzD,MAAAA,oBAAoB,CAAC,KAAKiF,oBAAN,CAApB,CAAgDG,OAAhD,CAAwD,UAAAhF,OAAO,EAAI;EACjEA,QAAAA,OAAO,CAACiF,YAAR,CAAqB5F,WAAS,CAACgE,QAA/B,EAAyC,IAAzC;EACD,OAFD;;EAIA,UAAI,KAAKS,UAAT,EAAqB;EACnB,aAAKW,mBAAL,CAAyBmB,KAAzB,CAA+BC,MAA/B,GAAwC,MAAxC;EACD;;EAGD3F,MAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,QAAM,CAACC,OAApC,EAA6C,KAAK2E,qBAAlD;EACAnE,MAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,QAAM,CAACE,KAApC,EAA2C,KAAKyE,mBAAhD;;EACA,WAAKU,wBAAL,CAA8BE,OAA9B,CAAsC,UAAAI,MAAM,EAAI;EAC9CA,QAAAA,MAAM,CAAChE,mBAAP,CAA2B3B,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAACwE,YAA9C;EACD,OAFD;EAGD;;;0CAMmB9C,OAAO;EACzB,UAAIA,KAAK,CAACgE,MAAN,KAAiB,KAAKZ,mBAA1B,EAA+C;EAC7C,aAAKN,YAAL,CAAkB9C,KAAlB;EACD;EACF;;;4CAMqBA,OAAO;EAC3B,UAAIA,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAAC0D,MAA7B,EAAqC;EACnC,aAAKyB,YAAL,CAAkB9C,KAAlB;EACD;EACF;;;2CAMoB;EACnB,WAAKmD,kBAAL,CAAwBS,YAAxB,CAAqC5F,WAAS,CAACgE,QAA/C,EAAyD,IAAzD;;EACA,WAAKmB,kBAAL,CAAwBlC,KAAxB;;EACA,WAAKkC,kBAAL,CAAwB2B,eAAxB,CAAwC9G,WAAS,CAACgE,QAAlD;EACD;;;6CAKsB;EACrBnD,MAAAA,QAAQ,CAACyB,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+BzC,WAAS,CAACiE,SAAzC;EACApD,MAAAA,QAAQ,CAAC8B,aAAT,CAAuB,MAAvB,EAA+BJ,SAA/B,CAAyCE,MAAzC,CAAgDzC,WAAS,CAACiE,SAA1D;EACD;;;0CAKmB;EAClBpD,MAAAA,QAAQ,CAACyB,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4BxC,WAAS,CAACiE,SAAtC;EACApD,MAAAA,QAAQ,CAAC8B,aAAT,CAAuB,MAAvB,EAA+BJ,SAA/B,CAAyCC,GAAzC,CAA6CxC,WAAS,CAACiE,SAAvD;EACD;;;;IA3NgClD;;ECzCnC,IAAMf,WAAS,GAAG;EAEhB+G,EAAAA,cAAc,EAAE,gBAFA;EAGhBC,EAAAA,kBAAkB,EAAE,oBAHJ;EAKhBvD,EAAAA,YAAY,EAAE,cALE;EAMhBE,EAAAA,WAAW,EAAE,aANG;EAOhBsD,EAAAA,oBAAoB,EAAE,sBAPN;EAQhBrD,EAAAA,WAAW,EAAE,aARG;EAUhBsD,EAAAA,aAAa,EAAE,eAVC;EAWhBC,EAAAA,aAAa,EAAE,eAXC;EAYhBtD,EAAAA,WAAW,EAAE,aAZG;EAahBuD,EAAAA,eAAe,EAAE,iBAbD;EAchBpD,EAAAA,QAAQ,EAAE;EAdM,CAAlB;EAiBA,IAAM5D,QAAM,GAAG;EACbE,EAAAA,KAAK,EAAE,OADM;EAEbD,EAAAA,OAAO,EAAE;EAFI,CAAf;EAKA,IAAM8D,UAAQ,GAAG;EACfkD,EAAAA,gBAAgB,EAAE,0BAAA9C,EAAE;EAAA,uGACmEA,EADnE;EAAA,GADL;EAGf+C,EAAAA,YAAY,EAAE,sBAAA/C,EAAE;EAAA,yEAA2DA,EAA3D;EAAA,GAHD;EAIfgD,EAAAA,kBAAkB,EAAE,4BAAAhD,EAAE;EAAA,6EAA+DA,EAA/D;EAAA,GAJP;EAKfF,EAAAA,eAAe,EAAE,yBAAAE,EAAE;EAAA,gFAAkEA,EAAlE;EAAA,GALJ;EAMfiD,EAAAA,gBAAgB,EAAE,0BAAAjD,EAAE;EAAA,sEACkCA,EADlC,4CACsEA,EADtE;EAAA;EANL,CAAjB;;MAeqBkD;;;EACnB,uBAAc;EAAA;;EAAA;;EACZ;EAGA,UAAK5C,OAAL,GAAe,MAAKA,OAAL,CAAa5D,IAAb,+BAAf;EAGA,UAAKyG,iBAAL,GAAyB,EAAzB;EACA,UAAKC,sBAAL,GAA8B,EAA9B;EACA,UAAKC,kBAAL,GAA0B,EAA1B;EAGA,UAAKC,gBAAL,GAAwB,EAAxB;EACA,UAAKC,aAAL,GAAqB,EAArB;EACA,UAAKC,qBAAL,GAA6B,EAA7B;EACA,UAAKC,cAAL,GAAsB,EAAtB;EACA,UAAKC,UAAL,GAAkB,EAAlB;EACA,UAAKC,kBAAL,GAA0B,EAA1B;EACA,UAAKC,oBAAL,GAA4B,EAA5B;EACA,UAAKC,cAAL,GAAsB,EAAtB;EACA,UAAKC,wBAAL,GAAgC,EAAhC;EACA,UAAKC,yBAAL,GAAiC,EAAjC;EAGA,UAAKC,aAAL,GAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAArB;EAxBY;EAyBb;;;;8BAQO;EAAA;;EACN,UAAMC,uBAAuB,GAAG,KAAKC,gCAAL,YAC1BzI,WAAS,CAAC+G,cADgB,OAAhC;;EAGA,WAAKW,iBAAL,GAAyB7G,QAAQ,CAACC,gBAAT,CAA0B0H,uBAA1B,CAAzB;;EAEA,UAAI,KAAKd,iBAAL,CAAuB9F,MAA3B,EAAmC;EACjC,aAAK8F,iBAAL,CAAuB/B,OAAvB,CAA+B,UAAAI,MAAM,EAAI;EACvC,UAAA,MAAI,CAAC2C,eAAL,CAAqB3C,MAArB;;EACAA,UAAAA,MAAM,CAACjE,gBAAP,CAAwB1B,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAACuE,OAA3C;EACD,SAHD;EAID;EACF;;;6BAKM;EAAA;;EACL,WAAK6C,iBAAL,CAAuB/B,OAAvB,CAA+B,UAAAI,MAAM,EAAI;EACvCA,QAAAA,MAAM,CAAChE,mBAAP,CAA2B3B,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAACuE,OAA9C;EACD,OAFD;EAGD;;;8BAQO7C,OAAO;EACbA,MAAAA,KAAK,CAACgB,cAAN;EAEA,WAAK8E,aAAL,GAAqB9F,KAAK,CAACgE,MAA3B;EACA,WAAK+B,qBAAL,GAA6B,KAAKD,aAAL,CAAmB7B,YAAnB,CAAgCjG,WAAS,CAAC2D,WAA1C,CAA7B;EAEA,WAAKqE,cAAL,GAAsB,KAAKW,oBAAL,CAA0B,KAAKZ,qBAA/B,CAAtB;EACA,WAAKE,UAAL,GAAkBpH,QAAQ,CAAC8B,aAAT,CAAuB,KAAKqF,cAA5B,CAAlB;;EAEA,UAAI,CAAC,KAAKF,aAAL,CAAmB7B,YAAnB,CAAgCjG,WAAS,CAAC4D,WAA1C,CAAL,EAA6D;EAC3D,eAAOsC,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACE,eAAT,CAAyB,KAAK0D,qBAA9B,CAAd,CAAP;EACD;;EAED,WAAKG,kBAAL,GAA0B,KAAKJ,aAAL,CAAmB7B,YAAnB,CAAgCjG,WAAS,CAAC4D,WAA1C,CAA1B;EACA,WAAKuE,oBAAL,cAAgCnI,WAAS,CAAC+G,cAA1C,eAA6D,KAAKmB,kBAAlE;;EAEA,UAAI,CAACrH,QAAQ,CAAC8B,aAAT,CAAuB,KAAKwF,oBAA5B,CAAL,EAAwD;EACtD,eAAOjC,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACyE,kBAAT,CAA4B,KAAKV,kBAAjC,CAAd,CAAP;EACD;;EAED,WAAKL,gBAAL,GAAwBhH,QAAQ,CAAC8B,aAAT,CAAuB,KAAKwF,oBAA5B,CAAxB;EACA,WAAKC,cAAL,GAAsBvH,QAAQ,CAACgI,cAAT,CAAwB,KAAKd,qBAA7B,CAAtB;;EAEA,UAAMe,oBAAoB,GAAG,KAAKb,UAAL,CAAgBhC,YAAhB,CAA6BjG,WAAS,CAACyD,YAAvC,CAA7B;;EAEA,WAAK4E,wBAAL,GAAgCS,oBAAoB,KAAK,MAAzB,GAAkC,OAAlC,GAA4C,MAA5E;EACA,WAAKR,yBAAL,GAAiC,KAAKD,wBAAL,KAAkC,OAAlC,GAA4C,MAA5C,GAAqD,OAAtF;;EAEA,WAAKU,qBAAL;;EACA,WAAKC,wBAAL;EACD;;;sCAMejD,QAAQ;EACtB,UAAMkD,QAAQ,GAAGlD,MAAM,CAACE,YAAP,CAAoBjG,WAAS,CAAC2D,WAA9B,CAAjB;;EAEA,UAAI,CAAC9C,QAAQ,CAACgI,cAAT,CAAwBI,QAAxB,CAAL,EAAwC;EACtC,eAAO/C,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACqD,gBAAT,CAA0ByB,QAA1B,CAAd,CAAP;EACD;;EAED,UAAMC,aAAa,GAAGrI,QAAQ,CAACgI,cAAT,CAAwBI,QAAxB,CAAtB;;EACA,UAAME,gBAAgB,GAAG,KAAKR,oBAAL,CAA0BM,QAA1B,CAAzB;;EAEA,UAAI,CAACpI,QAAQ,CAAC8B,aAAT,CAAuBwG,gBAAvB,CAAL,EAA+C;EAC7C,eAAOjD,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACmD,YAAT,CAAsB2B,QAAtB,CAAd,CAAP;EACD;;EAED,UAAMG,YAAY,GAAGvI,QAAQ,CAAC8B,aAAT,CAAuBwG,gBAAvB,CAArB;;EACA,UAAME,gBAAgB,GAAG,KAAKC,gCAAL,CAAsCH,gBAAtC,CAAzB;;EACA,UAAMI,YAAY,GAAG1I,QAAQ,CAACC,gBAAT,CAA0BuI,gBAA1B,EAA4C,CAA5C,CAArB;;EAEA,UAAI,CAACE,YAAD,IAAiB,CAACA,YAAY,CAAChF,EAAnC,EAAuC;EACrC2B,QAAAA,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACoD,kBAAT,CAA4B0B,QAA5B,CAAd;EACD;;EAED,UAAMO,qBAAqB,GAAGjJ,oBAAoB,YAAK2I,aAAa,CAAC3E,EAAnB,EAAlD;EAEAwB,MAAAA,MAAM,CAACH,YAAP,CAAoB5F,WAAS,CAACmH,aAA9B,EAA6C8B,QAA7C;EACAC,MAAAA,aAAa,CAACtD,YAAd,CAA2B5F,WAAS,CAACoH,eAArC,EAAsDmC,YAAY,CAAChF,EAAnE;;EAEA,UAAI,CAAC6E,YAAY,CAACnD,YAAb,CAA0BjG,WAAS,CAACyD,YAApC,CAAL,EAAwD;EACtD,eAAOyC,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACkD,gBAAT,CAA0B4B,QAA1B,CAAd,CAAP;EACD;;EAED,UAAMQ,mBAAmB,GAAGL,YAAY,CAACnD,YAAb,CAA0BjG,WAAS,CAACyD,YAApC,CAA5B;;EACA,UAAIgG,mBAAmB,KAAK,MAA5B,EAAoC;EAClCP,QAAAA,aAAa,CAAC3C,KAAd,CAAoBmD,SAApB,aAAmCR,aAAa,CAACS,YAAjD;EACA5D,QAAAA,MAAM,CAACH,YAAP,CAAoB5F,WAAS,CAACkH,aAA9B,EAA6C,MAA7C;EACAgC,QAAAA,aAAa,CAACtD,YAAd,CAA2B5F,WAAS,CAAC6D,WAArC,EAAkD,OAAlD;EACA2F,QAAAA,qBAAqB,CAAC7D,OAAtB,CAA8B,UAAAhF,OAAO,EAAI;EACvCA,UAAAA,OAAO,CAACiF,YAAR,CAAqB5F,WAAS,CAACgE,QAA/B,EAAyC,GAAzC;EACD,SAFD;EAGD,OAPD,MAOO;EACL+B,QAAAA,MAAM,CAACH,YAAP,CAAoB5F,WAAS,CAACkH,aAA9B,EAA6C,OAA7C;EACAgC,QAAAA,aAAa,CAACtD,YAAd,CAA2B5F,WAAS,CAAC6D,WAArC,EAAkD,MAAlD;EACA2F,QAAAA,qBAAqB,CAAC7D,OAAtB,CAA8B,UAAAhF,OAAO,EAAI;EACvCA,UAAAA,OAAO,CAACiF,YAAR,CAAqB5F,WAAS,CAACgE,QAA/B,EAAyC,IAAzC;EACD,SAFD;EAGD;EACF;;;uDAOgC4F,MAAM;EACrC,aAAO,KAAKrB,aAAL,CACJ7H,GADI,CAEH,UAAAmJ,GAAG;EAAA,yBAAOD,IAAP,iBAAkB5J,WAAS,CAACgH,kBAA5B,kBAAsD6C,GAAtD,eAA8D7J,WAAS,CAAC2D,WAAxE;EAAA,OAFA,EAIJ/C,IAJI,CAIC,IAJD,CAAP;EAKD;;;uDAOgCgJ,MAAM;EACrC,aAAO,KAAKrB,aAAL,CAAmB7H,GAAnB,CAAuB,UAAAmJ,GAAG;EAAA,yBAAOD,IAAP,iBAAkBC,GAAlB;EAAA,OAA1B,EAAmDjJ,IAAnD,CAAwD,IAAxD,CAAP;EACD;;;2CAOoB2D,IAAI;EACvB,wBAAWvE,WAAS,CAACgH,kBAArB,eAA4CzC,EAA5C;EACD;;;8CAMuB;EAAA;;EACtB,UAAI,KAAKsD,gBAAL,CAAsBiC,YAAtB,CAAmC9J,WAAS,CAACiH,oBAA7C,CAAJ,EAAwE;EAExE,UAAM8C,cAAc,aAAM,KAAK5B,oBAAX,eAAoCnI,WAAS,CAAC6D,WAA9C,MAApB;EACA,UAAMmG,OAAO,GAAGnJ,QAAQ,CAACC,gBAAT,WACX,KAAKqH,oBADM,eACmBnI,WAAS,CAACyD,YAD7B,OAAhB;EAGA,UAAMwG,UAAU,GAAGpJ,QAAQ,CAACC,gBAAT,CAA0BiJ,cAA1B,CAAnB;;EAEA,UAAMvB,uBAAuB,GAAG,KAAKC,gCAAL,CAAsC,KAAKN,oBAA3C,CAAhC;;EACA,UAAM+B,UAAU,GAAGrJ,QAAQ,CAACC,gBAAT,CAA0B0H,uBAA1B,CAAnB;EAEAyB,MAAAA,UAAU,CAACtE,OAAX,CAAmB,UAAAwE,OAAO,EAAI;EAC5B,YAAIA,OAAO,KAAK,MAAI,CAAC/B,cAArB,EAAqC+B,OAAO,CAAC5D,KAAR,CAAcmD,SAAd,GAA0B,IAA1B;EACtC,OAFD;EAIAnJ,MAAAA,oBAAoB,CAACwJ,cAAD,CAApB,CAAqCpE,OAArC,CAA6C,UAAAhF,OAAO,EAAI;EACtDA,QAAAA,OAAO,CAACiF,YAAR,CAAqB5F,WAAS,CAACgE,QAA/B,EAAyC,IAAzC;EACD,OAFD;;EAIA,WAAKoG,4BAAL,CAAkCJ,OAAlC,EAA2ChK,WAAS,CAACyD,YAArD,EAAmE,MAAnE,EAA2E,OAA3E;;EACA,WAAK2G,4BAAL,CAAkCF,UAAlC,EAA8ClK,WAAS,CAACkH,aAAxD,EAAuE,MAAvE,EAA+E,OAA/E;;EACA,WAAKkD,4BAAL,CAAkCH,UAAlC,EAA8CjK,WAAS,CAAC6D,WAAxD,EAAqE,OAArE,EAA8E,MAA9E;EACD;;;iDAK0B;EAAA;;EACzB,WAAKoE,UAAL,CAAgBrC,YAAhB,CAA6B5F,WAAS,CAACyD,YAAvC,EAAqD,KAAK4E,wBAA1D;;EACA,WAAKP,aAAL,CAAmBlC,YAAnB,CAAgC5F,WAAS,CAACkH,aAA1C,EAAyD,KAAKmB,wBAA9D;;EACA,WAAKD,cAAL,CAAoBxC,YAApB,CAAiC5F,WAAS,CAAC6D,WAA3C,EAAwD,KAAKyE,yBAA7D;;EAEA,UAAM+B,kBAAkB,cAAO,KAAKtC,qBAAZ,CAAxB;EACAxH,MAAAA,oBAAoB,CAAC8J,kBAAD,CAApB,CAAyC1E,OAAzC,CAAiD,UAAAhF,OAAO,EAAI;EAC1D,YAAM2J,KAAK,GAAG,MAAI,CAACjC,wBAAL,KAAkC,MAAlC,GAA2C,GAA3C,GAAiD,IAA/D;EACA1H,QAAAA,OAAO,CAACiF,YAAR,CAAqB5F,WAAS,CAACgE,QAA/B,EAAyCsG,KAAzC;EACD,OAHD;;EAKA,UAAI,KAAKlC,cAAL,CAAoB7B,KAApB,CAA0BmD,SAA9B,EAAyC;EACvC,aAAKtB,cAAL,CAAoB7B,KAApB,CAA0BmD,SAA1B,GAAsC,IAAtC;EACD,OAFD,MAEO;EACL,aAAKtB,cAAL,CAAoB7B,KAApB,CAA0BmD,SAA1B,aAAyC,KAAKtB,cAAL,CAAoBuB,YAA7D;EACD;EACF;;;mDAS4BY,UAAUC,eAAeC,cAAcC,UAAU;EAC5EH,MAAAA,QAAQ,CAAC5E,OAAT,CAAiB,UAAAhF,OAAO,EAAI;EAC1B,YAAIA,OAAO,CAACmJ,YAAR,CAAqBU,aAArB,EAAoCC,YAApC,CAAJ,EAAuD;EACrD9J,UAAAA,OAAO,CAACiF,YAAR,CAAqB4E,aAArB,EAAoCE,QAApC;EACD;EACF,OAJD;EAKD;;;;IAjPoC3J;;ECrCvC,IAAMpB,UAAQ,GAAG;EACfE,EAAAA,GAAG,EAAE,CADU;EAEfD,EAAAA,KAAK,EAAE,EAFQ;EAGfyD,EAAAA,MAAM,EAAE,EAHO;EAIfvD,EAAAA,QAAQ,EAAE,EAJK;EAKfC,EAAAA,UAAU,EAAE;EALG,CAAjB;EAQA,IAAMC,WAAS,GAAG;EAEhB2K,EAAAA,aAAa,EAAE,eAFC;EAIhBhH,EAAAA,WAAW,EAAE,aAJG;EAKhBC,EAAAA,WAAW,EAAE,aALG;EAMhBH,EAAAA,YAAY,EAAE,cANE;EAQhBO,EAAAA,QAAQ,EAAE,UARM;EAShB4G,EAAAA,aAAa,EAAE,eATC;EAUhBzD,EAAAA,aAAa,EAAE,eAVC;EAWhBC,EAAAA,eAAe,EAAE,iBAXD;EAYhBF,EAAAA,aAAa,EAAE,eAZC;EAahBnD,EAAAA,IAAI,EAAE;EAbU,CAAlB;EAgBA,IAAM3D,QAAM,GAAG;EACbC,EAAAA,OAAO,EAAE,SADI;EAEbC,EAAAA,KAAK,EAAE;EAFM,CAAf;EAKA,IAAM6D,UAAQ,GAAG;EACfE,EAAAA,eAAe,6DADA;EAEfwG,EAAAA,iBAAiB,EAAE,2BAAAjB,IAAI;EAAA,uEAAyDA,IAAzD;EAAA,GAFR;EAGfkB,EAAAA,aAAa,EAAE,uBAAAlB,IAAI;EAAA,yDAA2CA,IAA3C;EAAA;EAHJ,CAAjB;;MAWqBmB;;;EACnB,sBAAc;EAAA;;EAAA;;EACZ;EAEA,UAAKtG,UAAL,GAAkB,iBAAiBC,IAAjB,CAAsBC,SAAS,CAACC,SAAhC,CAAlB;EAGA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAa5D,IAAb,+BAAf;EACA,UAAK+J,oBAAL,GAA4B,MAAKA,oBAAL,CAA0B/J,IAA1B,+BAA5B;EACA,UAAKgK,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBhK,IAAzB,+BAA3B;EACA,UAAKiK,eAAL,GAAuB,MAAKA,eAAL,CAAqBjK,IAArB,+BAAvB;EACA,UAAK6D,YAAL,GAAoB,MAAKA,YAAL,CAAkB7D,IAAlB,+BAApB;EACA,UAAK+D,qBAAL,GAA6B,MAAKA,qBAAL,CAA2B/D,IAA3B,+BAA7B;EACA,UAAKkK,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBlK,IAAzB,+BAA3B;EAGA,UAAKmK,qBAAL,GAA6B,IAA7B;EACA,UAAKC,eAAL,GAAuB,IAAvB;EACA,UAAKC,mBAAL,GAA2B,IAA3B;EACA,UAAKC,oBAAL,GAA4B,EAA5B;EACA,UAAKC,iBAAL,GAAyB,IAAzB;EACA,UAAKC,iBAAL,GAAyB,EAAzB;EACA,UAAKC,mBAAL,GAA2B,EAA3B;EACA,UAAKC,qBAAL,GAA6B,EAA7B;EAGA,UAAKC,gBAAL,GAAwB,EAAxB;EACA,UAAKC,UAAL,GAAkB,EAAlB;EAGA,UAAKC,sBAAL,cAAkC9L,WAAS,CAAC2K,aAA5C;EACA,UAAKoB,mBAAL,cAA+B/L,WAAS,CAAC2D,WAAzC;EA9BY;EA+Bb;;;;8BAQO;EAAA;;EACN,WAAKkI,UAAL,GAAkBhL,QAAQ,CAACC,gBAAT,WAA6B,KAAKgL,sBAAlC,EAAlB;EACA,WAAKF,gBAAL,GAAwB/K,QAAQ,CAACC,gBAAT,WACnB,KAAKgL,sBADc,gBACc,KAAKC,mBADnB,EAAxB;;EAIA,UAAI,KAAKF,UAAL,CAAgBjK,MAApB,EAA4B;EAC1B,aAAKiK,UAAL,CAAgBlG,OAAhB,CAAwB,UAAAqG,QAAQ;EAAA,iBAAI,MAAI,CAACC,cAAL,CAAoBD,QAApB,CAAJ;EAAA,SAAhC;EACD;;EAED,WAAKJ,gBAAL,CAAsBjG,OAAtB,CAA8B,UAAAI,MAAM,EAAI;EACtCA,QAAAA,MAAM,CAACjE,gBAAP,CAAwB1B,QAAM,CAACE,KAA/B,EAAsC,MAAI,CAACuE,OAA3C;EACAkB,QAAAA,MAAM,CAACjE,gBAAP,CAAwB1B,QAAM,CAACC,OAA/B,EAAwC,MAAI,CAAC6K,eAA7C;EACD,OAHD;EAID;;;6BAKM;EAAA;;EACL,WAAKU,gBAAL,CAAsBjG,OAAtB,CAA8B,UAAAI,MAAM,EAAI;EACtCA,QAAAA,MAAM,CAAChE,mBAAP,CAA2B3B,QAAM,CAACE,KAAlC,EAAyC,MAAI,CAACuE,OAA9C;EACAkB,QAAAA,MAAM,CAAChE,mBAAP,CAA2B3B,QAAM,CAACC,OAAlC,EAA2C,MAAI,CAAC6K,eAAhD;EACD,OAHD;EAID;;;8BASOlJ,OAAOkK,KAAK;EAAA;;EAClBlK,MAAAA,KAAK,CAACgB,cAAN;EACAhB,MAAAA,KAAK,CAACmK,eAAN;;EAEA,UAAI,KAAKf,qBAAT,EAAgC;EAC9B,aAAKI,iBAAL,GAAyB,KAAzB;;EACA,aAAK1G,YAAL,CAAkB9C,KAAlB;;EACA,aAAKwJ,iBAAL,GAAyB,IAAzB;EACD;;EAGD,WAAKJ,qBAAL,GAA6BpJ,KAAK,CAACgE,MAAnC;;EAEA,UAAI,CAAC,KAAKoF,qBAAL,CAA2BnF,YAA3B,CAAwCjG,WAAS,CAAC4D,WAAlD,CAAL,EAAqE;EACnE,eAAOsC,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAACE,eAAvB,CAAP;EACD;;EAED,WAAKoH,iBAAL,GAAyB,KAAKL,qBAAL,CAA2BnF,YAA3B,CAAwCjG,WAAS,CAAC4D,WAAlD,CAAzB;EAGA,WAAK8H,mBAAL,cAA+B1L,WAAS,CAAC2K,aAAzC,gBAA2D,KAAKc,iBAAhE;;EAEA,UAAI,CAAC5K,QAAQ,CAAC8B,aAAT,CAAuB,KAAK+I,mBAA5B,CAAL,EAAuD;EACrD,eAAOxF,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAAC0G,iBAAT,CAA2B,KAAKa,mBAAhC,CAAd,CAAP;EACD;;EAED,WAAKL,eAAL,GAAuBxK,QAAQ,CAAC8B,aAAT,CAAuB,KAAK+I,mBAA5B,CAAvB;EAGA,WAAKC,qBAAL,GAA6B,KAAKP,qBAAL,CAA2BnF,YAA3B,CAAwCjG,WAAS,CAAC2D,WAAlD,CAA7B;EACA,WAAK2H,mBAAL,GAA2BzK,QAAQ,CAACgI,cAAT,CAAwB,KAAK8C,qBAA7B,CAA3B;;EAGA,WAAKP,qBAAL,CAA2BxF,YAA3B,CAAwC5F,WAAS,CAACkH,aAAlD,EAAiE,MAAjE;;EACA,WAAKmE,eAAL,CAAqBzF,YAArB,CAAkC5F,WAAS,CAACyD,YAA5C,EAA0D,MAA1D;;EAGA,WAAK2H,qBAAL,CAA2BrJ,mBAA3B,CAA+C3B,QAAM,CAACE,KAAtD,EAA6D,KAAKuE,OAAlE;;EACA,WAAKuG,qBAAL,CAA2BtJ,gBAA3B,CAA4C1B,QAAM,CAACE,KAAnD,EAA0D,KAAKwE,YAA/D;;EAEAjE,MAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,QAAM,CAACC,OAAjC,EAA0C,KAAK2E,qBAA/C;EACAnE,MAAAA,QAAQ,CAACiB,gBAAT,CAA0B1B,QAAM,CAACE,KAAjC,EAAwC,KAAK6K,mBAA7C;;EAGA,UAAI,KAAK1G,UAAT,EAAqB;EACnB5D,QAAAA,QAAQ,CAACyB,IAAT,CAAciE,KAAd,CAAoBC,MAApB,GAA6B,SAA7B;EACD;;EAED,WAAK+E,oBAAL,GAA4B,KAAKa,iBAAL,CAAuB,KAAKV,mBAA5B,CAA5B;EAEA,WAAKW,iBAAL,GAAyB,KAAKd,oBAAL,CAA0B,CAA1B,CAAzB;EACA,WAAKe,gBAAL,GAAwB,KAAKf,oBAAL,CAA0B,KAAKA,oBAAL,CAA0B3J,MAA1B,GAAmC,CAA7D,CAAxB;EAEA,WAAKyK,iBAAL,CAAuBvK,gBAAvB,CAAwC1B,QAAM,CAACC,OAA/C,EAAwD,KAAK2K,oBAA7D;EACA,WAAKsB,gBAAL,CAAsBxK,gBAAtB,CAAuC1B,QAAM,CAACC,OAA9C,EAAuD,KAAK4K,mBAA5D;;EAEA,UAAIiB,GAAG,IAAIA,GAAG,KAAKvM,UAAQ,CAACG,QAA5B,EAAsC;EACpC,aAAKwM,gBAAL,CAAsBrJ,KAAtB;EACD,OAFD,MAEO;EACL,aAAKoJ,iBAAL,CAAuBpJ,KAAvB;EACD;;EAED,WAAKsI,oBAAL,CAA0B5F,OAA1B,CAAkC,UAAA4G,IAAI,EAAI;EACxCA,QAAAA,IAAI,CAAC3G,YAAL,CAAkB5F,WAAS,CAACgE,QAA5B,EAAsC,GAAtC;EACAuI,QAAAA,IAAI,CAACzK,gBAAL,CAAsB1B,QAAM,CAACE,KAA7B,EAAoC,MAAI,CAACwE,YAAzC;EACD,OAHD;;EAKA,WAAKuB,YAAL,WAAqB,KAAKqF,mBAA1B,YAAsD;EAAE7J,QAAAA,SAAS,EAAE;EAAb,OAAtD;EACD;;;2CAMoBG,OAAO;EAC1B,UAAMG,QAAQ,GAAGH,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAACC,KAAzB,IAAkCoC,KAAK,CAACG,QAAzD;EACA,UAAMF,MAAM,GAAGD,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAACE,GAAxC;;EAEA,UAAIsC,QAAQ,IAAIF,MAAhB,EAAwB;EACtB,aAAK6C,YAAL,CAAkB9C,KAAlB;EACD;EACF;;;0CAMmBA,OAAO;EACzB,UAAMG,QAAQ,GAAGH,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAACC,KAAzB,IAAkCoC,KAAK,CAACG,QAAzD;EACA,UAAMF,MAAM,GAAGD,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAACE,GAAxC;;EAEA,UAAIoC,MAAM,IAAI,CAACE,QAAf,EAAyB;EACvB,aAAK2C,YAAL,CAAkB9C,KAAlB;EACD;EACF;;;sCAMeA,OAAO;EACrB,UAAIA,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAACG,QAAzB,IAAqCkC,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAACI,UAAlE,EAA8E;EAC5E,aAAK8E,OAAL,CAAa7C,KAAb,EAAoBA,KAAK,CAACE,KAA1B;EACD;EACF;;;mCAMYF,OAAO;EAAA;;EAClBA,MAAAA,KAAK,CAACgB,cAAN;EAEA,WAAK6D,YAAL;;EAEA,WAAKuE,qBAAL,CAA2BxF,YAA3B,CAAwC5F,WAAS,CAACkH,aAAlD,EAAiE,OAAjE;;EACA,WAAKmE,eAAL,CAAqBzF,YAArB,CAAkC5F,WAAS,CAACyD,YAA5C,EAA0D,OAA1D;;EAEA,WAAK8H,oBAAL,CAA0B5F,OAA1B,CAAkC,UAAA4G,IAAI,EAAI;EACxCA,QAAAA,IAAI,CAAC3G,YAAL,CAAkB5F,WAAS,CAACgE,QAA5B,EAAsC,IAAtC;EACAuI,QAAAA,IAAI,CAACxK,mBAAL,CAAyB3B,QAAM,CAACE,KAAhC,EAAuC,MAAI,CAACwE,YAA5C;EACD,OAHD;;EAKA,WAAKsG,qBAAL,CAA2BrJ,mBAA3B,CAA+C3B,QAAM,CAACE,KAAtD,EAA6D,KAAKwE,YAAlE;;EACA,WAAKsG,qBAAL,CAA2BtJ,gBAA3B,CAA4C1B,QAAM,CAACE,KAAnD,EAA0D,KAAKuE,OAA/D;;EAEAhE,MAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,QAAM,CAACC,OAApC,EAA6C,KAAK2E,qBAAlD;;EAEA,UAAI,KAAKP,UAAT,EAAqB;EACnB5D,QAAAA,QAAQ,CAACyB,IAAT,CAAciE,KAAd,CAAoBC,MAApB,GAA6B,MAA7B;EACD;;EAED3F,MAAAA,QAAQ,CAACkB,mBAAT,CAA6B3B,QAAM,CAACE,KAApC,EAA2C,KAAK6K,mBAAhD;;EAEA,UAAI,KAAKK,iBAAT,EAA4B;EAC1B,aAAK7E,kBAAL;EACD;;EAED,WAAKyE,qBAAL,GAA6B,IAA7B;EACD;;;4CAMqBpJ,OAAO;EAC3B,UAAIA,KAAK,CAACE,KAAN,KAAgBvC,UAAQ,CAAC0D,MAA7B,EAAqC;EACnC,aAAKyB,YAAL,CAAkB9C,KAAlB;EACD;EACF;;;0CAMmBA,OAAO;EACzB,UAAIA,KAAK,CAACgE,MAAN,KAAiB,KAAKoF,qBAAtB,IAA+CpJ,KAAK,CAACgE,MAAN,KAAiB,KAAKsF,mBAAzE,EAA8F;EAC5F,aAAKxG,YAAL,CAAkB9C,KAAlB;EACD;EACF;;;2CAKoB;EACnB,WAAKoJ,qBAAL,CAA2BxF,YAA3B,CAAwC5F,WAAS,CAACwM,SAAlD,EAA6D,IAA7D;;EACA,WAAKpB,qBAAL,CAA2BnI,KAA3B;;EACA,WAAKmI,qBAAL,CAA2BtE,eAA3B,CAA2C9G,WAAS,CAACwM,SAArD;EACD;;;wCAOiB5C,MAAM;EACtB,aAAO/I,QAAQ,CAACC,gBAAT,WAA6B8I,IAA7B,6BAAoDA,IAApD,yBAAP;EACD;;;qCAMcoC,UAAU;EACvB,UAAMS,UAAU,GAAGT,QAAQ,CAAC/F,YAAT,CAAsBjG,WAAS,CAAC2K,aAAhC,CAAnB;EACA,UAAM+B,cAAc,cAAO1M,WAAS,CAAC2K,aAAjB,gBAAmC8B,UAAnC,QAApB;EACA,UAAME,qBAAqB,aAAMD,cAAN,eAA3B;;EAEA,UAAI,CAAC7L,QAAQ,CAAC8B,aAAT,WAA0B+J,cAA1B,WAAL,EAAuD;EACrD,eAAOxG,OAAO,CAACC,KAAR,CAAchC,UAAQ,CAAC2G,aAAT,CAAuB4B,cAAvB,CAAd,CAAP;EACD;;EAED,UAAME,YAAY,GAAG/L,QAAQ,CAAC8B,aAAT,WAA0B+J,cAA1B,WAArB;EACA,UAAMG,cAAc,GAAGhM,QAAQ,CAAC8B,aAAT,WAA0B+J,cAA1B,gBAA8C,KAAKX,mBAAnD,EAAvB;EAEAc,MAAAA,cAAc,CAACjH,YAAf,CAA4B5F,WAAS,CAACmH,aAAtC,EAAqDyF,YAAY,CAACrI,EAAlE;EACAsI,MAAAA,cAAc,CAACjH,YAAf,CAA4B5F,WAAS,CAAC4K,aAAtC,EAAqD,MAArD;EACAiC,MAAAA,cAAc,CAACjH,YAAf,CAA4B5F,WAAS,CAACkH,aAAtC,EAAqD,OAArD;EACA0F,MAAAA,YAAY,CAAChH,YAAb,CAA0B5F,WAAS,CAACoH,eAApC,EAAqDyF,cAAc,CAACtI,EAApE;EAEA,UAAMuI,iBAAiB,GAAGjM,QAAQ,CAACC,gBAAT,CAA0B6L,qBAA1B,CAA1B;EACAG,MAAAA,iBAAiB,CAACnH,OAAlB,CAA0B,UAAAoH,IAAI;EAAA,eAAIA,IAAI,CAACnH,YAAL,CAAkB5F,WAAS,CAAC+D,IAA5B,EAAkC,MAAlC,CAAJ;EAAA,OAA9B;;EAEA,WAAKqI,iBAAL,CAAuBM,cAAvB,EAAuC/G,OAAvC,CAA+C,UAAA4G,IAAI,EAAI;EACrDA,QAAAA,IAAI,CAAC3G,YAAL,CAAkB5F,WAAS,CAAC+D,IAA5B,EAAkC,UAAlC;EACAwI,QAAAA,IAAI,CAAC3G,YAAL,CAAkB5F,WAAS,CAACgE,QAA5B,EAAsC,IAAtC;EACD,OAHD;EAID;;;;IAxRmCjD;;MCrCzBiM,MAAM,GAAG,IAAIC,KAAJ,EAAf;AACP,MAAaC,UAAU,GAAG,IAAIC,SAAJ,EAAnB;AACP,MAAaC,SAAS,GAAG,IAAIC,QAAJ,EAAlB;AACP,MAAatM,OAAK,GAAG,IAAIuM,KAAJ,EAAd;EAEP,IAAMC,QAAQ,GAAG;EAEfP,EAAAA,MAAM,EAANA,MAFe;EAGfE,EAAAA,UAAU,EAAVA,UAHe;EAIfE,EAAAA,SAAS,EAATA,SAJe;EAOfrM,EAAAA,KAAK,EAALA;EAPe,CAAjB;;EAUAwM,QAAQ,CAACC,KAAT,GAAiB,YAAM;EAErBD,EAAAA,QAAQ,CAACP,MAAT,CAAgBQ,KAAhB;EACAD,EAAAA,QAAQ,CAACL,UAAT,CAAoBM,KAApB;EACAD,EAAAA,QAAQ,CAACH,SAAT,CAAmBI,KAAnB;EAGAD,EAAAA,QAAQ,CAACxM,KAAT,CAAe0M,kBAAf;EACD,CARD;;EAUAF,QAAQ,CAACG,IAAT,GAAgB,YAAM;EAEpBH,EAAAA,QAAQ,CAACP,MAAT,CAAgBU,IAAhB;EACAH,EAAAA,QAAQ,CAACL,UAAT,CAAoBQ,IAApB;EACAH,EAAAA,QAAQ,CAACH,SAAT,CAAmBM,IAAnB;EAGAH,EAAAA,QAAQ,CAACxM,KAAT,CAAe4M,mBAAf;EACD,CARD;;ECzBAC,MAAM,CAACL,QAAP,GAAkBA,QAAlB;;;;;;;;;;;;;;;;"}