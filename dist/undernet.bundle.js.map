{"version":3,"file":"undernet.bundle.js","sources":["../js/src/utils.js","../js/src/components/modal.js","../js/src/components/accordion.js","../js/src/components/dropdown.js","../js/src/undernet.js"],"sourcesContent":["\"use strict\"\n\nconst keyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst selectors = {\n  NOT_VISUALLY_HIDDEN: \":not(.is-visually-hidden)\",\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n  KEYBOARD_CLASS: \"using-keyboard\",\n}\n\nconst events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\n/**\n * Utility methods for DOM traversal and focus trapping.\n * @module Utils\n */\nexport default class Utils {\n  constructor() {\n    this.focusContainerSelector = \"\"\n    this.focusableChildren = []\n    this.focusableFirstChild = null\n    this.focusableLastChild = null\n\n    // Used for focus outline helper\n    this.listeningForKeydown = false\n\n    // Used for captureFocus() if options.useArrows is passed\n    this.trapFocusWithArrows = false\n  }\n\n  // public\n\n  /**\n   * Listens to the first and last elements matched from this.getFocusableElements()\n   * @param {String} container - The container's class, attribute, etc.\n   * @param {Object} options - Optional has hof options.\n   */\n  captureFocus(container, options) {\n    this.focusContainerSelector = container\n    this.focusableChildren = this.getFocusableElements(this.focusContainerSelector)\n    this.focusableFirstChild = this.focusableChildren[0]\n    this.focusableLastChild = this.focusableChildren[this.focusableChildren.length - 1]\n\n    if (options) {\n      if (options.useArrows) {\n        this.trapFocusWithArrows = options.useArrows || this.trapFocusWithArrows\n        document.addEventListener(events.KEYDOWN, this._handleFocusTrapWithArrows)\n      }\n    } else {\n      document.addEventListener(events.KEYDOWN, this._handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Stop trapping focus set in this.captureFocus()\n   */\n  releaseFocus() {\n    if (this.trapFocusWithArrows) {\n      document.removeEventListener(events.KEYDOWN, this._handleFocusTrapWithArrows)\n      this.trapFocusWithArrows = false\n    } else {\n      document.removeEventListener(events.KEYDOWN, this._handleFocusTrapWithTab)\n    }\n  }\n\n  /**\n   * Begin listening to _listenForKeyboard()\n   */\n  enableFocusOutline() {\n    document.addEventListener(events.KEYDOWN, this._listenForKeyboard)\n  }\n\n  /**\n   * Completely disable focus outline utility.\n   */\n  disableFocusOutline() {\n    if (this.listeningForKeydown) {\n      document.removeEventListener(events.KEYDOWN, this._listenForKeyboard)\n    } else {\n      document.removeEventListener(events.CLICK, this._listenForClick)\n    }\n  }\n\n  /**\n   * Because IE does not recognize NodeList.forEach(),\n   * we use a cross-browser solution for returning an array of DOM nodes every time.\n   * @param {String} element - A DOM node's class, attribute, etc., to search the document.\n   * @return {Array}\n   */\n  getElements(element) {\n    const nodeList = document.querySelectorAll(element)\n    return Array.apply(null, nodeList)\n  }\n\n  /**\n   * Creates a string of element selector patterns using common elements.\n   * @param {String} container - The enclosing container's class, attribute, etc.\n   * @return {String}\n   */\n  getFocusableElements(container) {\n    const focusables = selectors.FOCUSABLE_TAGS.map(element => {\n      return `${container} ${element}${selectors.NOT_VISUALLY_HIDDEN}`\n    })\n\n    return this.getElements(focusables.join(\", \"))\n  }\n\n  // private\n\n  /**\n   * When a key is pressed, detect if it's tab or shift keys and enable\n   * focus outlines on currently focused element(s). Then, remove keydown listener\n   * and add click listener on _listenForClick().\n   * @param {Object} event - Event (keypress).\n   */\n  _listenForKeyboard = event => {\n    const tabKey = event.which === keyCodes.TAB\n    const shiftKey = event.which === keyCodes.SHIFT || event.shiftKey\n    const arrowUp = event.which === keyCodes.ARROW_UP\n    const arrowDown = event.which === keyCodes.ARROW_DOWN\n\n    if (tabKey || shiftKey || arrowUp || arrowDown) {\n      document.body.classList.add(selectors.KEYBOARD_CLASS)\n      document.removeEventListener(events.KEYDOWN, this._listenForKeyboard)\n      document.addEventListener(events.CLICK, this._listenForClick)\n      this.listeningForKeydown = false\n    }\n  }\n\n  /**\n   * On click, remove selectors.KEYBOARD_CLASS and re-add keydown listener.\n   * @param {Object} event - Event (keypress).\n   */\n  _listenForClick = event => {\n    document.body.classList.remove(selectors.KEYBOARD_CLASS)\n    document.removeEventListener(events.CLICK, this._listenForClick)\n    document.addEventListener(events.KEYDOWN, this._listenForKeyboard)\n    this.listeningForKeydown = true\n  }\n\n  /**\n   * Handles focus on first or last child in a container, using tab and tab+shift keys.\n   * @param {Object} event - Event (keypress)\n   */\n  _handleFocusTrapWithTab = event => {\n    const containerElement = document.querySelector(this.focusContainerSelector)\n    const containerActive = document.activeElement === containerElement\n    const firstActive = document.activeElement === this.focusableFirstChild\n    const lastActive = document.activeElement === this.focusableLastChild\n    const tabKey = event.which === keyCodes.TAB\n    const shiftKey = event.which === keyCodes.SHIFT || event.shiftKey\n    const hasShift = shiftKey && tabKey\n    const noShift = !shiftKey && tabKey\n\n    if (shiftKey && tabKey && (firstActive || containerActive)) {\n      event.preventDefault()\n      this.focusableLastChild.focus()\n    } else if (!shiftKey && tabKey && lastActive) {\n      event.preventDefault()\n      this.focusableFirstChild.focus()\n    }\n  }\n\n  /**\n   * Handles focus on the first, last, next, or previous child in a container, using up and down arrow keys.\n   * @param {Object} event - Event (keypress)\n   */\n  _handleFocusTrapWithArrows = event => {\n    const firstActive = document.activeElement === this.focusableFirstChild\n    const lastActive = document.activeElement === this.focusableLastChild\n    const arrowUp = event.which === keyCodes.ARROW_UP\n    const arrowDown = event.which === keyCodes.ARROW_DOWN\n\n    if (arrowUp || arrowDown) {\n      event.preventDefault()\n\n      if (firstActive && arrowUp) {\n        this.focusableLastChild.focus()\n      } else if (lastActive && arrowDown) {\n        this.focusableFirstChild.focus()\n      } else if (arrowDown) {\n        this._focusNextChild()\n      } else if (arrowUp) {\n        this._focusLastChild()\n      }\n    }\n  }\n\n  /**\n   * Focus the next child in this.focusableChildren.\n   */\n  _focusNextChild() {\n    for (let i = 0; i < this.focusableChildren.length; i++) {\n      if (this.focusableChildren[i] === document.activeElement) {\n        this.focusableChildren[i + 1].focus()\n        break\n      }\n    }\n  }\n\n  /**\n   * Focus the previous child in this.focusableChildren.\n   */\n  _focusLastChild() {\n    for (let i = 0; i < this.focusableChildren.length; i++) {\n      if (this.focusableChildren[i] === document.activeElement) {\n        this.focusableChildren[i - 1].focus()\n        break\n      }\n    }\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst keyCodes = {\n  ESCAPE: 27,\n}\n\nconst selectors = {\n  // unique\n  MODAL_CONTAINER: \"data-modal\",\n  MODAL_ID: \"data-modal-id\",\n  MODAL_BUTTON: \"data-modal-button\",\n  NO_SCROLL: \"no-scroll\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n}\n\nconst events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n}\n\nconst messages = {\n  NO_TARGET_ERROR: `Could not find [data-target] attribute associated with a [data-modal-button] element.`,\n  NO_PARENT_ERROR: `Could not find [data-parent] attribute associated with a [data-modal] element.`,\n  NO_ID_ERROR: id =>\n    `Could not find [data-modal-id='${id}'] associated with a [data-modal] element.`,\n}\n\n/**\n * Modal component class.\n * @module Modal\n * @requires Utils\n */\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n    // all modals\n    this.modals = []\n    this.modalButtons = []\n\n    // active modal\n    this.activeModalButton = null\n    this.activeModalOverlay = null\n    this.activeModal = null\n    this.activeModalId = \"\"\n    this.activeModalOverlayAttr = \"\"\n    this.activeModalSelector = \"\"\n    this.activeModalCloseButtons = []\n\n    // attribute helpers\n    this.modalContainerAttr = `[${selectors.MODAL_CONTAINER}]`\n    this.closeButtonAttr = `[${selectors.MODAL_CONTAINER}] [${selectors.DATA_CLOSE}]`\n  }\n\n  // public\n\n  /**\n   * Add accessible attributes to modal containers\n   * Begin listening to elements with [data-modal-button]\n   */\n  start() {\n    this.modals = this.getElements(this.modalContainerAttr)\n    this.modalButtons = this.getElements(`[${selectors.MODAL_BUTTON}]`)\n\n    this.getFocusableElements(this.modalContainerAttr).forEach(element => {\n      element.setAttribute(selectors.TABINDEX, \"-1\")\n    })\n\n    if (this.modals.length) {\n      this.modals.forEach(modal => {\n        this._setupModal(modal)\n      })\n    }\n\n    if (this.modalButtons.length) {\n      this.modalButtons.forEach(button => {\n        button.addEventListener(events.CLICK, this._render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to modal buttons\n   */\n  stop() {\n    this.modalButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   */\n  _render = event => {\n    event.preventDefault()\n    this.activeModalButton = event.target\n\n    if (!this.activeModalButton.getAttribute(selectors.DATA_TARGET)) {\n      return console.error(messages.NO_TARGET_ERROR)\n    }\n\n    this.activeModalId = this.activeModalButton.getAttribute(selectors.DATA_TARGET)\n    this.activeModalOverlayAttr = `[${selectors.MODAL_ID}=\"${this.activeModalId}\"]`\n\n    if (!document.querySelector(this.activeModalOverlayAttr)) {\n      return console.error(messages.NO_ID_ERROR(this.activeModalId))\n    }\n\n    this.activeModalOverlay = document.querySelector(this.activeModalOverlayAttr)\n\n    this.activeModalSelector = `${this.activeModalOverlayAttr} ${this.modalContainerAttr}`\n    this.activeModal = document.querySelector(this.activeModalSelector)\n    this.activeModalCloseButtons = this.getElements(\n      `${this.activeModalOverlayAttr} [${selectors.MODAL_CONTAINER}] [${selectors.DATA_CLOSE}]`,\n    )\n\n    this.getFocusableElements(this.activeModalSelector).forEach(element => {\n      element.setAttribute(selectors.TABINDEX, \"0\")\n    })\n\n    this._handleScrollStop()\n    this.captureFocus(this.activeModalSelector)\n    this.activeModalOverlay.setAttribute(selectors.ARIA_HIDDEN, \"false\")\n    this.activeModal.setAttribute(selectors.TABINDEX, \"-1\")\n    this.activeModalOverlay.setAttribute(selectors.DATA_VISIBLE, \"true\")\n    this.activeModal.focus()\n\n    // offset slight scroll caused by this.activeModal.focus()\n    this.activeModalOverlay.scrollTop = 0\n\n    // begin listening to events\n    document.addEventListener(events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(events.CLICK, this._handleOverlayClick)\n    this.activeModalCloseButtons.forEach(button => {\n      button.addEventListener(events.CLICK, this._handleClose)\n    })\n  }\n\n  _setupModal(modal) {\n    let modalId\n    if (!modal.getAttribute(selectors.DATA_PARENT)) {\n      return console.warn(messages.NO_PARENT_ERROR)\n    } else {\n      modalId = modal.getAttribute(selectors.DATA_PARENT)\n    }\n\n    let modalWrapper\n    if (!document.querySelector(`[${selectors.MODAL_ID}='${modalId}']`)) {\n      return console.error(messages.NO_ID_ERROR(modalId))\n    } else {\n      modalWrapper = document.querySelector(`[${selectors.MODAL_ID}='${modalId}']`)\n    }\n\n    modalWrapper.setAttribute(selectors.ARIA_HIDDEN, \"true\")\n    modalWrapper.setAttribute(selectors.DATA_VISIBLE, \"false\")\n    modal.setAttribute(selectors.ARIA_MODAL, \"true\")\n    modal.setAttribute(selectors.ROLE, \"dialog\")\n  }\n\n  /**\n   * Turn off event listeners and reset focus to last selected DOM node (button)\n   * @param {Object} event - Event (keydown or click)\n   */\n  _handleClose = event => {\n    event.preventDefault()\n    this.activeModalOverlay.setAttribute(selectors.DATA_VISIBLE, \"false\")\n    this._handleReturnFocus()\n    this._handleScrollRestore()\n    this.releaseFocus()\n    this.activeModalOverlay.setAttribute(selectors.ARIA_HIDDEN, \"true\")\n    this.activeModal.removeAttribute(selectors.TABINDEX)\n\n    this.getFocusableElements(this.activeModalSelector).forEach(element => {\n      element.setAttribute(selectors.TABINDEX, \"-1\")\n    })\n\n    // stop listening to events\n    document.removeEventListener(events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(events.CLICK, this._handleOverlayClick)\n    this.activeModalCloseButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this._handleClose)\n    })\n  }\n\n  /**\n   * Handles click event on the modal background to close it.\n   * @param {Object} event - Event (keydown)\n   */\n  _handleOverlayClick = event => {\n    if (event.target === this.activeModalOverlay) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Handles escape key event to close the current modal\n   * @param {Object} event - Event (keydown)\n   */\n  _handleEscapeKeyPress = event => {\n    if (event.which === keyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Returns focus to the last focused element before the modal was called.\n   * @param {Object} button - The current modal's corresponding button.\n   */\n  _handleReturnFocus() {\n    this.activeModalButton.setAttribute(selectors.TABINDEX, \"-1\")\n    this.activeModalButton.focus()\n    this.activeModalButton.removeAttribute(selectors.TABINDEX)\n  }\n\n  /**\n   * Restores scroll behavior to <html> and <body>\n   */\n  _handleScrollRestore() {\n    document.body.classList.remove(selectors.NO_SCROLL)\n    document.querySelector(\"html\").classList.remove(selectors.NO_SCROLL)\n  }\n\n  /**\n   * Prevents scroll behavior on <html> and <body>\n   */\n  _handleScrollStop() {\n    document.body.classList.add(selectors.NO_SCROLL)\n    document.querySelector(\"html\").classList.add(selectors.NO_SCROLL)\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst keyCodes = {\n  SPACE: 32,\n}\n\nconst selectors = {\n  // unique\n  ACCORDION_CONTAINER: \"data-accordion\",\n  ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find parent with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with ${id}.`,\n  NO_HEADER_ID_ERROR: id => `Could not find header tag associated with [data-target='${id}'].`,\n  NO_PARENT_ERROR: id => `Could not find [data-parent] associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not accordion content block with [id] ${id} associated with [data-target='${id}'].`,\n}\n\n/**\n * Accordion component class.\n * @module Accordion\n * @requires Utils\n */\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n    // all accordions\n    this.accordionButtons = []\n    this.accordionContentsAttr = \"\"\n    this.accordionContents = []\n\n    // active accordion\n    this.activeContainer = null\n    this.activeButton = null\n    this.activeAccordionRowId = \"\"\n    this.activeRowAttr = \"\"\n    this.activeRow = \"\"\n    this.activeContainerId = \"\"\n    this.activeContainerAttr = \"\"\n    this.activeContent = null\n    this.activeButtonExpandState = \"\"\n    this.activeContentHiddenState = \"\"\n  }\n\n  // public\n\n  /**\n   * Sets up accordion components and listens to buttons for events.\n   * Begin listening to [data-accordion-button] elements\n   */\n  start() {\n    this.accordionButtons = this.getElements(\n      `[${selectors.ACCORDION_CONTAINER}] [${selectors.DATA_TARGET}]`,\n    )\n\n    if (this.accordionButtons.length) {\n      this.accordionButtons.forEach(button => {\n        this._setupAccordion(button)\n        button.addEventListener(events.CLICK, this._render)\n        button.addEventListener(events.KEYDOWN, this._handleSpaceKeyPress)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to accordion buttons.\n   */\n  stop() {\n    this.accordionButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this._render)\n      button.removeEventListener(events.KEYDOWN, this._handleSpaceKeyPress)\n    })\n  }\n\n  // private\n\n  /**\n   * Add initial attributes to accordion elements.\n   * @param {Element} button - A button element that triggers an accordion.\n   */\n  _setupAccordion(button) {\n    const buttonId = button.getAttribute(selectors.DATA_TARGET)\n\n    if (!document.getElementById(buttonId)) {\n      return console.error(messages.NO_CONTENT_ERROR(buttonId))\n    }\n\n    const buttonContent = document.getElementById(buttonId)\n    const accordionRowAttr = this._getAccordionRowAttr(buttonId)\n\n    if (!document.querySelector(accordionRowAttr)) {\n      return console.error(messages.NO_ROW_ERROR(buttonId))\n    }\n\n    const accordionRow = document.querySelector(accordionRowAttr)\n    const buttonHeaderAttr = this._getPossibleAccordionHeaderAttrs(accordionRowAttr)\n    const buttonHeader = this.getElements(buttonHeaderAttr)[0]\n\n    if (!buttonHeader || !buttonHeader.id) {\n      console.error(messages.NO_HEADER_ID_ERROR(buttonId))\n    }\n\n    const buttonContentChildren = this.getFocusableElements(`#${buttonContent.id}`)\n\n    button.setAttribute(selectors.ARIA_CONTROLS, buttonId)\n    buttonContent.setAttribute(selectors.ARIA_LABELLEDBY, buttonHeader.id)\n\n    if (!accordionRow.getAttribute(selectors.DATA_VISIBLE)) {\n      return console.error(messages.NO_VISIBLE_ERROR(buttonId))\n    }\n\n    const contentShouldExpand = accordionRow.getAttribute(selectors.DATA_VISIBLE)\n    if (contentShouldExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(selectors.ARIA_EXPANDED, \"true\")\n      buttonContent.setAttribute(selectors.ARIA_HIDDEN, \"false\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(selectors.TABINDEX, \"0\")\n      })\n    } else {\n      button.setAttribute(selectors.ARIA_EXPANDED, \"false\")\n      buttonContent.setAttribute(selectors.ARIA_HIDDEN, \"true\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  /**\n   * Build a selector string to be passed into querySelectorAll() / _getElements()\n   * @param {String} - A unique attribute.\n   */\n  _getPossibleAccordionHeaderAttrs(attr) {\n    return `${attr} h1, ${attr} h2, ${attr} h3, ${attr} h4, ${attr} h5, ${attr} h6`\n  }\n\n  /**\n   * Return a unique accordion row attribute selector.\n   * @param {String} id - An id value associated with a given selectors.DATA_TARGET\n   * @return {String}\n   */\n  _getAccordionRowAttr(id) {\n    return `[${selectors.ACCORDION_ROW}='${id}']`\n  }\n\n  /**\n   * Open accordion content associated with an accordion button.\n   * @param {Object} event - The event object.\n   */\n  _render = event => {\n    event.preventDefault()\n\n    this.activeButton = event.target\n    this.activeAccordionRowId = this.activeButton.getAttribute(selectors.DATA_TARGET)\n\n    this.activeRowAttr = this._getAccordionRowAttr(this.activeAccordionRowId)\n    this.activeRow = document.querySelector(this.activeRowAttr)\n\n    if (!this.activeButton.getAttribute(selectors.DATA_PARENT)) {\n      return console.error(messages.NO_PARENT_ERROR(this.activeAccordionRowId))\n    }\n\n    this.activeContainerId = this.activeButton.getAttribute(selectors.DATA_PARENT)\n    this.activeContainerAttr = `[${selectors.ACCORDION_CONTAINER}='${this.activeContainerId}']`\n\n    if (!document.querySelector(this.activeContainerAttr)) {\n      return console.error(messages.NO_ACCORDION_ERROR(this.activeContainerId))\n    }\n\n    this.activeContainer = document.querySelector(this.activeContainerAttr)\n    this.activeContent = document.getElementById(this.activeAccordionRowId)\n\n    const accordionButtonState = this.activeRow.getAttribute(selectors.DATA_VISIBLE)\n\n    this.activeButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this.activeContentHiddenState = this.activeButtonExpandState === \"false\" ? \"true\" : \"false\"\n\n    this._closeAllIfToggleable()\n    this._toggleSelectedAccordion()\n  }\n\n  /**\n   * If a keypress is the spacebar on a button, open its accordion content.\n   * @param {Object} event - The event object.\n   */\n  _handleSpaceKeyPress = event => {\n    if (event.which === keyCodes.SPACE) this._render(event)\n  }\n\n  /**\n   * If toggling multiple rows at once isn't enabled, close all rows except the selected one.\n   * This ensures the selected one can be closed if it's already open.\n   */\n  _closeAllIfToggleable() {\n    if (this.activeContainer.hasAttribute(selectors.DATA_TOGGLE_MULTIPLE)) return\n\n    const allContentAttr = `${this.activeContainerAttr} [${selectors.ARIA_HIDDEN}]`\n    const allRows = this.getElements(`${this.activeContainerAttr} [${selectors.DATA_VISIBLE}]`)\n    const allContent = this.getElements(allContentAttr)\n    const allButtons = this.getElements(`${this.activeContainerAttr} [${selectors.DATA_TARGET}]`)\n\n    allContent.forEach(content => {\n      if (!(content === this.activeContent)) content.style.maxHeight = null\n    })\n\n    this.getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(selectors.TABINDEX, \"-1\")\n    })\n\n    this._toggleAttributeInCollection(allRows, selectors.DATA_VISIBLE, \"true\", \"false\")\n    this._toggleAttributeInCollection(allButtons, selectors.ARIA_EXPANDED, \"true\", \"false\")\n    this._toggleAttributeInCollection(allContent, selectors.ARIA_HIDDEN, \"false\", \"true\")\n  }\n\n  /**\n   * Toggle the currently selected accordion button's content.\n   */\n  _toggleSelectedAccordion() {\n    this.activeRow.setAttribute(selectors.DATA_VISIBLE, this.activeButtonExpandState)\n    this.activeButton.setAttribute(selectors.ARIA_EXPANDED, this.activeButtonExpandState)\n    this.activeContent.setAttribute(selectors.ARIA_HIDDEN, this.activeContentHiddenState)\n\n    const activeContentBlock = `#${this.activeAccordionRowId}`\n    this.getFocusableElements(activeContentBlock).forEach(element => {\n      const value = this.activeButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(selectors.TABINDEX, value)\n    })\n\n    if (this.activeContent.style.maxHeight) {\n      this.activeContent.style.maxHeight = null\n    } else {\n      this.activeContent.style.maxHeight = `${this.activeContent.scrollHeight}px`\n    }\n  }\n\n  /**\n   * Toggles a single attribute of a series of elements.\n   */\n  _toggleAttributeInCollection(elements, attributeName, currentValue, newValue) {\n    elements.forEach(element => {\n      if (element.hasAttribute(attributeName, currentValue)) {\n        element.setAttribute(attributeName, newValue)\n      }\n    })\n  }\n}\n","\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst keyCodes = {\n  TAB: 9,\n  SHIFT: 16,\n  ESCAPE: 27,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst selectors = {\n  // unique\n  DATA_DROPDOWN: \"data-dropdown\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  // accessibility\n  TABINDEX: \"tabindex\",\n  ARIA_HASPOPUP: \"aria-haspopup\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ROLE: \"role\",\n}\n\nconst events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\nconst messages = {\n  NO_PARENT_ERROR: `Could not find dropdown button's [data-parent] attribute.`,\n  NO_DROPDOWN_ERROR: attr => `Could not find dropdown container associated with ${attr}.`,\n  NO_MENU_ERROR: attr => `Could not find menu associated with ${attr}.`,\n}\n\n/**\n * Dropdown component class.\n * @module Dropdown\n * @requires Utils\n */\nexport default class Dropdown extends Utils {\n  constructor() {\n    super()\n    // active dropdown\n    this.activeDropdownButton = null\n    this.activeDropdown = null\n    this.activeDropdownMenu = null\n    this.activeDropdownLinks = []\n    this.allowFocusReturn = true\n    this.activeDropdownId = \"\"\n    this.activeDropdownAttr = \"\"\n    this.activeDropdownMenuId = \"\"\n\n    // all dropdowns\n    this.dropdownButtons = []\n    this.dropdowns = []\n\n    // dropdown element selectors\n    this.dropdownTargetAttr = `[${selectors.DATA_TARGET}]`\n    this.dropdownButtonAttr = `[${selectors.DATA_DROPDOWN}] > ${this.dropdownTargetAttr}`\n  }\n\n  // public\n\n  /**\n   * Find and set up dropdown buttons and menus.\n   * Begin listening to dropdowns for events.\n   */\n  start() {\n    this.dropdowns = this.getElements(`[${selectors.DATA_DROPDOWN}]`)\n    this.dropdownButtons = this.getElements(this.dropdownButtonAttr)\n\n    if (this.dropdowns.length) {\n      this.dropdowns.forEach(dropdown => this._setupDropdown(dropdown))\n    }\n\n    this.dropdownButtons.forEach(button => {\n      button.addEventListener(events.CLICK, this._render)\n      button.addEventListener(events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  /**\n   * Stop listening for dropdown events.\n   */\n  stop() {\n    this.dropdownButtons.forEach(button => {\n      button.removeEventListener(events.CLICK, this._render)\n      button.removeEventListener(events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   * @param {Number} key - The key code that called _render()\n   */\n  _render = (event, key) => {\n    if (!key) event.preventDefault()\n    event.stopPropagation()\n\n    if (this.activeDropdownButton) {\n      this.allowFocusReturn = false\n      this._handleClose(event)\n      this.allowFocusReturn = true\n    }\n\n    // dropdown button / trigger\n    this.activeDropdownButton = event.target\n\n    if (!this.activeDropdownButton.getAttribute(selectors.DATA_PARENT)) {\n      return messages.NO_PARENT_ERROR\n    }\n\n    this.activeDropdownId = this.activeDropdownButton.getAttribute(selectors.DATA_PARENT)\n\n    // dropdown container\n    this.activeDropdownAttr = `[${selectors.DATA_DROPDOWN}=\"${this.activeDropdownId}\"]`\n\n    if (!document.querySelector(this.activeDropdownAttr)) {\n      return messages.NO_DROPDOWN_ERROR(this.activeDropdownAttr)\n    }\n\n    this.activeDropdown = document.querySelector(this.activeDropdownAttr)\n\n    // dropdown menu\n    this.activeDropdownMenuId = this.activeDropdownButton.getAttribute(selectors.DATA_TARGET)\n    this.activeDropdownMenu = document.getElementById(this.activeDropdownMenuId)\n\n    // dropdown button\n    this.activeDropdownButton.setAttribute(selectors.ARIA_EXPANDED, \"true\")\n    this.activeDropdown.setAttribute(selectors.DATA_VISIBLE, \"true\")\n\n    // reset button event listener to close the menu, instead of open it\n    this.activeDropdownButton.removeEventListener(events.CLICK, this._render)\n    this.activeDropdownButton.addEventListener(events.CLICK, this._handleClose)\n\n    document.addEventListener(events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(events.CLICK, this._handleOffMenuClick)\n\n    this.activeDropdownLinks = this._getDropdownLinks(this.activeDropdownAttr)\n\n    this.firstDropdownLink = this.activeDropdownLinks[0]\n    this.lastDropdownLink = this.activeDropdownLinks[this.activeDropdownLinks.length - 1]\n\n    this.firstDropdownLink.addEventListener(events.KEYDOWN, this._handleFirstTabClose)\n    this.lastDropdownLink.addEventListener(events.KEYDOWN, this._handleLastTabClose)\n\n    if (key && key === keyCodes.ARROW_UP) {\n      this.lastDropdownLink.focus()\n    } else {\n      this.firstDropdownLink.focus()\n    }\n\n    this.activeDropdownLinks.forEach(link => {\n      link.setAttribute(selectors.TABINDEX, \"0\")\n      link.addEventListener(events.CLICK, this._handleClose)\n    })\n\n    this.captureFocus(`${this.activeDropdownAttr} > ul`, { useArrows: true })\n  }\n\n  /**\n   * Closes the dropdown if user uses shift and tab keys on the first dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleFirstTabClose = event => {\n    const shiftKey = event.which === keyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === keyCodes.TAB\n\n    if (shiftKey && tabKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes the dropdown if user uses tab key on the last dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleLastTabClose = event => {\n    const shiftKey = event.which === keyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === keyCodes.TAB\n\n    if (tabKey && !shiftKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Renders dropdown if the user uses arrow up or down.\n   * @param {Object} event - The event object\n   */\n  _renderWithKeys = event => {\n    if (event.which === keyCodes.ARROW_UP || event.which === keyCodes.ARROW_DOWN) {\n      this._render(event, event.which)\n    }\n  }\n\n  /**\n   * Closes currently open dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleClose = event => {\n    event.preventDefault()\n\n    this.releaseFocus()\n\n    this.activeDropdownButton.setAttribute(selectors.ARIA_EXPANDED, \"false\")\n    this.activeDropdown.setAttribute(selectors.DATA_VISIBLE, \"false\")\n\n    this.activeDropdownLinks.forEach(link => {\n      link.setAttribute(selectors.TABINDEX, \"-1\")\n      link.removeEventListener(events.CLICK, this._handleClose)\n    })\n\n    this.activeDropdownButton.removeEventListener(events.CLICK, this._handleClose)\n    this.activeDropdownButton.addEventListener(events.CLICK, this._render)\n\n    document.removeEventListener(events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(events.CLICK, this._handleOffMenuClick)\n\n    if (this.allowFocusReturn) {\n      this._handleReturnFocus()\n    }\n  }\n\n  /**\n   * Use escape key to close dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleEscapeKeyPress = event => {\n    if (event.which === keyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes dropdown\n   * @param {Object} event - The event object\n   */\n  _handleOffMenuClick = event => {\n    if (event.target !== this.activeDropdownButton && event.target !== this.activeDropdownMenu) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Puts focus on a the active dropdown button.\n   */\n  _handleReturnFocus() {\n    this.activeDropdownButton.setAttribute(selectors.TAB_INDEX, \"-1\")\n    this.activeDropdownButton.focus()\n    this.activeDropdownButton.removeAttribute(selectors.TAB_INDEX)\n  }\n\n  /**\n   * Retrieve possible menu links or buttons as an array\n   * @param {String} attr - The unique attribute for a dropdown.\n   */\n  _getDropdownLinks(attr) {\n    return this.getElements(`${attr} > ul > li > a, ${attr} > ul > li > button`)\n  }\n\n  /**\n   * Add starting attributes to a dropdown.\n   * @param {Element} dropdown - A dropdown element.\n   */\n  _setupDropdown(dropdown) {\n    const dropdownId = dropdown.getAttribute(selectors.DATA_DROPDOWN)\n    const dropdownIdAttr = `[${selectors.DATA_DROPDOWN}=\"${dropdownId}\"]`\n    const dropdownMenuItemsAttr = `${dropdownIdAttr} > ul > li`\n\n    if (!document.querySelector(`${dropdownIdAttr} > ul`)) {\n      return messages.NO_MENU_ERROR(dropdownIdAttr)\n    }\n\n    const dropdownMenu = document.querySelector(`${dropdownIdAttr} > ul`)\n    const dropdownButton = document.querySelector(`${dropdownIdAttr} > ${this.dropdownTargetAttr}`)\n\n    dropdownButton.setAttribute(selectors.ARIA_CONTROLS, dropdownMenu.id)\n    dropdownButton.setAttribute(selectors.ARIA_HASPOPUP, \"true\")\n    dropdownButton.setAttribute(selectors.ARIA_EXPANDED, \"false\")\n    dropdownMenu.setAttribute(selectors.ARIA_LABELLEDBY, dropdownButton.id)\n\n    const dropdownMenuItems = this.getElements(dropdownMenuItemsAttr)\n    dropdownMenuItems.forEach(item => item.setAttribute(selectors.ROLE, \"none\"))\n\n    this._getDropdownLinks(dropdownIdAttr).forEach(link => {\n      link.setAttribute(selectors.ROLE, \"menuitem\")\n      link.setAttribute(selectors.TABINDEX, \"-1\")\n    })\n  }\n}\n","\"use strict\"\n\nimport _Modals from \"./components/modal\"\nimport _Accordion from \"./components/accordion\"\nimport _Dropdown from \"./components/dropdown\"\nimport _Utils from \"./utils\"\n\nconst Modals = new _Modals()\nconst Accordions = new _Accordion()\nconst Dropdowns = new _Dropdown()\nconst Utils = new _Utils()\n\nconst Undernet = {\n  // Components\n  Modals,\n  Accordions,\n  Dropdowns,\n\n  // Utils\n  Utils,\n}\n\nUndernet.start = () => {\n  // Components\n  Undernet.Modals.start()\n  Undernet.Accordions.start()\n  Undernet.Dropdowns.start()\n\n  // Utils\n  Undernet.Utils.enableFocusOutline()\n}\n\nUndernet.stop = () => {\n  // Components\n  Undernet.Modals.stop()\n  Undernet.Accordions.stop()\n  Undernet.Dropdowns.stop()\n\n  // Utils\n  Undernet.Utils.disableFocusOutline()\n}\n\nwindow.Undernet = Undernet\nexport default Undernet\n"],"names":["keyCodes","SHIFT","TAB","ARROW_UP","ARROW_DOWN","selectors","NOT_VISUALLY_HIDDEN","FOCUSABLE_TAGS","KEYBOARD_CLASS","events","KEYDOWN","CLICK","Utils","event","tabKey","which","shiftKey","arrowUp","arrowDown","document","body","classList","add","removeEventListener","_listenForKeyboard","addEventListener","_listenForClick","listeningForKeydown","remove","containerElement","querySelector","focusContainerSelector","containerActive","activeElement","firstActive","focusableFirstChild","lastActive","focusableLastChild","preventDefault","focus","_focusNextChild","_focusLastChild","focusableChildren","trapFocusWithArrows","container","options","getFocusableElements","length","useArrows","_handleFocusTrapWithArrows","_handleFocusTrapWithTab","element","nodeList","querySelectorAll","Array","apply","focusables","map","getElements","join","i","ESCAPE","MODAL_CONTAINER","MODAL_ID","MODAL_BUTTON","NO_SCROLL","DATA_VISIBLE","DATA_CLOSE","DATA_TARGET","DATA_PARENT","ARIA_HIDDEN","ARIA_MODAL","ROLE","TABINDEX","RESIZE","messages","NO_TARGET_ERROR","NO_PARENT_ERROR","NO_ID_ERROR","id","Modal","activeModalButton","target","getAttribute","console","error","activeModalId","activeModalOverlayAttr","activeModalOverlay","activeModalSelector","modalContainerAttr","activeModal","activeModalCloseButtons","forEach","setAttribute","_handleScrollStop","captureFocus","scrollTop","_handleEscapeKeyPress","_handleOverlayClick","button","_handleClose","_handleReturnFocus","_handleScrollRestore","releaseFocus","removeAttribute","modals","modalButtons","closeButtonAttr","modal","_setupModal","_render","modalId","warn","modalWrapper","SPACE","ACCORDION_CONTAINER","ACCORDION_ROW","DATA_TOGGLE_MULTIPLE","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_LABELLEDBY","NO_VISIBLE_ERROR","NO_ROW_ERROR","NO_HEADER_ID_ERROR","NO_CONTENT_ERROR","Accordion","activeButton","activeAccordionRowId","activeRowAttr","_getAccordionRowAttr","activeRow","activeContainerId","activeContainerAttr","NO_ACCORDION_ERROR","activeContainer","activeContent","getElementById","accordionButtonState","activeButtonExpandState","activeContentHiddenState","_closeAllIfToggleable","_toggleSelectedAccordion","accordionButtons","accordionContentsAttr","accordionContents","_setupAccordion","_handleSpaceKeyPress","buttonId","buttonContent","accordionRowAttr","accordionRow","buttonHeaderAttr","_getPossibleAccordionHeaderAttrs","buttonHeader","buttonContentChildren","contentShouldExpand","style","maxHeight","scrollHeight","attr","hasAttribute","allContentAttr","allRows","allContent","allButtons","content","_toggleAttributeInCollection","activeContentBlock","value","elements","attributeName","currentValue","newValue","DATA_DROPDOWN","ARIA_HASPOPUP","NO_DROPDOWN_ERROR","NO_MENU_ERROR","Dropdown","key","stopPropagation","activeDropdownButton","allowFocusReturn","activeDropdownId","activeDropdownAttr","activeDropdown","activeDropdownMenuId","activeDropdownMenu","_handleOffMenuClick","activeDropdownLinks","_getDropdownLinks","firstDropdownLink","lastDropdownLink","_handleFirstTabClose","_handleLastTabClose","link","dropdownButtons","dropdowns","dropdownTargetAttr","dropdownButtonAttr","dropdown","_setupDropdown","_renderWithKeys","TAB_INDEX","dropdownId","dropdownIdAttr","dropdownMenuItemsAttr","dropdownMenu","dropdownButton","dropdownMenuItems","item","Modals","_Modals","Accordions","_Accordion","Dropdowns","_Dropdown","_Utils","Undernet","start","enableFocusOutline","stop","disableFocusOutline","window"],"mappings":"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"}