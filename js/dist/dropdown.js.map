{"version":3,"sources":["../src/dropdown.js"],"names":["KeyCodes","TAB","SHIFT","ESCAPE","ARROW_UP","ARROW_DOWN","Selectors","DATA_DROPDOWN","DATA_TARGET","DATA_PARENT","DATA_VISIBLE","TABINDEX","ARIA_HASPOPUP","ARIA_CONTROLS","ARIA_LABELLEDBY","ARIA_EXPANDED","ROLE","Events","KEYDOWN","CLICK","Messages","NO_PARENT_ERROR","NO_DROPDOWN_ERROR","attr","NO_MENU_ERROR","Dropdown","_iosMobile","test","navigator","userAgent","_render","bind","_handleFirstTabClose","_handleLastTabClose","_renderWithKeys","_handleClose","_handleEscapeKeyPress","_handleOffMenuClick","_activeDropdownButton","_activeDropdown","_activeDropdownMenu","_activeDropdownLinks","_allowFocusReturn","_activeDropdownId","_activeDropdownAttr","_activeDropdownMenuId","_dropdownButtons","_dropdowns","_dropdownContainerAttr","_dropdownTargetAttr","document","querySelectorAll","length","forEach","dropdown","_setupDropdown","button","addEventListener","removeEventListener","event","key","preventDefault","stopPropagation","target","getAttribute","console","error","querySelector","getElementById","setAttribute","body","style","cursor","_getDropdownLinks","firstDropdownLink","lastDropdownLink","focus","link","captureFocus","useArrows","shiftKey","which","tabKey","releaseFocus","_handleReturnFocus","TAB_INDEX","removeAttribute","dropdownId","dropdownIdAttr","dropdownMenuItemsAttr","dropdownMenu","dropdownButton","id","dropdownMenuItems","item","Utils"],"mappings":"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","sourcesContent":["import Utils from \"../utils\"\n\nconst KeyCodes = {\n  TAB: 9,\n  SHIFT: 16,\n  ESCAPE: 27,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nconst Selectors = {\n  // unique\n  DATA_DROPDOWN: \"data-dropdown\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  // accessibility\n  TABINDEX: \"tabindex\",\n  ARIA_HASPOPUP: \"aria-haspopup\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ROLE: \"role\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n}\n\nconst Messages = {\n  NO_PARENT_ERROR: `Could not find dropdown button's [data-parent] attribute.`,\n  NO_DROPDOWN_ERROR: attr => `Could not find dropdown container associated with ${attr}.`,\n  NO_MENU_ERROR: attr => `Could not find menu associated with ${attr}.`,\n}\n\n/**\n * Dropdown component class.\n * @module Dropdown\n * @requires Utils\n */\nexport default class Dropdown extends Utils {\n  constructor() {\n    super()\n\n    this._iosMobile = /(iphone|ipod)/i.test(navigator.userAgent)\n\n    // events\n    this._render = this._render.bind(this)\n    this._handleFirstTabClose = this._handleFirstTabClose.bind(this)\n    this._handleLastTabClose = this._handleLastTabClose.bind(this)\n    this._renderWithKeys = this._renderWithKeys.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n    this._handleOffMenuClick = this._handleOffMenuClick.bind(this)\n\n    // active dropdown\n    this._activeDropdownButton = null\n    this._activeDropdown = null\n    this._activeDropdownMenu = null\n    this._activeDropdownLinks = []\n    this._allowFocusReturn = true\n    this._activeDropdownId = \"\"\n    this._activeDropdownAttr = \"\"\n    this._activeDropdownMenuId = \"\"\n\n    // all dropdowns\n    this._dropdownButtons = []\n    this._dropdowns = []\n\n    // dropdown element selectors\n    this._dropdownContainerAttr = `[${Selectors.DATA_DROPDOWN}]`\n    this._dropdownTargetAttr = `[${Selectors.DATA_TARGET}]`\n  }\n\n  // public\n\n  /**\n   * Find and set up dropdown buttons and menus.\n   * Begin listening to dropdowns for events.\n   */\n  start() {\n    this._dropdowns = document.querySelectorAll(`${this._dropdownContainerAttr}`)\n    this._dropdownButtons = document.querySelectorAll(\n      `${this._dropdownContainerAttr} > ${this._dropdownTargetAttr}`\n    )\n\n    if (this._dropdowns.length) {\n      this._dropdowns.forEach(dropdown => this._setupDropdown(dropdown))\n    }\n\n    this._dropdownButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this._render)\n      button.addEventListener(Events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  /**\n   * Stop listening for dropdown events.\n   */\n  stop() {\n    this._dropdownButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n      button.removeEventListener(Events.KEYDOWN, this._renderWithKeys)\n    })\n  }\n\n  // private\n\n  /**\n   * Find a button through event.target, then render the corresponding modal attribute via matching target id\n   * @param {Object} event - The event object\n   * @param {Number} key - The key code that called _render()\n   */\n  _render(event, key) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    if (this._activeDropdownButton) {\n      this._allowFocusReturn = false\n      this._handleClose(event)\n      this._allowFocusReturn = true\n    }\n\n    // dropdown button / trigger\n    this._activeDropdownButton = event.target\n\n    if (!this._activeDropdownButton.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR)\n    }\n\n    this._activeDropdownId = this._activeDropdownButton.getAttribute(Selectors.DATA_PARENT)\n\n    // dropdown container\n    this._activeDropdownAttr = `[${Selectors.DATA_DROPDOWN}=\"${this._activeDropdownId}\"]`\n\n    if (!document.querySelector(this._activeDropdownAttr)) {\n      return console.error(Messages.NO_DROPDOWN_ERROR(this._activeDropdownAttr))\n    }\n\n    this._activeDropdown = document.querySelector(this._activeDropdownAttr)\n\n    // dropdown menu\n    this._activeDropdownMenuId = this._activeDropdownButton.getAttribute(Selectors.DATA_TARGET)\n    this._activeDropdownMenu = document.getElementById(this._activeDropdownMenuId)\n\n    // toggle attributes on dropdown button, indicating a visible dropdown is present\n    this._activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n\n    // trade button event listener to close the menu, instead of open it\n    this._activeDropdownButton.removeEventListener(Events.CLICK, this._render)\n    this._activeDropdownButton.addEventListener(Events.CLICK, this._handleClose)\n\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOffMenuClick)\n\n    // make click events work on mobile iOS\n    if (this._iosMobile) {\n      document.body.style.cursor = \"pointer\"\n    }\n\n    this._activeDropdownLinks = this._getDropdownLinks(this._activeDropdownAttr)\n\n    this.firstDropdownLink = this._activeDropdownLinks[0]\n    this.lastDropdownLink = this._activeDropdownLinks[this._activeDropdownLinks.length - 1]\n\n    this.firstDropdownLink.addEventListener(Events.KEYDOWN, this._handleFirstTabClose)\n    this.lastDropdownLink.addEventListener(Events.KEYDOWN, this._handleLastTabClose)\n\n    if (key && key === KeyCodes.ARROW_UP) {\n      this.lastDropdownLink.focus()\n    } else {\n      this.firstDropdownLink.focus()\n    }\n\n    this._activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"0\")\n      link.addEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this.captureFocus(`${this._activeDropdownAttr} > ul`, { useArrows: true })\n  }\n\n  /**\n   * Closes the dropdown if user uses shift and tab keys on the first dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleFirstTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (shiftKey && tabKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes the dropdown if user uses tab key on the last dropdown element.\n   * @param {Object} event - The event object\n   */\n  _handleLastTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (tabKey && !shiftKey) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Renders dropdown if the user uses arrow up or down.\n   * @param {Object} event - The event object\n   */\n  _renderWithKeys(event) {\n    if (event.which === KeyCodes.ARROW_UP || event.which === KeyCodes.ARROW_DOWN) {\n      this._render(event, event.which)\n    }\n  }\n\n  /**\n   * Closes currently open dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleClose(event) {\n    event.preventDefault()\n\n    this.releaseFocus()\n\n    this._activeDropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n\n    this._activeDropdownLinks.forEach(link => {\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n      link.removeEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this._activeDropdownButton.removeEventListener(Events.CLICK, this._handleClose)\n    this._activeDropdownButton.addEventListener(Events.CLICK, this._render)\n\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n\n    if (this._iosMobile) {\n      document.body.style.cursor = \"auto\"\n    }\n\n    document.removeEventListener(Events.CLICK, this._handleOffMenuClick)\n\n    if (this._allowFocusReturn) {\n      this._handleReturnFocus()\n    }\n\n    this._activeDropdownButton = null\n  }\n\n  /**\n   * Use escape key to close dropdown.\n   * @param {Object} event - The event object\n   */\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Closes dropdown\n   * @param {Object} event - The event object\n   */\n  _handleOffMenuClick(event) {\n    if (event.target !== this._activeDropdownButton && event.target !== this._activeDropdownMenu) {\n      this._handleClose(event)\n    }\n  }\n\n  /**\n   * Puts focus on a the active dropdown button.\n   */\n  _handleReturnFocus() {\n    this._activeDropdownButton.setAttribute(Selectors.TAB_INDEX, \"-1\")\n    this._activeDropdownButton.focus()\n    this._activeDropdownButton.removeAttribute(Selectors.TAB_INDEX)\n  }\n\n  /**\n   * Retrieve possible menu links or buttons as an array\n   * @param {String} attr - The unique attribute for a dropdown.\n   * @return {String} - Selector for possible menu item links.\n   */\n  _getDropdownLinks(attr) {\n    return document.querySelectorAll(`${attr} > ul > li > a, ${attr} > ul > li > button`)\n  }\n\n  /**\n   * Add starting attributes to a dropdown.\n   * @param {Element} dropdown - A dropdown element.\n   */\n  _setupDropdown(dropdown) {\n    const dropdownId = dropdown.getAttribute(Selectors.DATA_DROPDOWN)\n    const dropdownIdAttr = `[${Selectors.DATA_DROPDOWN}=\"${dropdownId}\"]`\n    const dropdownMenuItemsAttr = `${dropdownIdAttr} > ul > li`\n\n    if (!document.querySelector(`${dropdownIdAttr} > ul`)) {\n      return console.error(Messages.NO_MENU_ERROR(dropdownIdAttr))\n    }\n\n    const dropdownMenu = document.querySelector(`${dropdownIdAttr} > ul`)\n    const dropdownButton = document.querySelector(`${dropdownIdAttr} > ${this._dropdownTargetAttr}`)\n\n    dropdownButton.setAttribute(Selectors.ARIA_CONTROLS, dropdownMenu.id)\n    dropdownButton.setAttribute(Selectors.ARIA_HASPOPUP, \"true\")\n    dropdownButton.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n    dropdownMenu.setAttribute(Selectors.ARIA_LABELLEDBY, dropdownButton.id)\n\n    const dropdownMenuItems = document.querySelectorAll(dropdownMenuItemsAttr)\n    dropdownMenuItems.forEach(item => item.setAttribute(Selectors.ROLE, \"none\"))\n\n    this._getDropdownLinks(dropdownIdAttr).forEach(link => {\n      link.setAttribute(Selectors.ROLE, \"menuitem\")\n      link.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n  }\n}\n"],"file":"dropdown.js"}