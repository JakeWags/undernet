{"version":3,"sources":["../src/modal.js"],"names":["KeyCodes","ESCAPE","Selectors","DATA_MODAL","DATA_TARGET","DATA_VISIBLE","DATA_CLOSE","DATA_PARENT","ARIA_HIDDEN","ARIA_MODAL","ROLE","TABINDEX","NO_SCROLL","Events","KEYDOWN","CLICK","RESIZE","Messages","NO_BUTTON_ERROR","id","NO_MODAL_ID_ERROR","NO_MODAL_ERROR","Modal","_render","bind","_handleClose","_handleOverlayClick","_handleEscapeKeyPress","_modals","_modalButtons","_activeModalButton","_activeModalOverlay","_activeModal","_activeModalId","_activeModalSelector","_activeModalCloseButtons","_originalPagePaddingRight","_scrollbarOffset","_modalContainerAttr","dom","findAll","forEach","element","attr","length","instance","_setup","button","find","Error","removeEventListener","modalId","modal","modalWrapper","modalButton","addEventListener","event","preventDefault","target","_setActiveModalId","_setActiveModalOverlay","_setActiveModal","_enableFocusOnChildren","_handleScrollbarOffset","_handleScrollStop","captureFocus","_setAttributes","_setCloseButtons","_handleModalFocus","scrollTop","_startEvents","_stopEvents","_handleReturnFocus","_removeAttributes","releaseFocus","_handleScrollRestore","_removeScrollbarOffset","_disableFocusOnChildren","iOSMobile","css","document","focus","setAttribute","window","innerWidth","body","getBoundingClientRect","right","_scrollbarIsVisible","_getScrollbarOffset","originalPadding","setTimeout","which","removeClass","documentElement","addClass","Utils"],"mappings":"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","sourcesContent":["import Utils, { iOSMobile, getFocusableElements, dom } from \"./utils\"\n\nconst KeyCodes = {\n  ESCAPE: 27,\n}\n\nconst Selectors = {\n  // unique\n  DATA_MODAL: \"data-modal\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n  // classes\n  NO_SCROLL: \"no-scroll\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n}\n\nconst Messages = {\n  NO_BUTTON_ERROR: id => `Could not find modal trigger with id ${id}.`,\n  NO_MODAL_ID_ERROR:\n    \"Could not detect an id on your [data-modal] element. Please add a value matching the modal trigger's [data-parent] attribute.\",\n  NO_MODAL_ERROR: id =>\n    `Could not find a [data-parent='${id}'] attribute within your [data-modal='${id}'] element.`,\n}\n\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleOverlayClick = this._handleOverlayClick.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n\n    // all modals\n    this._modals = []\n    this._modalButtons = []\n\n    // active modal\n    this._activeModalButton = {}\n    this._activeModalOverlay = {}\n    this._activeModal = {}\n    this._activeModalId = \"\"\n    this._activeModalSelector = \"\"\n    this._activeModalCloseButtons = []\n    this._originalPagePaddingRight = \"\"\n    this._scrollbarOffset = 0\n\n    // attribute helpers\n    this._modalContainerAttr = `[${Selectors.DATA_MODAL}]`\n  }\n\n  // public\n\n  start() {\n    this._modals = dom.findAll(this._modalContainerAttr)\n\n    getFocusableElements(this._modalContainerAttr).forEach(element => {\n      dom.attr(element, Selectors.TABINDEX, \"-1\")\n    })\n\n    if (this._modals.length) {\n      this._modals.forEach(instance => {\n        this._setup(instance)\n      })\n    }\n  }\n\n  stop() {\n    this._modals.forEach(instance => {\n      const id = dom.attr(instance, Selectors.DATA_MODAL)\n      const button = dom.find(`[${Selectors.DATA_TARGET}='${id}']`)\n\n      if (!button) {\n        throw new Error(Messages.NO_BUTTON_ERROR(id))\n      }\n\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  _setup(instance) {\n    const modalId = dom.attr(instance, Selectors.DATA_MODAL)\n\n    if (!modalId) {\n      throw new Error(Messages.NO_MODAL_ID_ERROR)\n    }\n\n    const modal = dom.find(`[${Selectors.DATA_PARENT}='${modalId}']`, instance)\n\n    if (!modal) {\n      throw new Error(Messages.NO_MODAL_ERROR(modalId))\n    }\n\n    const modalWrapper = dom.find(`[${Selectors.DATA_MODAL}='${modalId}']`)\n\n    dom.attr(modalWrapper, Selectors.ARIA_HIDDEN, \"true\")\n    dom.attr(modalWrapper, Selectors.DATA_VISIBLE, \"false\")\n    dom.attr(modal, Selectors.ARIA_MODAL, \"true\")\n    dom.attr(modal, Selectors.ROLE, \"dialog\")\n\n    const modalButton = dom.find(`[${Selectors.DATA_TARGET}='${modalId}']`)\n\n    if (!modalButton) {\n      throw new Error(Messages.NO_BUTTON_ERROR(modalId))\n    }\n\n    modalButton.addEventListener(Events.CLICK, this._render)\n  }\n\n  _render(event) {\n    event.preventDefault()\n\n    this._activeModalButton = event.target\n\n    this._setActiveModalId()\n    this._setActiveModalOverlay()\n    this._setActiveModal()\n    this._enableFocusOnChildren()\n    this._handleScrollbarOffset()\n    this._handleScrollStop()\n    this.captureFocus(this._activeModalSelector)\n    this._setAttributes()\n    this._setCloseButtons()\n    this._handleModalFocus()\n    this._activeModalOverlay.scrollTop = 0\n    this._startEvents()\n  }\n\n  _handleClose(event) {\n    event.preventDefault()\n\n    this._stopEvents()\n    this._handleReturnFocus()\n    this._removeAttributes()\n    this.releaseFocus()\n    this._handleScrollRestore()\n    this._removeScrollbarOffset()\n    this._disableFocusOnChildren()\n\n    if (iOSMobile) dom.css(this._activeModalOverlay, \"cursor\", \"auto\")\n\n    this._activeModalId = null\n    this._activeModalButton = null\n    this._activeModal = null\n  }\n\n  _setCloseButtons() {\n    this._activeModalCloseButtons = dom.findAll(\n      `${this._activeModalSelector} [${Selectors.DATA_CLOSE}]`\n    )\n  }\n\n  _setActiveModalId() {\n    this._activeModalId = dom.attr(this._activeModalButton, Selectors.DATA_TARGET)\n  }\n\n  _setActiveModalOverlay() {\n    this._activeModalOverlay = dom.find(`[${Selectors.DATA_MODAL}='${this._activeModalId}']`)\n  }\n\n  _removeAttributes() {\n    dom.attr(this._activeModalOverlay, Selectors.DATA_VISIBLE, \"false\")\n    dom.attr(this._activeModalOverlay, Selectors.ARIA_HIDDEN, \"true\")\n    dom.attr(this._activeModal, Selectors.TABINDEX, false)\n  }\n\n  _disableFocusOnChildren() {\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      dom.attr(element, Selectors.TABINDEX, \"-1\")\n    })\n  }\n\n  _stopEvents() {\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this._handleOverlayClick)\n\n    this._activeModalCloseButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._handleClose)\n    })\n  }\n\n  _setActiveModal() {\n    this._activeModalSelector = `[${Selectors.DATA_PARENT}='${this._activeModalId}']`\n    this._activeModal = dom.find(this._activeModalSelector, this._activeModalOverlay)\n  }\n\n  _setAttributes() {\n    dom.attr(this._activeModalOverlay, Selectors.ARIA_HIDDEN, \"false\")\n    dom.attr(this._activeModalOverlay, Selectors.DATA_VISIBLE, \"true\")\n    if (iOSMobile) dom.css(this._activeModalOverlay, \"cursor\", \"pointer\")\n  }\n\n  _startEvents() {\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOverlayClick)\n\n    this._activeModalCloseButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this._handleClose)\n    })\n  }\n\n  _handleModalFocus() {\n    dom.attr(this._activeModal, Selectors.TABINDEX, \"-1\")\n    this._activeModal.focus()\n  }\n\n  _enableFocusOnChildren() {\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"0\")\n    })\n  }\n\n  _getScrollbarOffset() {\n    return window.innerWidth - document.body.getBoundingClientRect().right\n  }\n\n  _handleScrollbarOffset() {\n    if (!this._scrollbarIsVisible()) return\n\n    this._scrollbarOffset = this._getScrollbarOffset()\n    this._originalPagePaddingRight = dom.css(document.body, \"paddingRight\")\n    dom.css(document.body, \"paddingRight\", `${this._scrollbarOffset}px`)\n  }\n\n  _scrollbarIsVisible() {\n    if (typeof window.innerWidth === \"number\") {\n      return window.innerWidth > document.body.getBoundingClientRect().right\n    }\n  }\n\n  _removeScrollbarOffset() {\n    const originalPadding = this._originalPagePaddingRight\n\n    dom.css(this._activeModalOverlay, \"paddingLeft\", `${this._scrollbarOffset}px`)\n    setTimeout(() => dom.css(this._activeModalOverlay, \"paddingLeft\", \"\"), 500)\n\n    if (originalPadding) {\n      dom.css(document.body, \"paddingRight\", `${originalPadding}px`)\n    } else {\n      dom.css(document.body, \"paddingRight\", \"\")\n    }\n  }\n\n  _handleOverlayClick(event) {\n    if (event.target === this._activeModalOverlay) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleReturnFocus() {\n    dom.attr(this._activeModalButton, Selectors.TABINDEX, \"-1\")\n    this._activeModalButton.focus()\n    dom.attr(this._activeModalButton, Selectors.TABINDEX, false)\n  }\n\n  _handleScrollRestore() {\n    dom.removeClass(document.body, Selectors.NO_SCROLL)\n    dom.removeClass(document.documentElement, Selectors.NO_SCROLL)\n  }\n\n  _handleScrollStop() {\n    dom.addClass(document.body, Selectors.NO_SCROLL)\n    dom.addClass(document.documentElement, Selectors.NO_SCROLL)\n  }\n}\n"],"file":"modal.js"}