{"version":3,"sources":["../src/modal.js"],"names":["KeyCodes","ESCAPE","Selectors","DATA_MODAL","DATA_TARGET","DATA_VISIBLE","DATA_CLOSE","DATA_PARENT","ARIA_HIDDEN","ARIA_MODAL","ROLE","TABINDEX","NO_SCROLL","Events","KEYDOWN","CLICK","RESIZE","Messages","NO_BUTTON_ID_ERROR","NO_MODAL_ID_ERROR","NO_MODAL_ERROR","id","Modal","_render","bind","_handleClose","_handleOverlayClick","_handleEscapeKeyPress","_modals","_modalButtons","_activeModalButton","_activeModalOverlay","_activeModal","_activeModalId","_activeModalOverlayAttr","_activeModalSelector","_activeModalCloseButtons","_originalPagePaddingRight","_scrollbarOffset","_modalContainerAttr","forEach","element","setAttribute","length","instance","_setupModal","getAttribute","button","document","querySelector","addEventListener","removeEventListener","event","preventDefault","target","console","error","_handleScrollbarOffset","_handleScrollStop","captureFocus","focus","scrollTop","iOSMobile","style","cursor","window","innerWidth","body","getBoundingClientRect","right","_scrollbarIsVisible","_getScrollbarOffset","paddingRight","modalId","modal","modalWrapper","_handleReturnFocus","_handleScrollRestore","releaseFocus","removeAttribute","_removeScrollbarOffset","originalPadding","paddingLeft","setTimeout","which","classList","remove","documentElement","add","Utils"],"mappings":"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","sourcesContent":["import Utils, { iOSMobile, getFocusableElements, nodeListToArray } from \"./utils\"\n\nconst KeyCodes = {\n  ESCAPE: 27,\n}\n\nconst Selectors = {\n  // unique\n  DATA_MODAL: \"data-modal\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n  // classes\n  NO_SCROLL: \"no-scroll\",\n}\n\nconst Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n}\n\nconst Messages = {\n  NO_BUTTON_ID_ERROR:\n    \"Could not find an id on your [data-modal-button] element. Modal can't be opened.\",\n  NO_MODAL_ID_ERROR:\n    \"Could not detect an id on your [data-modal] element. Please add a value matching a button's [data-modal-button] attribute.\",\n  NO_MODAL_ERROR: id =>\n    `Could not find a [data-parent='${id}'] attribute within your [data-modal='${id}'] element.`,\n}\n\nexport default class Modal extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleOverlayClick = this._handleOverlayClick.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n\n    // all modals\n    this._modals = []\n    this._modalButtons = []\n\n    // active modal\n    this._activeModalButton = {}\n    this._activeModalOverlay = {}\n    this._activeModal = {}\n    this._activeModalId = \"\"\n    this._activeModalOverlayAttr = \"\"\n    this._activeModalSelector = \"\"\n    this._activeModalCloseButtons = []\n    this._originalPagePaddingRight = \"\"\n    this._scrollbarOffset = 0\n\n    // attribute helpers\n    this._modalContainerAttr = `[${Selectors.DATA_MODAL}]`\n  }\n\n  // public\n\n  start() {\n    this._modals = nodeListToArray(this._modalContainerAttr)\n\n    getFocusableElements(this._modalContainerAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    if (this._modals.length) {\n      this._modals.forEach(instance => {\n        this._setupModal(instance)\n        const id = instance.getAttribute(Selectors.DATA_MODAL)\n        const button = document.querySelector(`[${Selectors.DATA_TARGET}='${id}']`)\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  stop() {\n    this._modals.forEach(instance => {\n      const id = instance.getAttribute(Selectors.DATA_MODAL)\n      const button = document.querySelector(`[${Selectors.DATA_TARGET}='${id}']`)\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  _render(event) {\n    event.preventDefault()\n    this._activeModalButton = event.target\n    this._activeModalId = this._activeModalButton.getAttribute(Selectors.DATA_TARGET)\n\n    if (!this._activeModalId) {\n      return console.error(Messages.NO_BUTTON_ID_ERROR)\n    }\n\n    this._activeModalOverlay = document.querySelector(\n      `[${Selectors.DATA_MODAL}=\"${this._activeModalId}\"]`\n    )\n\n    this._activeModalSelector = `[${Selectors.DATA_PARENT}='${this._activeModalId}']`\n    this._activeModal = this._activeModalOverlay.querySelector(this._activeModalSelector)\n\n    this._activeModalCloseButtons = nodeListToArray(\n      `${this._activeModalSelector} [${Selectors.DATA_CLOSE}]`\n    )\n\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"0\")\n    })\n\n    this._handleScrollbarOffset()\n    this._handleScrollStop()\n    this.captureFocus(this._activeModalSelector)\n    this._activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n    this._activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n\n    this._activeModal.setAttribute(Selectors.TABINDEX, \"-1\")\n    this._activeModal.focus()\n\n    this._activeModalOverlay.scrollTop = 0\n\n    if (iOSMobile) {\n      this._activeModalOverlay.style.cursor = \"pointer\"\n    }\n\n    // begin listening to events\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOverlayClick)\n    this._activeModalCloseButtons.forEach(button => {\n      button.addEventListener(Events.CLICK, this._handleClose)\n    })\n  }\n\n  _getScrollbarOffset() {\n    return window.innerWidth - document.body.getBoundingClientRect().right\n  }\n\n  _handleScrollbarOffset() {\n    if (!this._scrollbarIsVisible()) return\n\n    this._scrollbarOffset = this._getScrollbarOffset()\n    this._originalPagePaddingRight = document.body.style.paddingRight\n    document.body.style.paddingRight = `${this._scrollbarOffset}px`\n  }\n\n  _setupModal(instance) {\n    const modalId = instance.getAttribute(Selectors.DATA_MODAL)\n\n    if (!modalId) {\n      return console.error(Messages.NO_MODAL_ID_ERROR)\n    }\n\n    const modal = instance.querySelector(`[${Selectors.DATA_PARENT}='${modalId}']`)\n\n    if (!modal) {\n      return console.error(Messages.NO_MODAL_ERROR(modalId))\n    }\n\n    const modalWrapper = document.querySelector(`[${Selectors.DATA_MODAL}='${modalId}']`)\n\n    modalWrapper.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    modalWrapper.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    modal.setAttribute(Selectors.ARIA_MODAL, \"true\")\n    modal.setAttribute(Selectors.ROLE, \"dialog\")\n  }\n\n  _handleClose(event) {\n    event.preventDefault()\n    this._activeModalOverlay.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    this._handleReturnFocus()\n    this._handleScrollRestore()\n    this.releaseFocus()\n    this._activeModalOverlay.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    this._activeModal.removeAttribute(Selectors.TABINDEX)\n\n    getFocusableElements(this._activeModalSelector).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    if (iOSMobile) {\n      this._activeModalOverlay.style.cursor = \"auto\"\n    }\n\n    // stop listening to events\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this._handleOverlayClick)\n    this._activeModalCloseButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this._removeScrollbarOffset()\n\n    this._activeModalId = null\n  }\n\n  _scrollbarIsVisible() {\n    if (typeof window.innerWidth === \"number\") {\n      return window.innerWidth > document.body.getBoundingClientRect().right\n    }\n  }\n\n  _removeScrollbarOffset() {\n    const originalPadding = this._originalPagePaddingRight\n\n    this._activeModalOverlay.style.paddingLeft = `${this._scrollbarOffset}px`\n    setTimeout(() => (this._activeModalOverlay.style.paddingLeft = \"\"), 500)\n\n    if (originalPadding) {\n      document.body.style.paddingRight = `${originalPadding}px`\n    } else {\n      document.body.style.paddingRight = \"\"\n    }\n  }\n\n  _handleOverlayClick(event) {\n    if (event.target === this._activeModalOverlay) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleReturnFocus() {\n    this._activeModalButton.setAttribute(Selectors.TABINDEX, \"-1\")\n    this._activeModalButton.focus()\n    this._activeModalButton.removeAttribute(Selectors.TABINDEX)\n  }\n\n  _handleScrollRestore() {\n    document.body.classList.remove(Selectors.NO_SCROLL)\n    document.documentElement.classList.remove(Selectors.NO_SCROLL)\n  }\n\n  _handleScrollStop() {\n    document.body.classList.add(Selectors.NO_SCROLL)\n    document.documentElement.classList.add(Selectors.NO_SCROLL)\n  }\n}\n"],"file":"modal.js"}