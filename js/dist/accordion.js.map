{"version":3,"sources":["../src/accordion.js"],"names":["Selectors","DATA_ACCORDION","DATA_ACCORDION_ROW","DATA_VISIBLE","DATA_TARGET","DATA_TOGGLE_MULTIPLE","DATA_PARENT","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_HIDDEN","ARIA_LABELLEDBY","TABINDEX","Events","CLICK","KEYDOWN","Messages","NO_VISIBLE_ERROR","id","NO_ROW_ERROR","NO_HEADER_ERROR","attr","NO_HEADER_ID_ERROR","NO_PARENT_ERROR","NO_CONTENT_ERROR","Accordion","_render","bind","_accordionButtons","_accordionContentsAttr","_accordionContents","_activeContainer","_activeButton","_activeAccordionRowId","_activeRowAttr","_activeRow","_activeContainerId","_activeContainerAttr","_activeContent","_activeButtonExpandState","_activeContentHiddenState","_headers","accordionButtonSelector","_getPossibleAccordionButtonAttr","length","forEach","button","_setupAccordion","addEventListener","removeEventListener","buttonId","getAttribute","buttonContent","document","getElementById","Error","accordionRowAttr","_getAccordionRowAttr","accordionRow","querySelector","buttonHeaderSelector","join","buttonHeader","buttonContentChildren","setAttribute","contentShouldExpand","style","maxHeight","scrollHeight","element","event","preventDefault","target","_setIds","_setActiveRow","_setActiveContainer","NO_ACCORDION_ERROR","_setActiveContent","_setVisibleState","canExpandMultiple","hasAttribute","_closeAllIfToggleable","_toggleSelectedAccordion","accordionButtonState","_nextButtonExpandState","_nextContentHiddenState","map","header","allContentAttr","allButtons","allContent","allRows","filter","content","_toggleAttributeInCollection","value","elements","attributeName","newValue","Utils"],"mappings":"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","sourcesContent":["import Utils, { getFocusableElements, nodeListToArray } from \"./utils\"\n\nconst Selectors = {\n  // unique\n  DATA_ACCORDION: \"data-accordion\",\n  DATA_ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst Messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find accordion row with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with [data-target='${id}'].`,\n  NO_HEADER_ERROR: attr => `Could not find header associated with ${attr}.`,\n  NO_HEADER_ID_ERROR: attr => `Could not find an id on your header associated with ${attr}.`,\n  NO_PARENT_ERROR: id => `Could not find [data-parent] associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find accordion content block with [id] ${id} associated with [data-target='${id}'].`,\n}\n\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n\n    // all accordions\n    this._accordionButtons = []\n    this._accordionContentsAttr = \"\"\n    this._accordionContents = []\n\n    // active accordion\n    this._activeContainer = {}\n    this._activeButton = {}\n    this._activeAccordionRowId = \"\"\n    this._activeRowAttr = \"\"\n    this._activeRow = \"\"\n    this._activeContainerId = \"\"\n    this._activeContainerAttr = \"\"\n    this._activeContent = {}\n    this._activeButtonExpandState = \"\"\n    this._activeContentHiddenState = \"\"\n\n    // other data\n    this._headers = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"]\n  }\n\n  // public\n\n  start() {\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttr(\n      `[${Selectors.DATA_ACCORDION}]`\n    )\n    this._accordionButtons = nodeListToArray(accordionButtonSelector)\n\n    if (this._accordionButtons.length) {\n      this._accordionButtons.forEach(button => {\n        this._setupAccordion(button)\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  stop() {\n    this._accordionButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  _setupAccordion(button) {\n    const buttonId = button.getAttribute(Selectors.DATA_TARGET)\n    const buttonContent = document.getElementById(buttonId)\n\n    if (!buttonContent) {\n      throw new Error(Messages.NO_CONTENT_ERROR(buttonId))\n    }\n\n    const accordionRowAttr = this._getAccordionRowAttr(buttonId)\n    const accordionRow = document.querySelector(accordionRowAttr)\n\n    if (!accordionRow) {\n      throw new Error(Messages.NO_ROW_ERROR(buttonId))\n    }\n\n    const buttonHeaderSelector = this._headers.join(\", \")\n    const buttonHeader = accordionRow.querySelector(buttonHeaderSelector)\n\n    if (!buttonHeader) {\n      throw new Error(Messages.NO_HEADER_ERROR(accordionRowAttr))\n    }\n\n    if (!buttonHeader.id) {\n      throw new Error(Messages.NO_HEADER_ID_ERROR(accordionRowAttr))\n    }\n\n    const buttonContentChildren = getFocusableElements(`#${buttonContent.id}`)\n\n    button.setAttribute(Selectors.ARIA_CONTROLS, buttonId)\n    buttonContent.setAttribute(Selectors.ARIA_LABELLEDBY, buttonHeader.id)\n\n    const contentShouldExpand = accordionRow.getAttribute(Selectors.DATA_VISIBLE)\n\n    if (!contentShouldExpand) {\n      throw new Error(Messages.NO_VISIBLE_ERROR(buttonId))\n    }\n\n    if (contentShouldExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"0\")\n      })\n    } else {\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  _render(event) {\n    event.preventDefault()\n\n    this._activeButton = event.target\n\n    this._setIds()\n    this._setActiveRow()\n\n    if (!this._activeContainerId) {\n      throw new Error(Messages.NO_PARENT_ERROR(this._activeAccordionRowId))\n    }\n\n    this._setActiveContainer()\n\n    if (!this._activeContainer) {\n      throw new Error(Messages.NO_ACCORDION_ERROR(this._activeContainerId))\n    }\n\n    this._setActiveContent()\n    this._setVisibleState()\n\n    const canExpandMultiple = this._activeContainer.hasAttribute(Selectors.DATA_TOGGLE_MULTIPLE)\n\n    if (!canExpandMultiple) {\n      this._closeAllIfToggleable()\n    }\n\n    this._toggleSelectedAccordion()\n\n    this._activeRow = null\n    this._activeButton = null\n    this._activeContent = null\n    this._activeContainer = null\n  }\n\n  _setActiveContent() {\n    this._activeContent = document.getElementById(this._activeAccordionRowId)\n  }\n\n  _setVisibleState() {\n    const accordionButtonState = this._activeRow.getAttribute(Selectors.DATA_VISIBLE)\n    this._nextButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this._nextContentHiddenState = this._nextButtonExpandState === \"false\" ? \"true\" : \"false\"\n  }\n\n  _setIds() {\n    this._activeContainerId = this._activeButton.getAttribute(Selectors.DATA_PARENT)\n    this._activeAccordionRowId = this._activeButton.getAttribute(Selectors.DATA_TARGET)\n  }\n\n  _setActiveContainer() {\n    this._activeContainerAttr = `[${Selectors.DATA_ACCORDION}='${this._activeContainerId}']`\n    this._activeContainer = document.querySelector(this._activeContainerAttr)\n  }\n\n  _setActiveRow() {\n    this._activeRowAttr = this._getAccordionRowAttr(this._activeAccordionRowId)\n    this._activeRow = document.querySelector(this._activeRowAttr)\n  }\n\n  _getPossibleAccordionButtonAttr(attr) {\n    return this._headers\n      .map(header => {\n        return `${attr} > [${Selectors.DATA_ACCORDION_ROW}] > ${header} [${Selectors.DATA_TARGET}]`\n      })\n      .join(\", \")\n  }\n\n  _getAccordionRowAttr(id) {\n    return `[${Selectors.DATA_ACCORDION_ROW}='${id}']`\n  }\n\n  _closeAllIfToggleable() {\n    // prettier-ignore\n    const allContentAttr = `${this._activeContainerAttr} > [${Selectors.DATA_ACCORDION_ROW}] > [${Selectors.ARIA_HIDDEN}]`\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttr(this._activeContainerAttr)\n    const allButtons = nodeListToArray(accordionButtonSelector)\n    const allContent = nodeListToArray(allContentAttr)\n\n    // prettier-ignore\n    const allRows = nodeListToArray(`${this._activeContainerAttr} > [${Selectors.DATA_ACCORDION_ROW}]`)\n\n    allContent\n      .filter(content => content !== this._activeContent)\n      .forEach(content => (content.style.maxHeight = null))\n\n    getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    this._toggleAttributeInCollection(allRows, Selectors.DATA_VISIBLE, \"false\")\n    this._toggleAttributeInCollection(allButtons, Selectors.ARIA_EXPANDED, \"false\")\n    this._toggleAttributeInCollection(allContent, Selectors.ARIA_HIDDEN, \"true\")\n  }\n\n  _toggleSelectedAccordion() {\n    this._activeRow.setAttribute(Selectors.DATA_VISIBLE, this._nextButtonExpandState)\n    this._activeButton.setAttribute(Selectors.ARIA_EXPANDED, this._nextButtonExpandState)\n    this._activeContent.setAttribute(Selectors.ARIA_HIDDEN, this._nextContentHiddenState)\n\n    getFocusableElements(`#${this._activeAccordionRowId}`).forEach(element => {\n      const value = this._nextButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(Selectors.TABINDEX, value)\n    })\n\n    if (this._activeContent.style.maxHeight) {\n      this._activeContent.style.maxHeight = null\n    } else {\n      this._activeContent.style.maxHeight = `${this._activeContent.scrollHeight}px`\n    }\n  }\n\n  _toggleAttributeInCollection(elements, attributeName, newValue) {\n    elements.forEach(element => element.setAttribute(attributeName, newValue))\n  }\n}\n"],"file":"accordion.js"}