{"version":3,"sources":["../src/accordion.js"],"names":["Selectors","DATA_ACCORDION","DATA_ACCORDION_ROW","DATA_VISIBLE","DATA_TARGET","DATA_TOGGLE_MULTIPLE","DATA_PARENT","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_HIDDEN","ARIA_LABELLEDBY","TABINDEX","Events","CLICK","KEYDOWN","Messages","NO_VISIBLE_ERROR","id","NO_ROW_ERROR","NO_HEADER_ID_ERROR","attr","NO_ACCORDION_ID_ERROR","NO_CONTENT_ERROR","Accordion","_render","bind","_accordionButtons","_accordionContentsAttr","_accordionContents","_activeContainer","_activeButton","_activeAccordionRowId","_activeRowAttr","_activeRow","_activeContainerId","_activeContainerAttr","_activeContent","_activeButtonExpandState","_activeContentHiddenState","_headers","accordionButtonSelector","_getAccordionButtonSelector","dom","findAll","length","forEach","instance","_setup","addEventListener","removeEventListener","buttonTargetId","accordionId","buttonContent","find","Error","accordionRowAttr","_getAccordionRowAttr","accordionRow","buttonId","buttonContentChildren","contentShouldExpand","css","scrollHeight","element","event","preventDefault","target","_setIds","_setActiveRow","_setActiveContainer","_setActiveContent","_setVisibleState","canExpandMultiple","hasAttr","_closeAllIfToggleable","_toggleSelectedAccordion","accordionButtonState","_nextButtonExpandState","_nextContentHiddenState","map","header","join","allContentAttr","allContent","allButtons","allRows","filter","content","setAttribute","_toggleAttributeInCollection","value","elements","attributeName","newValue","Utils"],"mappings":"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","sourcesContent":["import Utils, { getFocusableElements, dom } from \"./utils\"\n\nconst Selectors = {\n  // unique\n  DATA_ACCORDION: \"data-accordion\",\n  DATA_ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst Messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find accordion row with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with [data-target='${id}'].`,\n  NO_HEADER_ID_ERROR: attr => `Could not find an id on your header associated with ${attr}.`,\n  NO_ACCORDION_ID_ERROR: id =>\n    `Could not find [data-accordion] attribute associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find accordion content block with id '${id}'; should match trigger with [data-target='${id}'].`,\n}\n\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n\n    // all accordions\n    this._accordionButtons = []\n    this._accordionContentsAttr = \"\"\n    this._accordionContents = []\n\n    // active accordion\n    this._activeContainer = {}\n    this._activeButton = {}\n    this._activeAccordionRowId = \"\"\n    this._activeRowAttr = \"\"\n    this._activeRow = \"\"\n    this._activeContainerId = \"\"\n    this._activeContainerAttr = \"\"\n    this._activeContent = {}\n    this._activeButtonExpandState = \"\"\n    this._activeContentHiddenState = \"\"\n\n    // other data\n    this._headers = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"]\n  }\n\n  // public\n\n  start() {\n    const accordionButtonSelector = this._getAccordionButtonSelector(\n      `[${Selectors.DATA_ACCORDION}]`\n    )\n    this._accordionButtons = dom.findAll(accordionButtonSelector)\n\n    if (this._accordionButtons.length) {\n      this._accordionButtons.forEach(instance => {\n        this._setup(instance)\n        instance.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  stop() {\n    this._accordionButtons.forEach(instance => {\n      instance.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  _setup(instance) {\n    const buttonTargetId = dom.attr(instance, Selectors.DATA_TARGET)\n    const accordionId = dom.attr(instance, Selectors.DATA_PARENT)\n    const buttonContent = dom.find(`#${buttonTargetId}`)\n\n    if (!accordionId) {\n      throw new Error(Messages.NO_ACCORDION_ID_ERROR(buttonTargetId))\n    }\n\n    if (!buttonContent) {\n      throw new Error(Messages.NO_CONTENT_ERROR(buttonTargetId))\n    }\n\n    const accordionRowAttr = this._getAccordionRowAttr(buttonTargetId)\n    const accordionRow = dom.find(accordionRowAttr)\n\n    if (!accordionRow) {\n      throw new Error(Messages.NO_ROW_ERROR(buttonTargetId))\n    }\n\n    const buttonId = instance.id\n\n    if (!buttonId) {\n      throw new Error(Messages.NO_HEADER_ID_ERROR(accordionRowAttr))\n    }\n\n    const buttonContentChildren = getFocusableElements(`#${buttonContent.id}`)\n\n    dom.attr(instance, Selectors.ARIA_CONTROLS, buttonTargetId)\n    dom.attr(buttonContent, Selectors.ARIA_LABELLEDBY, buttonId)\n\n    const contentShouldExpand = dom.attr(accordionRow, Selectors.DATA_VISIBLE)\n\n    if (!contentShouldExpand) {\n      throw new Error(Messages.NO_VISIBLE_ERROR(buttonTargetId))\n    }\n\n    if (contentShouldExpand === \"true\") {\n      dom.css(buttonContent, \"maxHeight\", `${buttonContent.scrollHeight}px`)\n      dom.attr(instance, Selectors.ARIA_EXPANDED, \"true\")\n      dom.attr(buttonContent, Selectors.ARIA_HIDDEN, \"false\")\n\n      buttonContentChildren.forEach(element => {\n        dom.attr(element, Selectors.TABINDEX, \"0\")\n      })\n    } else {\n      dom.attr(instance, Selectors.ARIA_EXPANDED, \"false\")\n      dom.attr(buttonContent, Selectors.ARIA_HIDDEN, \"true\")\n\n      buttonContentChildren.forEach(element => {\n        dom.attr(element, Selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  _render(event) {\n    event.preventDefault()\n\n    this._activeButton = event.target\n\n    this._setIds()\n    this._setActiveRow()\n    this._setActiveContainer()\n    this._setActiveContent()\n    this._setVisibleState()\n\n    const canExpandMultiple = dom.hasAttr(this._activeContainer, Selectors.DATA_TOGGLE_MULTIPLE)\n\n    if (!canExpandMultiple) this._closeAllIfToggleable()\n\n    this._toggleSelectedAccordion()\n\n    this._activeRow = null\n    this._activeButton = null\n    this._activeContent = null\n    this._activeContainer = null\n  }\n\n  _setActiveContent() {\n    this._activeContent = dom.find(`#${this._activeAccordionRowId}`)\n  }\n\n  _setVisibleState() {\n    const accordionButtonState = dom.attr(this._activeRow, Selectors.DATA_VISIBLE)\n    this._nextButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this._nextContentHiddenState = this._nextButtonExpandState === \"false\" ? \"true\" : \"false\"\n  }\n\n  _setIds() {\n    this._activeContainerId = dom.attr(this._activeButton, Selectors.DATA_PARENT)\n    this._activeAccordionRowId = dom.attr(this._activeButton, Selectors.DATA_TARGET)\n  }\n\n  _setActiveContainer() {\n    this._activeContainerAttr = `[${Selectors.DATA_ACCORDION}='${this._activeContainerId}']`\n    this._activeContainer = dom.find(this._activeContainerAttr)\n  }\n\n  _setActiveRow() {\n    this._activeRowAttr = this._getAccordionRowAttr(this._activeAccordionRowId)\n    this._activeRow = dom.find(this._activeRowAttr)\n  }\n\n  _getAccordionButtonSelector(attr) {\n    return this._headers\n      .map(header => {\n        return `${attr} > [${Selectors.DATA_ACCORDION_ROW}] > ${header} [${Selectors.DATA_TARGET}]`\n      })\n      .join(\", \")\n  }\n\n  _getAccordionRowAttr(id) {\n    return `[${Selectors.DATA_ACCORDION_ROW}='${id}']`\n  }\n\n  _closeAllIfToggleable() {\n    const allContentAttr = `${this._activeContainerAttr} > [${Selectors.DATA_ACCORDION_ROW}] > [${\n      Selectors.ARIA_HIDDEN\n    }]`\n    const allContent = dom.findAll(allContentAttr)\n    const accordionButtonSelector = this._getAccordionButtonSelector(this._activeContainerAttr)\n    const allButtons = dom.findAll(accordionButtonSelector)\n    const allRows = dom.findAll(`${this._activeContainerAttr} > [${Selectors.DATA_ACCORDION_ROW}]`)\n\n    allContent\n      .filter(content => content !== this._activeContent)\n      .forEach(content => dom.css(content, \"maxHeight\", null))\n\n    getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    this._toggleAttributeInCollection(allRows, Selectors.DATA_VISIBLE, \"false\")\n    this._toggleAttributeInCollection(allButtons, Selectors.ARIA_EXPANDED, \"false\")\n    this._toggleAttributeInCollection(allContent, Selectors.ARIA_HIDDEN, \"true\")\n  }\n\n  _toggleSelectedAccordion() {\n    dom.attr(this._activeRow, Selectors.DATA_VISIBLE, this._nextButtonExpandState)\n    dom.attr(this._activeButton, Selectors.ARIA_EXPANDED, this._nextButtonExpandState)\n    dom.attr(this._activeContent, Selectors.ARIA_HIDDEN, this._nextContentHiddenState)\n\n    getFocusableElements(`#${this._activeAccordionRowId}`).forEach(element => {\n      const value = this._nextButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      dom.attr(element, Selectors.TABINDEX, value)\n    })\n\n    if (dom.css(this._activeContent, \"maxHeight\")) {\n      dom.css(this._activeContent, \"maxHeight\", null)\n    } else {\n      dom.css(this._activeContent, \"maxHeight\", `${this._activeContent.scrollHeight}px`)\n    }\n  }\n\n  _toggleAttributeInCollection(elements, attributeName, newValue) {\n    elements.forEach(element => dom.attr(element, attributeName, newValue))\n  }\n}\n"],"file":"accordion.js"}