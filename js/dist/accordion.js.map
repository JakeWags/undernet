{"version":3,"sources":["../src/accordion.js"],"names":["Selectors","DATA_ACCORDION","DATA_ACCORDION_ROW","DATA_VISIBLE","DATA_TARGET","DATA_TOGGLE_MULTIPLE","DATA_PARENT","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_HIDDEN","ARIA_LABELLEDBY","TABINDEX","Events","CLICK","KEYDOWN","Messages","NO_VISIBLE_ERROR","id","NO_ROW_ERROR","NO_HEADER_ID_ERROR","NO_PARENT_ERROR","NO_CONTENT_ERROR","Accordion","_render","bind","_accordionButtons","_accordionContentsAttr","_accordionContents","_activeContainer","_activeButton","_activeAccordionRowId","_activeRowAttr","_activeRow","_activeContainerId","_activeContainerAttr","_activeContent","_activeButtonExpandState","_activeContentHiddenState","_headerLevels","accordionButtonSelector","_getPossibleAccordionButtonAttr","length","forEach","button","_setupAccordion","addEventListener","removeEventListener","buttonId","getAttribute","buttonContent","document","getElementById","console","error","accordionRowAttr","_getAccordionRowAttr","accordionRow","querySelector","buttonHeaderAttr","_getHeadersSelector","buttonHeader","buttonContentChildren","setAttribute","contentShouldExpand","style","maxHeight","scrollHeight","element","event","preventDefault","target","_setIds","_setActiveRow","_setActiveContainer","NO_ACCORDION_ERROR","_setActiveContent","_setVisibleState","canExpandMultiple","hasAttribute","_closeAllIfToggleable","_toggleSelectedAccordion","accordionButtonState","_nextButtonExpandState","_nextContentHiddenState","attr","map","header","join","allContentAttr","allButtons","allContent","allRows","filter","content","_toggleAttributeInCollection","value","elements","attributeName","newValue","Utils"],"mappings":";;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,SAAS,GAAG;AAEhBC,EAAAA,cAAc,EAAE,gBAFA;AAGhBC,EAAAA,kBAAkB,EAAE,oBAHJ;AAKhBC,EAAAA,YAAY,EAAE,cALE;AAMhBC,EAAAA,WAAW,EAAE,aANG;AAOhBC,EAAAA,oBAAoB,EAAE,sBAPN;AAQhBC,EAAAA,WAAW,EAAE,aARG;AAUhBC,EAAAA,aAAa,EAAE,eAVC;AAWhBC,EAAAA,aAAa,EAAE,eAXC;AAYhBC,EAAAA,WAAW,EAAE,aAZG;AAahBC,EAAAA,eAAe,EAAE,iBAbD;AAchBC,EAAAA,QAAQ,EAAE;AAdM,CAAlB;AAiBA,IAAMC,MAAM,GAAG;AACbC,EAAAA,KAAK,EAAE,OADM;AAEbC,EAAAA,OAAO,EAAE;AAFI,CAAf;AAKA,IAAMC,QAAQ,GAAG;AACfC,EAAAA,gBAAgB,EAAE,0BAAAC,EAAE;AAAA,uGACmEA,EADnE;AAAA,GADL;AAGfC,EAAAA,YAAY,EAAE,sBAAAD,EAAE;AAAA,yEAA2DA,EAA3D;AAAA,GAHD;AAIfE,EAAAA,kBAAkB,EAAE,4BAAAF,EAAE;AAAA,6EAA+DA,EAA/D;AAAA,GAJP;AAKfG,EAAAA,eAAe,EAAE,yBAAAH,EAAE;AAAA,gFAAkEA,EAAlE;AAAA,GALJ;AAMfI,EAAAA,gBAAgB,EAAE,0BAAAJ,EAAE;AAAA,sEACkCA,EADlC,4CACsEA,EADtE;AAAA;AANL,CAAjB;;IAUqBK,S;;;AACnB,uBAAc;AAAA;;AAAA;;AACZ;AAGA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf;AAGA,UAAKC,iBAAL,GAAyB,EAAzB;AACA,UAAKC,sBAAL,GAA8B,EAA9B;AACA,UAAKC,kBAAL,GAA0B,EAA1B;AAGA,UAAKC,gBAAL,GAAwB,EAAxB;AACA,UAAKC,aAAL,GAAqB,EAArB;AACA,UAAKC,qBAAL,GAA6B,EAA7B;AACA,UAAKC,cAAL,GAAsB,EAAtB;AACA,UAAKC,UAAL,GAAkB,EAAlB;AACA,UAAKC,kBAAL,GAA0B,EAA1B;AACA,UAAKC,oBAAL,GAA4B,EAA5B;AACA,UAAKC,cAAL,GAAsB,EAAtB;AACA,UAAKC,wBAAL,GAAgC,EAAhC;AACA,UAAKC,yBAAL,GAAiC,EAAjC;AAGA,UAAKC,aAAL,GAAqB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,CAArB;AAxBY;AAyBb;;;;4BAIO;AAAA;;AACN,UAAMC,uBAAuB,GAAG,KAAKC,+BAAL,YAC1BxC,SAAS,CAACC,cADgB,OAAhC;;AAGA,WAAKwB,iBAAL,GAAyB,4BAAgBc,uBAAhB,CAAzB;;AAEA,UAAI,KAAKd,iBAAL,CAAuBgB,MAA3B,EAAmC;AACjC,aAAKhB,iBAAL,CAAuBiB,OAAvB,CAA+B,UAAAC,MAAM,EAAI;AACvC,UAAA,MAAI,CAACC,eAAL,CAAqBD,MAArB;;AACAA,UAAAA,MAAM,CAACE,gBAAP,CAAwBjC,MAAM,CAACC,KAA/B,EAAsC,MAAI,CAACU,OAA3C;AACD,SAHD;AAID;AACF;;;2BAEM;AAAA;;AACL,WAAKE,iBAAL,CAAuBiB,OAAvB,CAA+B,UAAAC,MAAM,EAAI;AACvCA,QAAAA,MAAM,CAACG,mBAAP,CAA2BlC,MAAM,CAACC,KAAlC,EAAyC,MAAI,CAACU,OAA9C;AACD,OAFD;AAGD;;;oCAIeoB,M,EAAQ;AACtB,UAAMI,QAAQ,GAAGJ,MAAM,CAACK,YAAP,CAAoBhD,SAAS,CAACI,WAA9B,CAAjB;AACA,UAAM6C,aAAa,GAAGC,QAAQ,CAACC,cAAT,CAAwBJ,QAAxB,CAAtB;;AAEA,UAAI,CAACE,aAAL,EAAoB;AAClB,eAAOG,OAAO,CAACC,KAAR,CAActC,QAAQ,CAACM,gBAAT,CAA0B0B,QAA1B,CAAd,CAAP;AACD;;AAED,UAAMO,gBAAgB,GAAG,KAAKC,oBAAL,CAA0BR,QAA1B,CAAzB;;AACA,UAAMS,YAAY,GAAGN,QAAQ,CAACO,aAAT,CAAuBH,gBAAvB,CAArB;;AAEA,UAAI,CAACE,YAAL,EAAmB;AACjB,eAAOJ,OAAO,CAACC,KAAR,CAActC,QAAQ,CAACG,YAAT,CAAsB6B,QAAtB,CAAd,CAAP;AACD;;AAED,UAAMW,gBAAgB,GAAG,KAAKC,mBAAL,CAAyBL,gBAAzB,CAAzB;;AACA,UAAMM,YAAY,GAAGJ,YAAY,CAACC,aAAb,CAA2BC,gBAA3B,CAArB;;AAEA,UAAI,CAACE,YAAD,IAAiB,CAACA,YAAY,CAAC3C,EAAnC,EAAuC;AACrC,eAAOmC,OAAO,CAACC,KAAR,CAActC,QAAQ,CAACI,kBAAT,CAA4B4B,QAA5B,CAAd,CAAP;AACD;;AAED,UAAMc,qBAAqB,GAAG,4CAAyBZ,aAAa,CAAChC,EAAvC,EAA9B;AAEA0B,MAAAA,MAAM,CAACmB,YAAP,CAAoB9D,SAAS,CAACQ,aAA9B,EAA6CuC,QAA7C;AACAE,MAAAA,aAAa,CAACa,YAAd,CAA2B9D,SAAS,CAACU,eAArC,EAAsDkD,YAAY,CAAC3C,EAAnE;AAEA,UAAM8C,mBAAmB,GAAGP,YAAY,CAACR,YAAb,CAA0BhD,SAAS,CAACG,YAApC,CAA5B;;AAEA,UAAI,CAAC4D,mBAAL,EAA0B;AACxB,eAAOX,OAAO,CAACC,KAAR,CAActC,QAAQ,CAACC,gBAAT,CAA0B+B,QAA1B,CAAd,CAAP;AACD;;AAED,UAAIgB,mBAAmB,KAAK,MAA5B,EAAoC;AAClCd,QAAAA,aAAa,CAACe,KAAd,CAAoBC,SAApB,aAAmChB,aAAa,CAACiB,YAAjD;AACAvB,QAAAA,MAAM,CAACmB,YAAP,CAAoB9D,SAAS,CAACO,aAA9B,EAA6C,MAA7C;AACA0C,QAAAA,aAAa,CAACa,YAAd,CAA2B9D,SAAS,CAACS,WAArC,EAAkD,OAAlD;AACAoD,QAAAA,qBAAqB,CAACnB,OAAtB,CAA8B,UAAAyB,OAAO,EAAI;AACvCA,UAAAA,OAAO,CAACL,YAAR,CAAqB9D,SAAS,CAACW,QAA/B,EAAyC,GAAzC;AACD,SAFD;AAGD,OAPD,MAOO;AACLgC,QAAAA,MAAM,CAACmB,YAAP,CAAoB9D,SAAS,CAACO,aAA9B,EAA6C,OAA7C;AACA0C,QAAAA,aAAa,CAACa,YAAd,CAA2B9D,SAAS,CAACS,WAArC,EAAkD,MAAlD;AACAoD,QAAAA,qBAAqB,CAACnB,OAAtB,CAA8B,UAAAyB,OAAO,EAAI;AACvCA,UAAAA,OAAO,CAACL,YAAR,CAAqB9D,SAAS,CAACW,QAA/B,EAAyC,IAAzC;AACD,SAFD;AAGD;AACF;;;4BAEOyD,K,EAAO;AACbA,MAAAA,KAAK,CAACC,cAAN;AAEA,WAAKxC,aAAL,GAAqBuC,KAAK,CAACE,MAA3B;;AAEA,WAAKC,OAAL;;AACA,WAAKC,aAAL;;AAEA,UAAI,CAAC,KAAKvC,kBAAV,EAA8B;AAC5B,eAAOmB,OAAO,CAACC,KAAR,CAActC,QAAQ,CAACK,eAAT,CAAyB,KAAKU,qBAA9B,CAAd,CAAP;AACD;;AAED,WAAK2C,mBAAL;;AAEA,UAAI,CAAC,KAAK7C,gBAAV,EAA4B;AAC1B,eAAOwB,OAAO,CAACC,KAAR,CAActC,QAAQ,CAAC2D,kBAAT,CAA4B,KAAKzC,kBAAjC,CAAd,CAAP;AACD;;AAED,WAAK0C,iBAAL;;AACA,WAAKC,gBAAL;;AAEA,UAAMC,iBAAiB,GAAG,KAAKjD,gBAAL,CAAsBkD,YAAtB,CAAmC9E,SAAS,CAACK,oBAA7C,CAA1B;;AAEA,UAAI,CAACwE,iBAAL,EAAwB;AACtB,aAAKE,qBAAL;AACD;;AAED,WAAKC,wBAAL;;AAEA,WAAKhD,UAAL,GAAkB,IAAlB;AACA,WAAKH,aAAL,GAAqB,IAArB;AACA,WAAKM,cAAL,GAAsB,IAAtB;AACA,WAAKP,gBAAL,GAAwB,IAAxB;AACD;;;wCAEmB;AAClB,WAAKO,cAAL,GAAsBe,QAAQ,CAACC,cAAT,CAAwB,KAAKrB,qBAA7B,CAAtB;AACD;;;uCAEkB;AACjB,UAAMmD,oBAAoB,GAAG,KAAKjD,UAAL,CAAgBgB,YAAhB,CAA6BhD,SAAS,CAACG,YAAvC,CAA7B;;AACA,WAAK+E,sBAAL,GAA8BD,oBAAoB,KAAK,MAAzB,GAAkC,OAAlC,GAA4C,MAA1E;AACA,WAAKE,uBAAL,GAA+B,KAAKD,sBAAL,KAAgC,OAAhC,GAA0C,MAA1C,GAAmD,OAAlF;AACD;;;8BAES;AACR,WAAKjD,kBAAL,GAA0B,KAAKJ,aAAL,CAAmBmB,YAAnB,CAAgChD,SAAS,CAACM,WAA1C,CAA1B;AACA,WAAKwB,qBAAL,GAA6B,KAAKD,aAAL,CAAmBmB,YAAnB,CAAgChD,SAAS,CAACI,WAA1C,CAA7B;AACD;;;0CAEqB;AACpB,WAAK8B,oBAAL,cAAgClC,SAAS,CAACC,cAA1C,eAA6D,KAAKgC,kBAAlE;AACA,WAAKL,gBAAL,GAAwBsB,QAAQ,CAACO,aAAT,CAAuB,KAAKvB,oBAA5B,CAAxB;AACD;;;oCAEe;AACd,WAAKH,cAAL,GAAsB,KAAKwB,oBAAL,CAA0B,KAAKzB,qBAA/B,CAAtB;AACA,WAAKE,UAAL,GAAkBkB,QAAQ,CAACO,aAAT,CAAuB,KAAK1B,cAA5B,CAAlB;AACD;;;oDAE+BqD,I,EAAM;AACpC,aAAO,KAAK9C,aAAL,CACJ+C,GADI,CACA,UAAAC,MAAM,EAAI;AACb,yBAAUF,IAAV,iBAAqBpF,SAAS,CAACE,kBAA/B,iBAAwDoF,MAAxD,eAAmEtF,SAAS,CAACI,WAA7E;AACD,OAHI,EAIJmF,IAJI,CAIC,IAJD,CAAP;AAKD;;;0CAEqB;AACpB,aAAO,KAAKjD,aAAL,CAAmBiD,IAAnB,CAAwB,IAAxB,CAAP;AACD;;;yCAEoBtE,E,EAAI;AACvB,wBAAWjB,SAAS,CAACE,kBAArB,eAA4Ce,EAA5C;AACD;;;4CAEuB;AAAA;;AAEtB,UAAMuE,cAAc,aAAM,KAAKtD,oBAAX,iBAAsClC,SAAS,CAACE,kBAAhD,kBAA0EF,SAAS,CAACS,WAApF,MAApB;;AACA,UAAM8B,uBAAuB,GAAG,KAAKC,+BAAL,CAAqC,KAAKN,oBAA1C,CAAhC;;AACA,UAAMuD,UAAU,GAAG,4BAAgBlD,uBAAhB,CAAnB;AACA,UAAMmD,UAAU,GAAG,4BAAgBF,cAAhB,CAAnB;AAGA,UAAMG,OAAO,GAAG,sCAAmB,KAAKzD,oBAAxB,iBAAmDlC,SAAS,CAACE,kBAA7D,OAAhB;AAEAwF,MAAAA,UAAU,CACPE,MADH,CACU,UAAAC,OAAO;AAAA,eAAIA,OAAO,KAAK,MAAI,CAAC1D,cAArB;AAAA,OADjB,EAEGO,OAFH,CAEW,UAAAmD,OAAO;AAAA,eAAKA,OAAO,CAAC7B,KAAR,CAAcC,SAAd,GAA0B,IAA/B;AAAA,OAFlB;AAIA,uCAAqBuB,cAArB,EAAqC9C,OAArC,CAA6C,UAAAyB,OAAO,EAAI;AACtDA,QAAAA,OAAO,CAACL,YAAR,CAAqB9D,SAAS,CAACW,QAA/B,EAAyC,IAAzC;AACD,OAFD;;AAIA,WAAKmF,4BAAL,CAAkCH,OAAlC,EAA2C3F,SAAS,CAACG,YAArD,EAAmE,OAAnE;;AACA,WAAK2F,4BAAL,CAAkCL,UAAlC,EAA8CzF,SAAS,CAACO,aAAxD,EAAuE,OAAvE;;AACA,WAAKuF,4BAAL,CAAkCJ,UAAlC,EAA8C1F,SAAS,CAACS,WAAxD,EAAqE,MAArE;AACD;;;+CAE0B;AAAA;;AACzB,WAAKuB,UAAL,CAAgB8B,YAAhB,CAA6B9D,SAAS,CAACG,YAAvC,EAAqD,KAAK+E,sBAA1D;;AACA,WAAKrD,aAAL,CAAmBiC,YAAnB,CAAgC9D,SAAS,CAACO,aAA1C,EAAyD,KAAK2E,sBAA9D;;AACA,WAAK/C,cAAL,CAAoB2B,YAApB,CAAiC9D,SAAS,CAACS,WAA3C,EAAwD,KAAK0E,uBAA7D;;AAEA,kDAAyB,KAAKrD,qBAA9B,GAAuDY,OAAvD,CAA+D,UAAAyB,OAAO,EAAI;AACxE,YAAM4B,KAAK,GAAG,MAAI,CAACb,sBAAL,KAAgC,MAAhC,GAAyC,GAAzC,GAA+C,IAA7D;AACAf,QAAAA,OAAO,CAACL,YAAR,CAAqB9D,SAAS,CAACW,QAA/B,EAAyCoF,KAAzC;AACD,OAHD;;AAKA,UAAI,KAAK5D,cAAL,CAAoB6B,KAApB,CAA0BC,SAA9B,EAAyC;AACvC,aAAK9B,cAAL,CAAoB6B,KAApB,CAA0BC,SAA1B,GAAsC,IAAtC;AACD,OAFD,MAEO;AACL,aAAK9B,cAAL,CAAoB6B,KAApB,CAA0BC,SAA1B,aAAyC,KAAK9B,cAAL,CAAoB+B,YAA7D;AACD;AACF;;;iDAE4B8B,Q,EAAUC,a,EAAeC,Q,EAAU;AAC9DF,MAAAA,QAAQ,CAACtD,OAAT,CAAiB,UAAAyB,OAAO;AAAA,eAAIA,OAAO,CAACL,YAAR,CAAqBmC,aAArB,EAAoCC,QAApC,CAAJ;AAAA,OAAxB;AACD;;;;EA3NoCC,c","sourcesContent":["import Utils, { getFocusableElements, nodeListToArray } from \"./utils\"\n\nconst Selectors = {\n  // unique\n  DATA_ACCORDION: \"data-accordion\",\n  DATA_ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst Messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find parent with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with ${id}.`,\n  NO_HEADER_ID_ERROR: id => `Could not find header tag associated with [data-target='${id}'].`,\n  NO_PARENT_ERROR: id => `Could not find [data-parent] associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find accordion content block with [id] ${id} associated with [data-target='${id}'].`,\n}\n\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n\n    // all accordions\n    this._accordionButtons = []\n    this._accordionContentsAttr = \"\"\n    this._accordionContents = []\n\n    // active accordion\n    this._activeContainer = {}\n    this._activeButton = {}\n    this._activeAccordionRowId = \"\"\n    this._activeRowAttr = \"\"\n    this._activeRow = \"\"\n    this._activeContainerId = \"\"\n    this._activeContainerAttr = \"\"\n    this._activeContent = {}\n    this._activeButtonExpandState = \"\"\n    this._activeContentHiddenState = \"\"\n\n    // other data\n    this._headerLevels = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"]\n  }\n\n  // public\n\n  start() {\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttr(\n      `[${Selectors.DATA_ACCORDION}]`\n    )\n    this._accordionButtons = nodeListToArray(accordionButtonSelector)\n\n    if (this._accordionButtons.length) {\n      this._accordionButtons.forEach(button => {\n        this._setupAccordion(button)\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  stop() {\n    this._accordionButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  _setupAccordion(button) {\n    const buttonId = button.getAttribute(Selectors.DATA_TARGET)\n    const buttonContent = document.getElementById(buttonId)\n\n    if (!buttonContent) {\n      return console.error(Messages.NO_CONTENT_ERROR(buttonId))\n    }\n\n    const accordionRowAttr = this._getAccordionRowAttr(buttonId)\n    const accordionRow = document.querySelector(accordionRowAttr)\n\n    if (!accordionRow) {\n      return console.error(Messages.NO_ROW_ERROR(buttonId))\n    }\n\n    const buttonHeaderAttr = this._getHeadersSelector(accordionRowAttr)\n    const buttonHeader = accordionRow.querySelector(buttonHeaderAttr)\n\n    if (!buttonHeader || !buttonHeader.id) {\n      return console.error(Messages.NO_HEADER_ID_ERROR(buttonId))\n    }\n\n    const buttonContentChildren = getFocusableElements(`#${buttonContent.id}`)\n\n    button.setAttribute(Selectors.ARIA_CONTROLS, buttonId)\n    buttonContent.setAttribute(Selectors.ARIA_LABELLEDBY, buttonHeader.id)\n\n    const contentShouldExpand = accordionRow.getAttribute(Selectors.DATA_VISIBLE)\n\n    if (!contentShouldExpand) {\n      return console.error(Messages.NO_VISIBLE_ERROR(buttonId))\n    }\n\n    if (contentShouldExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"0\")\n      })\n    } else {\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  _render(event) {\n    event.preventDefault()\n\n    this._activeButton = event.target\n\n    this._setIds()\n    this._setActiveRow()\n\n    if (!this._activeContainerId) {\n      return console.error(Messages.NO_PARENT_ERROR(this._activeAccordionRowId))\n    }\n\n    this._setActiveContainer()\n\n    if (!this._activeContainer) {\n      return console.error(Messages.NO_ACCORDION_ERROR(this._activeContainerId))\n    }\n\n    this._setActiveContent()\n    this._setVisibleState()\n\n    const canExpandMultiple = this._activeContainer.hasAttribute(Selectors.DATA_TOGGLE_MULTIPLE)\n\n    if (!canExpandMultiple) {\n      this._closeAllIfToggleable()\n    }\n\n    this._toggleSelectedAccordion()\n\n    this._activeRow = null\n    this._activeButton = null\n    this._activeContent = null\n    this._activeContainer = null\n  }\n\n  _setActiveContent() {\n    this._activeContent = document.getElementById(this._activeAccordionRowId)\n  }\n\n  _setVisibleState() {\n    const accordionButtonState = this._activeRow.getAttribute(Selectors.DATA_VISIBLE)\n    this._nextButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this._nextContentHiddenState = this._nextButtonExpandState === \"false\" ? \"true\" : \"false\"\n  }\n\n  _setIds() {\n    this._activeContainerId = this._activeButton.getAttribute(Selectors.DATA_PARENT)\n    this._activeAccordionRowId = this._activeButton.getAttribute(Selectors.DATA_TARGET)\n  }\n\n  _setActiveContainer() {\n    this._activeContainerAttr = `[${Selectors.DATA_ACCORDION}='${this._activeContainerId}']`\n    this._activeContainer = document.querySelector(this._activeContainerAttr)\n  }\n\n  _setActiveRow() {\n    this._activeRowAttr = this._getAccordionRowAttr(this._activeAccordionRowId)\n    this._activeRow = document.querySelector(this._activeRowAttr)\n  }\n\n  _getPossibleAccordionButtonAttr(attr) {\n    return this._headerLevels\n      .map(header => {\n        return `${attr} > [${Selectors.DATA_ACCORDION_ROW}] > ${header} [${Selectors.DATA_TARGET}]`\n      })\n      .join(\", \")\n  }\n\n  _getHeadersSelector() {\n    return this._headerLevels.join(\", \")\n  }\n\n  _getAccordionRowAttr(id) {\n    return `[${Selectors.DATA_ACCORDION_ROW}='${id}']`\n  }\n\n  _closeAllIfToggleable() {\n    // prettier-ignore\n    const allContentAttr = `${this._activeContainerAttr} > [${Selectors.DATA_ACCORDION_ROW}] > [${Selectors.ARIA_HIDDEN}]`\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttr(this._activeContainerAttr)\n    const allButtons = nodeListToArray(accordionButtonSelector)\n    const allContent = nodeListToArray(allContentAttr)\n\n    // prettier-ignore\n    const allRows = nodeListToArray(`${this._activeContainerAttr} > [${Selectors.DATA_ACCORDION_ROW}]`)\n\n    allContent\n      .filter(content => content !== this._activeContent)\n      .forEach(content => (content.style.maxHeight = null))\n\n    getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    this._toggleAttributeInCollection(allRows, Selectors.DATA_VISIBLE, \"false\")\n    this._toggleAttributeInCollection(allButtons, Selectors.ARIA_EXPANDED, \"false\")\n    this._toggleAttributeInCollection(allContent, Selectors.ARIA_HIDDEN, \"true\")\n  }\n\n  _toggleSelectedAccordion() {\n    this._activeRow.setAttribute(Selectors.DATA_VISIBLE, this._nextButtonExpandState)\n    this._activeButton.setAttribute(Selectors.ARIA_EXPANDED, this._nextButtonExpandState)\n    this._activeContent.setAttribute(Selectors.ARIA_HIDDEN, this._nextContentHiddenState)\n\n    getFocusableElements(`#${this._activeAccordionRowId}`).forEach(element => {\n      const value = this._nextButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(Selectors.TABINDEX, value)\n    })\n\n    if (this._activeContent.style.maxHeight) {\n      this._activeContent.style.maxHeight = null\n    } else {\n      this._activeContent.style.maxHeight = `${this._activeContent.scrollHeight}px`\n    }\n  }\n\n  _toggleAttributeInCollection(elements, attributeName, newValue) {\n    elements.forEach(element => element.setAttribute(attributeName, newValue))\n  }\n}\n"],"file":"accordion.js"}